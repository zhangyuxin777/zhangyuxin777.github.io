{"version":3,"sources":["../../../src/js/mui.all.js"],"names":["mui","document","undefined","readyRE","idSelectorRE","classSelectorRE","tagSelectorRE","translateRE","translateMatrixRE","$","selector","context","wrap","isArrayLike","slice","call","ready","trim","test","found","getElementById","RegExp","$1","qsa","e","dom","fn","uuid","data","extend","options","name","src","copy","copyIsArray","clone","target","arguments","i","length","deep","isFunction","isPlainObject","isArray","noop","filter","type","obj","String","class2type","toString","Array","object","isWindow","window","isObject","Object","prototype","isEmptyObject","o","p","value","getElementsByClassName","getElementsByTagName","querySelectorAll","callback","readyState","addEventListener","buffer","ms","timer","lastStart","lastEnd","run","cancel","now","apply","later","stop","each","elements","hasOwnProperty","every","el","idx","key","focus","element","os","ios","setTimeout","trigger","eventType","eventData","dispatchEvent","CustomEvent","detail","bubbles","cancelable","getStyles","property","styles","ownerDocument","defaultView","getComputedStyle","getPropertyValue","parseTranslate","translateString","position","result","match","split","x","parseFloat","y","z","parseTranslateMatrix","matrix","is3D","push","hooks","addAction","hook","index","sort","a","b","doAction","handle","when","m","d","f","r","id","clearTimeout","Date","toLowerCase","MAX_EXCEED","VISIBLE_RANGE","DEFAULT_ITEM_HEIGHT","BLUR_WIDTH","rad2deg","rad","Math","PI","deg2rad","deg","platform","navigator","userAgent","isIos","indexOf","Picker","holder","self","init","initInertiaParams","calcElementItemPostion","bindEvent","findElementItems","elementItems","list","querySelector","height","offsetHeight","itemHeight","itemAngle","parseInt","calcAngle","hightlightRange","visibleRange","beginAngle","beginExceed","angle","style","webkitTransformOrigin","andGenerateItms","items","forEach","item","endAngle","webkitTransform","dataItem","text","innerHTML","getAttribute","endExceed","calcElementItemVisibility","c","abs","intDeg","cosC","angleC","acos","difference","classList","add","remove","setAngle","lastAngle","startY","isPicking","EVENT_START","event","preventDefault","webkitTransition","changedTouches","pageY","updateInertiaParams","EVENT_END","startInertiaScroll","EVENT_CANCEL","EVENT_MOVE","endY","dragRange","dragAngle","newAngle","elementItem","tagName","setSelectedIndex","lastMoveTime","lastMoveStart","stopInertiaMove","isStart","point","timeStamp","startAngle","nowTime","v","dir","deceleration","duration","dist","distAngle","srcDistAngle","endScroll","scrollDistAngle","frameInterval","stepCount","stepIndex","inertiaMove","quartEaseOut","t","toFixed","triggerChange","force","getSelectedIndex","lastIndex","correctAngle","setItems","join","getItems","getSelectedItem","getSelectedValue","getSelectedText","setSelectedValue","JSON","parseJSON","parse","picker","optionsText","_options","define","amd","detect","ua","funcs","wechat","version","replace","android","isBadAndroid","appVersion","iphone","ipad","func","plus","body","stream","isTouchable","EVENT_CLICK","_mid","delegates","eventMethods","stopImmediatePropagation","stopPropagation","returnTrue","returnFalse","compatible","currentTarget","predicate","sourceMethod","mid","delegateFns","delegateFn","callbackObjs","handlerQueue","selectorAlls","parentNode","disabled","contains","matches","callbacks","handlers","handler","gesture","isPropagationStopped","findDelegateFn","delegateCallbacks","filterFn","preventDefaultException","on","isAddEventListener","delegateEvents","delegateCallbackObjs","delegateFnArray","delegateCallback","href","off","splice","removeEventListener","bind","targets","targetHandles","registerTarget","founds","isFound","targetHandle","isContinue","isReset","setPrototypeOf","proto","params","evt","createEvent","initEvent","Event","Function","to","partial","bound","args","concat","documentElement","HTMLElement","defineProperty","get","update","classes","className","ret","toggle","requestAnimationFrame","lastTime","webkitRequestAnimationFrame","currTime","getTime","timeToCall","max","cancelAnimationFrame","webkitCancelAnimationFrame","webkitCancelRequestAnimationFrame","FastClick","targetElement","click","clickEvent","touch","activeElement","blur","initMouseEvent","screenX","screenY","clientX","clientY","forwardedTouchEvent","propagationStopped","CLASS_FOCUSIN","CLASS_BAR_TAB","CLASS_BAR_FOOTER","CLASS_BAR_FOOTER_SECONDARY","CLASS_BAR_FOOTER_SECONDARY_TAB","webview","currentWebview","children","readOnly","isFooter","scrollTop","scrollHeight","scrollLeft","scrollTo","namespace","classNamePrefix","classSelectorPrefix","classSelector","eventName","module","gestures","session","addGesture","round","sqrt","atan","atan2","getDistance","p1","p2","props","getScale","starts","moves","getAngle","getDirection","getRotation","start","end","getVelocity","deltaTime","stoped","gestureConfig","hasParent","node","parent","uniqueArray","results","values","val","sortUniqueArray","getMultiCenter","touches","touchesLength","pageX","multiTouch","pinch","copySimpleTouchData","timestamp","center","deltaX","deltaY","calDelta","offset","offsetDelta","prevDelta","prevTouch","calTouchData","firstTouch","firstMultiTouch","offsetCenter","distance","offsetDirection","scale","rotation","calIntervalTouchData","CAL_INTERVAL","last","lastInterval","velocity","velocityX","velocityY","direction","targetIds","convertTouches","getTouches","allTouches","targetTouches","changedTargetTouches","identifier","sessionTarget","changedTouchesLength","isFirst","isFinal","handleTouchEvent","popover","tab","offcanvas","modal","isScrolling","scrollingTimeout","flickStartTime","flickStart","flick","flickMaxTime","flickMinDistince","flickTime","flickDistanceX","flickDistanceY","swipe","swipeMaxTime","swipeMinDistince","lockDirection","startDirection","drag","fingers","lastTarget","lastTapTime","tapMaxDistance","tapMaxTime","doubletap","tapMaxInterval","holdTimeout","holdThreshold","hold","lastScale","scaleDiff","minRotationAngle","global","tap","longtap","initGlobal","inits","isInitialized","isInit","repeat","addInit","subpages","createIframe","wrapper","createElement","top","bottom","iframe","url","appendChild","handleScroll","location","localStorage","getItem","onload","setInterval","_scrollTop","scrollY","setItem","osObj","classArray","defaultOptions","swipeBack","preloadPages","preloadLimit","keyEventBind","backbutton","menubutton","defaultShow","autoShow","aniShow","show","isHomePage","waitingOptions","title","showOptions","windowOptions","scalable","bounce","plusReady","fire","evalJS","receive","triggerPreload","preloaded","timeChecked","openWindow","webviewCache","nShow","nWaiting","webviews","getWebviewById","afterShowMethodName","createNew","Error","waitingConfig","waiting","nativeUI","showWaiting","createWindow","showWebview","close","showed","isCreate","preload","getURL","create","extras","subpage","subpageId","subWebview","append","preloads","first","shift","closeAll","closeOpened","opened","len","openedWebview","open_open","createWindows","option","appendWebview","runtime","appid","statusBarBackground","setStatusBarBackground","display","supportStatusbarOffset","addBack","back","history","beforeback","action","_popover","offCanvas","previewImage","getPreviewImage","isShown","closePopup","__back__first","wobj","canBack","toast","quit","hide","menu","__back","__menu","pullRefreshOptions","pullRefresh","hasPulldown","down","hasPullup","up","container","$container","upOptions","webviewId","downOptions","jsonType","htmlType","rscript","scriptTypeRE","xmlTypeRE","blankRE","ajaxSettings","beforeSend","success","error","complete","xhr","protocol","XMLHttpRequest","accepts","script","json","xml","html","timeout","processData","cache","ajaxBeforeSend","settings","ajaxSuccess","ajaxComplete","ajaxError","status","serialize","traditional","scope","array","hash","serializeData","param","toUpperCase","appendQuery","query","mimeToDataType","mime","parseArguments","dataType","ajax","headers","setHeader","nativeSetHeader","setRequestHeader","abortTimeout","mimeType","overrideMimeType","contentType","onreadystatechange","isLocal","responseText","getResponseHeader","eval","responseXML","statusText","abort","xhrFields","async","open","username","password","send","k","encodeURIComponent","post","getJSON","load","parts","response","div","selectorDiv","childs","originAnchor","crossDomain","net","urlAnchor","host","box","left","getBoundingClientRect","pageYOffset","clientTop","pageXOffset","clientLeft","scroll","distaince","animationFrame","cb","isQueued","initializing","fnTest","xyz","Class","prop","_super","tmp","constructor","callee","CLASS_PULL_TOP_POCKET","CLASS_PULL_BOTTOM_POCKET","CLASS_PULL","CLASS_PULL_LOADING","CLASS_PULL_CAPTION","CLASS_PULL_CAPTION_DOWN","CLASS_PULL_CAPTION_REFRESH","CLASS_PULL_CAPTION_NOMORE","CLASS_ICON","CLASS_SPINNER","CLASS_ICON_PULLDOWN","CLASS_BLOCK","CLASS_HIDDEN","CLASS_VISIBILITY","CLASS_LOADING_UP","CLASS_LOADING_DOWN","CLASS_LOADING","pocketHtml","PullRefresh","scrollX","indicators","contentinit","contentdown","contentover","contentrefresh","auto","contentnomore","_init","_initPocket","_initPulldownRefresh","pulldown","pullPocket","topPocket","pullCaption","topCaption","pullLoading","topLoading","_initPullupRefresh","bottomPocket","bottomCaption","bottomLoading","scroller","_createPocket","insertBefore","firstChild","clazz","iconClass","pocket","_resetPullDownLoading","loading","webkitAnimation","_setCaptionClass","isPulldown","caption","_setCaption","reset","lastTitle","CLASS_SCROLL","CLASS_SCROLLBAR","CLASS_INDICATOR","CLASS_SCROLLBAR_VERTICAL","CLASS_SCROLLBAR_HORIZONTAL","CLASS_ACTIVE","ease","quadratic","circular","outCirc","outCubic","Scroll","scrollerStyle","stopped","startX","hardwareAccelerated","fixedBadAndorid","momentum","snapX","snap","bounceTime","bounceEasing","scrollTime","scrollEasing","directionLockThreshold","parallaxElement","parallaxRatio","translateZ","refresh","_initParallax","_initIndicators","_initEvent","parallaxStyle","parallaxHeight","parallaxImgStyle","indicator","_createScrollBar","listenX","listenY","Indicator","_initSnap","currentPage","pages","snaps","n","leftX","rightX","offsetLeft","offsetWidth","_getSnapX","maxScrollX","min","wrapperWidth","_gotoPage","_nearestSnap","nearestX","detach","segmentedControl","_handleIndicatorScrollend","map","fade","_handleIndicatorScrollstart","_handleIndicatorRefresh","handleEvent","resetPosition","_start","_drag","_flick","_end","transitionTimer","_transitionEnd","_scrollend","_resize","moved","needReset","_transitionTime","isInTransition","pos","setTranslate","reLayout","_getDirectionByAngle","innerHeight","isPreventDefault","isReturn","absDeltaX","absDeltaY","hasHorizontalScroll","hasVerticalScroll","newX","newY","maxScrollY","_updateTranslate","_clearRequestAnimationFrame","time","easing","momentumX","_momentum","destination","momentumY","wrapperHeight","that","resizeTimeout","resizePolling","transitionTime","_transitionTimingFunction","transitionTimingFunction","_translate","lastX","lastY","scrollbar","scrollbarY","scrollbarIndicatorY","scrollbarX","scrollbarIndicatorX","_preventDefaultException","exceptions","_reLayout","scrollerWidth","scrollerHeight","itemLength","current","lowerMargin","wrapperSize","speed","_getTranslateStr","setStopped","parallaxY","updatePosition","paddingLeft","paddingRight","paddingTop","paddingBottom","clientWidth","clientHeight","_reInit","groups","scrollToBottom","gotoPage","destroy","setAttribute","wrapperStyle","indicatorStyle","speedRatioX","speedRatioY","sizeRatioX","sizeRatioY","maxPosX","maxPosY","opacity","indicatorWidth","width","minBoundaryX","maxBoundaryX","indicatorHeight","minBoundaryY","maxBoundaryY","visible","fadeTimeout","delay","scrollApis","scrollApi","_scrollbottom","pullupLoading","pulldownLoading","endPulldownToRefresh","endPullupToRefresh","finished","disablePullupToRefresh","enablePullupToRefresh","pullRefreshApi","autoY","CLASS_SLIDER","CLASS_SLIDER_GROUP","CLASS_SLIDER_LOOP","CLASS_SLIDER_INDICATOR","CLASS_ACTION_PREVIOUS","CLASS_ACTION_NEXT","CLASS_SLIDER_ITEM","SELECTOR_SLIDER_ITEM","SELECTOR_SLIDER_INDICATOR","SELECTOR_SLIDER_PROGRESS_BAR","Slider","interval","slideTime","progressBar","progressBarWidth","progressBarStyle","_initTimer","_triggerSlide","page","slideNumber","_fixedSlideNumber","loop","lastSlideNumber","lastPage","_handleSlide","temps","_slideNumber","indicatorWrap","number","innerText","controlItems","_handleTabShow","gotoItem","tabNumber","_handleIndicatorTap","slidershowTimer","slider","nextItem","_getScroll","_getPage","isFlick","_gotoItem","prevItem","getSlideNumber","sliderElement","CLASS_PLUS_PULLREFRESH","PlusPullRefresh","_initPulldownRefreshEvent","scrollInterval","isScroll","setBounce","changeoffset","setStyle","_endPulldownToRefresh","endPullToRefresh","isLoading","attrWebviewId","CLASS_OFF_CANVAS_LEFT","CLASS_OFF_CANVAS_RIGHT","CLASS_ACTION_BACKDROP","CLASS_OFF_CANVAS_WRAP","CLASS_SLIDE_IN","CLASS_TRANSITIONING","SELECTOR_INNER_WRAP","OffCanvas","dragThresholdX","slideIn","offCanvasLefts","offCanvasRights","offCanvasLeft","offCanvasRight","offCanvasRightWidth","offCanvasLeftWidth","offCanvasLeftSlideIn","offCanvasRightSlideIn","backdrop","offsetX","lastTranslateX","_dispatchEvent","isDragging","offCanvasWidth","getTranslateX","_initOffCanvasVisible","updateTranslate","ratio","openPercentage","visibility","percentage","setTranslateX","leftShowing","rightShowing","zIndex","percent","zoomOutScale","zoomInScale","zoomOutOpacity","zoomInOpacity","shown","directionOrOffCanvas","findOffCanvasContainer","_container","offCanvasApis","offCanvasApi","CLASS_ACTION","CLASS_MODAL","CLASS_POPOVER","CLASS_POPOVER_ARROW","CLASS_ACTION_POPOVER","CLASS_BACKDROP","CLASS_BAR_POPOVER","CLASS_BAR_BACKDROP","CLASS_BOTTOM","fixedPopoverScroll","isPopoverScroll","onPopoverShown","onPopoverHidden","removeBackdrop","removeBackdropTimer","removeChild","togglePopover","anchor","state","isActionSheet","calPosition","wWidth","innerWidth","wHeight","pWidth","pHeight","aWidth","aHeight","arrow","arrowSize","pTop","pLeft","diff","arrowLeft","defaultPadding","createMask","mask","_show","_remove","CLASS_CONTROL_ITEM","CLASS_SEGMENTED_CONTROL","CLASS_SEGMENTED_CONTROL_VERTICAL","CLASS_CONTROL_CONTENT","CLASS_TAB_BAR","CLASS_TAB_ITEM","targetTab","activeTab","activeBodies","targetBody","isLastActive","activeBody","contents","_contents","CLASS_SWITCH","CLASS_SWITCH_HANDLE","CLASS_DRAGGING","CLASS_DISABLED","SELECTOR_SWITCH_HANDLE","Toggle","toggleWidth","handleWidth","handleX","swiperight","webkitTransitionDuration","lastChanged","initialState","isActive","animate","isChanged","switchApis","switchApi","CLASS_SELECTED","CLASS_GRID_VIEW","CLASS_RADIO_VIEW","CLASS_TABLE_VIEW_CELL","CLASS_COLLAPSE_CONTENT","CLASS_TOGGLE","CLASS_BTN","CLASS_SLIDER_HANDLE","CLASS_SLIDER_LEFT","CLASS_SLIDER_RIGHT","SELECTOR_SLIDER_HANDLE","SELECTOR_SLIDER_LEFT","SELECTOR_SLIDER_RIGHT","SELECTOR_SELECTED","SELECTOR_BUTTON","overFactor","cell","progress","isMoved","isOpened","openedActions","sliderHandle","sliderActionLeft","sliderActionRight","buttonsLeft","buttonsRight","sliderDirection","sliderRequestAnimationFrame","translateX","sliderActionLeftWidth","sliderActionRightWidth","toggleActive","pow","buttonRight","_buttonOffset","buttonOffset","buttonLeft","isDisabled","selected","swipeoutClose","link","toggleEvents","dragend","swipeleft","translate","actionsWidth","isToggle","buttons","newTranslate","button","isRemove","method","swipeoutOpen","swipeoutAction","swipeoutWidth","radioOrCheckboxClick","input","checked","isExpand","ul","collapse","alert","message","btnValue","confirm","btnArray","prompt","defaultText","verticalAlign","CLASS_POPUP","CLASS_POPUP_BACKDROP","CLASS_POPUP_IN","CLASS_POPUP_OUT","CLASS_POPUP_INNER","CLASS_POPUP_TITLE","CLASS_POPUP_TEXT","CLASS_POPUP_INPUT","CLASS_POPUP_BUTTONS","CLASS_POPUP_BUTTON","CLASS_POPUP_BUTTON_BOLD","popupStack","createInput","placeholder","createInner","extra","createButtons","btns","createPopup","popupElement","removePopupElement","popup","pop","createAlert","createConfirm","createPrompt","closePopups","CLASS_PROGRESSBAR","CLASS_PROGRESSBAR_IN","CLASS_PROGRESSBAR_OUT","CLASS_PROGRESSBAR_INFINITE","SELECTOR_PROGRESSBAR","_findProgressbar","progressbars","progressbar","showProgressbar","color","_progressbar","setProgressbar","hideProgressbar","span","progressbarApis","progressbarApi","mui_plugin_progressbar","setOptions","setProgress","CLASS_ICON_CLEAR","CLASS_ICON_SPEECH","CLASS_ICON_SEARCH","CLASS_ICON_PASSWORD","CLASS_INPUT_ROW","CLASS_PLACEHOLDER","CLASS_TOOLTIP","SELECTOR_ICON_CLOSE","SELECTOR_ICON_SPEECH","SELECTOR_ICON_PASSWORD","SELECTOR_PLACEHOLDER","SELECTOR_TOOLTIP","findRow","Input","actions","sliderActionClass","sliderActionSelector","clearActionClass","clearActionSelector","speechActionClass","speechActionSelector","searchActionClass","searchActionSelector","passwordActionClass","passwordActionSelector","initAction","initElementEvent","row","sliderAction","createAction","searchAction","speechAction","speechActionClick","clearAction","clearActionClick","passwordAction","passwordActionClick","actionClass","actionSelector","nextSibling","tooltip","showTip","tooltipWidth","distince","scaleWidth","setPlaceholder","oldValue","speech","startRecognize","engine","s","stopRecognize","inputApis","inputApi","rgbaRegex","getColor","colorStr","Transparent","_style","_bgColor","backgroundColor","_R","_G","_B","_A","_bufferFn","destory","mui_plugin_transparent","transparent","transparentApis","transparentApi","touchSupport","tapEventName","changeEventName","holderClassName","plusClassSelector","minusClassSelector","inputClassSelector","Numbox","step","minus","checkValue","getValue","isNaN","setOption","numbox","instanceArray","str","__create_dom_div__","childNodes","panelBuffer","pickerBuffer","PopPicker","panel","ok","rs","getSelectedItems","_createPicker","layer","pickers","pickerElement","nextPickerElement","preItem","setData","disposed","dispose","domBuffer","DtPicker","_picker","ui","h","labels","getSelected","beginMonth","endMonth","_createMonth","_createDay","_createHours","_createMinutes","_create","parsedValue","_parseValue","isLeapYear","year","_inArray","_item","getDayNum","month","_fill","num","_isBeginYear","beginYear","_isBeginMonth","_isBeginDay","beginDay","_isBeginHours","beginHours","_isEndYear","endYear","_isEndMonth","_isEndDay","endDay","_isEndHours","endHours","_createYear","yArray","customData","yBegin","yEnd","mArray","maxMonth","dArray","maxDay","hArray","maxHours","iArray","beginMinutes","maxMinutes","endMinutes","_setLabels","label","_setButtons","getFullYear","getMonth","getDate","getHours","getMinutes","beginDate","valueOf","endDate"],"mappings":"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","file":"mui.all.js","sourcesContent":["/*!\r\n * =====================================================\r\n * Mui v3.2.0 (http://dev.dcloud.net.cn/mui)\r\n * =====================================================\r\n */\r\n/**\r\n * MUI核心JS\r\n * @type _L4.$|Function\r\n */\r\nvar mui = (function(document, undefined) {\r\n\tvar readyRE = /complete|loaded|interactive/;\r\n\tvar idSelectorRE = /^#([\\w-]+)$/;\r\n\tvar classSelectorRE = /^\\.([\\w-]+)$/;\r\n\tvar tagSelectorRE = /^[\\w-]+$/;\r\n\tvar translateRE = /translate(?:3d)?\\((.+?)\\)/;\r\n\tvar translateMatrixRE = /matrix(3d)?\\((.+?)\\)/;\r\n\r\n\tvar $ = function(selector, context) {\r\n\t\tcontext = context || document;\r\n\t\tif (!selector)\r\n\t\t\treturn wrap();\r\n\t\tif (typeof selector === 'object')\r\n\t\t\tif ($.isArrayLike(selector)) {\r\n\t\t\t\treturn wrap($.slice.call(selector), null);\r\n\t\t\t} else {\r\n\t\t\t\treturn wrap([selector], null);\r\n\t\t\t}\r\n\t\tif (typeof selector === 'function')\r\n\t\t\treturn $.ready(selector);\r\n\t\tif (typeof selector === 'string') {\r\n\t\t\ttry {\r\n\t\t\t\tselector = selector.trim();\r\n\t\t\t\tif (idSelectorRE.test(selector)) {\r\n\t\t\t\t\tvar found = document.getElementById(RegExp.$1);\r\n\t\t\t\t\treturn wrap(found ? [found] : []);\r\n\t\t\t\t}\r\n\t\t\t\treturn wrap($.qsa(selector, context), selector);\r\n\t\t\t} catch (e) {}\r\n\t\t}\r\n\t\treturn wrap();\r\n\t};\r\n\r\n\tvar wrap = function(dom, selector) {\r\n\t\tdom = dom || [];\r\n\t\tObject.setPrototypeOf(dom, $.fn);\r\n\t\tdom.selector = selector || '';\r\n\t\treturn dom;\r\n\t};\r\n\r\n\t$.uuid = 0;\r\n\r\n\t$.data = {};\r\n\t/**\r\n\t * extend(simple)\r\n\t * @param {type} target\r\n\t * @param {type} source\r\n\t * @param {type} deep\r\n\t * @returns {unresolved}\r\n\t */\r\n\t$.extend = function() { //from jquery2\r\n\t\tvar options, name, src, copy, copyIsArray, clone,\r\n\t\t\ttarget = arguments[0] || {},\r\n\t\t\ti = 1,\r\n\t\t\tlength = arguments.length,\r\n\t\t\tdeep = false;\r\n\r\n\t\tif (typeof target === \"boolean\") {\r\n\t\t\tdeep = target;\r\n\r\n\t\t\ttarget = arguments[i] || {};\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\tif (typeof target !== \"object\" && !$.isFunction(target)) {\r\n\t\t\ttarget = {};\r\n\t\t}\r\n\r\n\t\tif (i === length) {\r\n\t\t\ttarget = this;\r\n\t\t\ti--;\r\n\t\t}\r\n\r\n\t\tfor (; i < length; i++) {\r\n\t\t\tif ((options = arguments[i]) != null) {\r\n\t\t\t\tfor (name in options) {\r\n\t\t\t\t\tsrc = target[name];\r\n\t\t\t\t\tcopy = options[name];\r\n\r\n\t\t\t\t\tif (target === copy) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (deep && copy && ($.isPlainObject(copy) || (copyIsArray = $.isArray(copy)))) {\r\n\t\t\t\t\t\tif (copyIsArray) {\r\n\t\t\t\t\t\t\tcopyIsArray = false;\r\n\t\t\t\t\t\t\tclone = src && $.isArray(src) ? src : [];\r\n\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tclone = src && $.isPlainObject(src) ? src : {};\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\ttarget[name] = $.extend(deep, clone, copy);\r\n\r\n\t\t\t\t\t} else if (copy !== undefined) {\r\n\t\t\t\t\t\ttarget[name] = copy;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn target;\r\n\t};\r\n\t/**\r\n\t * mui noop(function)\r\n\t */\r\n\t$.noop = function() {};\r\n\t/**\r\n\t * mui slice(array)\r\n\t */\r\n\t$.slice = [].slice;\r\n\t/**\r\n\t * mui filter(array)\r\n\t */\r\n\t$.filter = [].filter;\r\n\r\n\t$.type = function(obj) {\r\n\t\treturn obj == null ? String(obj) : class2type[{}.toString.call(obj)] || \"object\";\r\n\t};\r\n\t/**\r\n\t * mui isArray\r\n\t */\r\n\t$.isArray = Array.isArray ||\r\n\t\tfunction(object) {\r\n\t\t\treturn object instanceof Array;\r\n\t\t};\r\n\t/**\r\n\t * mui isArrayLike \r\n\t * @param {Object} obj\r\n\t */\r\n\t$.isArrayLike = function(obj) {\r\n\t\tvar length = !!obj && \"length\" in obj && obj.length;\r\n\t\tvar type = $.type(obj);\r\n\t\tif (type === \"function\" || $.isWindow(obj)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\treturn type === \"array\" || length === 0 ||\r\n\t\t\ttypeof length === \"number\" && length > 0 && (length - 1) in obj;\r\n\t};\r\n\t/**\r\n\t * mui isWindow(需考虑obj为undefined的情况)\r\n\t */\r\n\t$.isWindow = function(obj) {\r\n\t\treturn obj != null && obj === obj.window;\r\n\t};\r\n\t/**\r\n\t * mui isObject\r\n\t */\r\n\t$.isObject = function(obj) {\r\n\t\treturn $.type(obj) === \"object\";\r\n\t};\r\n\t/**\r\n\t * mui isPlainObject\r\n\t */\r\n\t$.isPlainObject = function(obj) {\r\n\t\treturn $.isObject(obj) && !$.isWindow(obj) && Object.getPrototypeOf(obj) === Object.prototype;\r\n\t};\r\n\t/**\r\n\t * mui isEmptyObject\r\n\t * @param {Object} o\r\n\t */\r\n\t$.isEmptyObject = function(o) {\r\n\t\tfor (var p in o) {\r\n\t\t\tif (p !== undefined) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn true;\r\n\t};\r\n\t/**\r\n\t * mui isFunction\r\n\t */\r\n\t$.isFunction = function(value) {\r\n\t\treturn $.type(value) === \"function\";\r\n\t};\r\n\t/**\r\n\t * mui querySelectorAll\r\n\t * @param {type} selector\r\n\t * @param {type} context\r\n\t * @returns {Array}\r\n\t */\r\n\t$.qsa = function(selector, context) {\r\n\t\tcontext = context || document;\r\n\t\treturn $.slice.call(classSelectorRE.test(selector) ? context.getElementsByClassName(RegExp.$1) : tagSelectorRE.test(selector) ? context.getElementsByTagName(selector) : context.querySelectorAll(selector));\r\n\t};\r\n\t/**\r\n\t * ready(DOMContentLoaded)\r\n\t * @param {type} callback\r\n\t * @returns {_L6.$}\r\n\t */\r\n\t$.ready = function(callback) {\r\n\t\tif (readyRE.test(document.readyState)) {\r\n\t\t\tcallback($);\r\n\t\t} else {\r\n\t\t\tdocument.addEventListener('DOMContentLoaded', function() {\r\n\t\t\t\tcallback($);\r\n\t\t\t}, false);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\t/**\r\n\t * 将 fn 缓存一段时间后, 再被调用执行\r\n\t * 此方法为了避免在 ms 段时间内, 执行 fn 多次. 常用于 resize , scroll , mousemove 等连续性事件中;\r\n\t * 当 ms 设置为 -1, 表示立即执行 fn, 即和直接调用 fn 一样;\r\n\t * 调用返回函数的 stop 停止最后一次的 buffer 效果\r\n\t * @param {Object} fn\r\n\t * @param {Object} ms\r\n\t * @param {Object} context\r\n\t */\r\n\t$.buffer = function(fn, ms, context) {\r\n\t\tvar timer;\r\n\t\tvar lastStart = 0;\r\n\t\tvar lastEnd = 0;\r\n\t\tvar ms = ms || 150;\r\n\r\n\t\tfunction run() {\r\n\t\t\tif (timer) {\r\n\t\t\t\ttimer.cancel();\r\n\t\t\t\ttimer = 0;\r\n\t\t\t}\r\n\t\t\tlastStart = $.now();\r\n\t\t\tfn.apply(context || this, arguments);\r\n\t\t\tlastEnd = $.now();\r\n\t\t}\r\n\r\n\t\treturn $.extend(function() {\r\n\t\t\tif (\r\n\t\t\t\t(!lastStart) || // 从未运行过\r\n\t\t\t\t(lastEnd >= lastStart && $.now() - lastEnd > ms) || // 上次运行成功后已经超过ms毫秒\r\n\t\t\t\t(lastEnd < lastStart && $.now() - lastStart > ms * 8) // 上次运行或未完成，后8*ms毫秒\r\n\t\t\t) {\r\n\t\t\t\trun();\r\n\t\t\t} else {\r\n\t\t\t\tif (timer) {\r\n\t\t\t\t\ttimer.cancel();\r\n\t\t\t\t}\r\n\t\t\t\ttimer = $.later(run, ms, null, arguments);\r\n\t\t\t}\r\n\t\t}, {\r\n\t\t\tstop: function() {\r\n\t\t\t\tif (timer) {\r\n\t\t\t\t\ttimer.cancel();\r\n\t\t\t\t\ttimer = 0;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t/**\r\n\t * each\r\n\t * @param {type} elements\r\n\t * @param {type} callback\r\n\t * @returns {_L8.$}\r\n\t */\r\n\t$.each = function(elements, callback, hasOwnProperty) {\r\n\t\tif (!elements) {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\tif (typeof elements.length === 'number') {\r\n\t\t\t[].every.call(elements, function(el, idx) {\r\n\t\t\t\treturn callback.call(el, idx, el) !== false;\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tfor (var key in elements) {\r\n\t\t\t\tif (hasOwnProperty) {\r\n\t\t\t\t\tif (elements.hasOwnProperty(key)) {\r\n\t\t\t\t\t\tif (callback.call(elements[key], key, elements[key]) === false) return elements;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (callback.call(elements[key], key, elements[key]) === false) return elements;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\t$.focus = function(element) {\r\n\t\tif ($.os.ios) {\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\telement.focus();\r\n\t\t\t}, 10);\r\n\t\t} else {\r\n\t\t\telement.focus();\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * trigger event\r\n\t * @param {type} element\r\n\t * @param {type} eventType\r\n\t * @param {type} eventData\r\n\t * @returns {_L8.$}\r\n\t */\r\n\t$.trigger = function(element, eventType, eventData) {\r\n\t\telement.dispatchEvent(new CustomEvent(eventType, {\r\n\t\t\tdetail: eventData,\r\n\t\t\tbubbles: true,\r\n\t\t\tcancelable: true\r\n\t\t}));\r\n\t\treturn this;\r\n\t};\r\n\t/**\r\n\t * getStyles\r\n\t * @param {type} element\r\n\t * @param {type} property\r\n\t * @returns {styles}\r\n\t */\r\n\t$.getStyles = function(element, property) {\r\n\t\tvar styles = element.ownerDocument.defaultView.getComputedStyle(element, null);\r\n\t\tif (property) {\r\n\t\t\treturn styles.getPropertyValue(property) || styles[property];\r\n\t\t}\r\n\t\treturn styles;\r\n\t};\r\n\t/**\r\n\t * parseTranslate\r\n\t * @param {type} translateString\r\n\t * @param {type} position\r\n\t * @returns {Object}\r\n\t */\r\n\t$.parseTranslate = function(translateString, position) {\r\n\t\tvar result = translateString.match(translateRE || '');\r\n\t\tif (!result || !result[1]) {\r\n\t\t\tresult = ['', '0,0,0'];\r\n\t\t}\r\n\t\tresult = result[1].split(\",\");\r\n\t\tresult = {\r\n\t\t\tx: parseFloat(result[0]),\r\n\t\t\ty: parseFloat(result[1]),\r\n\t\t\tz: parseFloat(result[2])\r\n\t\t};\r\n\t\tif (position && result.hasOwnProperty(position)) {\r\n\t\t\treturn result[position];\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n\t/**\r\n\t * parseTranslateMatrix\r\n\t * @param {type} translateString\r\n\t * @param {type} position\r\n\t * @returns {Object}\r\n\t */\r\n\t$.parseTranslateMatrix = function(translateString, position) {\r\n\t\tvar matrix = translateString.match(translateMatrixRE);\r\n\t\tvar is3D = matrix && matrix[1];\r\n\t\tif (matrix) {\r\n\t\t\tmatrix = matrix[2].split(\",\");\r\n\t\t\tif (is3D === \"3d\")\r\n\t\t\t\tmatrix = matrix.slice(12, 15);\r\n\t\t\telse {\r\n\t\t\t\tmatrix.push(0);\r\n\t\t\t\tmatrix = matrix.slice(4, 7);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tmatrix = [0, 0, 0];\r\n\t\t}\r\n\t\tvar result = {\r\n\t\t\tx: parseFloat(matrix[0]),\r\n\t\t\ty: parseFloat(matrix[1]),\r\n\t\t\tz: parseFloat(matrix[2])\r\n\t\t};\r\n\t\tif (position && result.hasOwnProperty(position)) {\r\n\t\t\treturn result[position];\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n\t$.hooks = {};\r\n\t$.addAction = function(type, hook) {\r\n\t\tvar hooks = $.hooks[type];\r\n\t\tif (!hooks) {\r\n\t\t\thooks = [];\r\n\t\t}\r\n\t\thook.index = hook.index || 1000;\r\n\t\thooks.push(hook);\r\n\t\thooks.sort(function(a, b) {\r\n\t\t\treturn a.index - b.index;\r\n\t\t});\r\n\t\t$.hooks[type] = hooks;\r\n\t\treturn $.hooks[type];\r\n\t};\r\n\t$.doAction = function(type, callback) {\r\n\t\tif ($.isFunction(callback)) { //指定了callback\r\n\t\t\t$.each($.hooks[type], callback);\r\n\t\t} else { //未指定callback，直接执行\r\n\t\t\t$.each($.hooks[type], function(index, hook) {\r\n\t\t\t\treturn !hook.handle();\r\n\t\t\t});\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * setTimeout封装\r\n\t * @param {Object} fn\r\n\t * @param {Object} when\r\n\t * @param {Object} context\r\n\t * @param {Object} data\r\n\t */\r\n\t$.later = function(fn, when, context, data) {\r\n\t\twhen = when || 0;\r\n\t\tvar m = fn;\r\n\t\tvar d = data;\r\n\t\tvar f;\r\n\t\tvar r;\r\n\r\n\t\tif (typeof fn === 'string') {\r\n\t\t\tm = context[fn];\r\n\t\t}\r\n\r\n\t\tf = function() {\r\n\t\t\tm.apply(context, $.isArray(d) ? d : [d]);\r\n\t\t};\r\n\r\n\t\tr = setTimeout(f, when);\r\n\r\n\t\treturn {\r\n\t\t\tid: r,\r\n\t\t\tcancel: function() {\r\n\t\t\t\tclearTimeout(r);\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\t$.now = Date.now || function() {\r\n\t\treturn +new Date();\r\n\t};\r\n\tvar class2type = {};\r\n\t$.each(['Boolean', 'Number', 'String', 'Function', 'Array', 'Date', 'RegExp', 'Object', 'Error'], function(i, name) {\r\n\t\tclass2type[\"[object \" + name + \"]\"] = name.toLowerCase();\r\n\t});\r\n\r\n\r\n\r\n\r\n\r\n    var MAX_EXCEED = 30;\r\n    var VISIBLE_RANGE = 90;\r\n    var DEFAULT_ITEM_HEIGHT = 40;\r\n    var BLUR_WIDTH = 10;\r\n\r\n    var rad2deg = $.rad2deg = function(rad) {\r\n        return rad / (Math.PI / 180);\r\n    };\r\n\r\n    var deg2rad = $.deg2rad = function(deg) {\r\n        return deg * (Math.PI / 180);\r\n    };\r\n\r\n    var platform = navigator.platform.toLowerCase();\r\n    var userAgent = navigator.userAgent.toLowerCase();\r\n    var isIos = (userAgent.indexOf('iphone') > -1 ||\r\n        userAgent.indexOf('ipad') > -1 ||\r\n        userAgent.indexOf('ipod') > -1) &&\r\n        (platform.indexOf('iphone') > -1 ||\r\n        platform.indexOf('ipad') > -1 ||\r\n        platform.indexOf('ipod') > -1);\r\n    //alert(isIos);\r\n\r\n    var Picker = $.Picker = function(holder, options) {\r\n        var self = this;\r\n        self.holder = holder;\r\n        self.options = options || {};\r\n        self.init();\r\n        self.initInertiaParams();\r\n        self.calcElementItemPostion(true);\r\n        self.bindEvent();\r\n    };\r\n\r\n    Picker.prototype.findElementItems = function() {\r\n        var self = this;\r\n        self.elementItems = [].slice.call(self.holder.querySelectorAll('li'));\r\n        return self.elementItems;\r\n    };\r\n\r\n    Picker.prototype.init = function() {\r\n        var self = this;\r\n        self.list = self.holder.querySelector('ul');\r\n        self.findElementItems();\r\n        self.height = self.holder.offsetHeight;\r\n        self.r = self.height / 2 - BLUR_WIDTH;\r\n        self.d = self.r * 2;\r\n        self.itemHeight = self.elementItems.length > 0 ? self.elementItems[0].offsetHeight : DEFAULT_ITEM_HEIGHT;\r\n        self.itemAngle = parseInt(self.calcAngle(self.itemHeight * 0.8));\r\n        self.hightlightRange = self.itemAngle / 2;\r\n        self.visibleRange = VISIBLE_RANGE;\r\n        self.beginAngle = 0;\r\n        self.beginExceed = self.beginAngle - MAX_EXCEED;\r\n        self.list.angle = self.beginAngle;\r\n        if (isIos) {\r\n            self.list.style.webkitTransformOrigin = \"center center \" + self.r + \"px\";\r\n        }\r\n    };\r\n\r\n    Picker.prototype.calcElementItemPostion = function(andGenerateItms) {\r\n        var self = this;\r\n        if (andGenerateItms) {\r\n            self.items = [];\r\n        }\r\n        self.elementItems.forEach(function(item) {\r\n            var index = self.elementItems.indexOf(item);\r\n            self.endAngle = self.itemAngle * index;\r\n            item.angle = self.endAngle;\r\n            item.style.webkitTransformOrigin = \"center center -\" + self.r + \"px\";\r\n            item.style.webkitTransform = \"translateZ(\" + self.r + \"px) rotateX(\" + (-self.endAngle) + \"deg)\";\r\n            if (andGenerateItms) {\r\n                var dataItem = {};\r\n                dataItem.text = item.innerHTML || '';\r\n                dataItem.value = item.getAttribute('data-value') || dataItem.text;\r\n                self.items.push(dataItem);\r\n            }\r\n        });\r\n        self.endExceed = self.endAngle + MAX_EXCEED;\r\n        self.calcElementItemVisibility(self.beginAngle);\r\n    };\r\n\r\n    Picker.prototype.calcAngle = function(c) {\r\n        var self = this;\r\n        var a = b = parseFloat(self.r);\r\n        //直径的整倍数部分直接乘以 180\r\n        c = Math.abs(c); //只算角度不关心正否值\r\n        var intDeg = parseInt(c / self.d) * 180;\r\n        c = c % self.d;\r\n        //余弦\r\n        var cosC = (a * a + b * b - c * c) / (2 * a * b);\r\n        var angleC = intDeg + rad2deg(Math.acos(cosC));\r\n        return angleC;\r\n    };\r\n\r\n    Picker.prototype.calcElementItemVisibility = function(angle) {\r\n        var self = this;\r\n        self.elementItems.forEach(function(item) {\r\n            var difference = Math.abs(item.angle - angle);\r\n            if (difference < self.hightlightRange) {\r\n                item.classList.add('highlight');\r\n            } else if (difference < self.visibleRange) {\r\n                item.classList.add('visible');\r\n                item.classList.remove('highlight');\r\n            } else {\r\n                item.classList.remove('highlight');\r\n                item.classList.remove('visible');\r\n            }\r\n        });\r\n    };\r\n\r\n    Picker.prototype.setAngle = function(angle) {\r\n        var self = this;\r\n        self.list.angle = angle;\r\n        self.list.style.webkitTransform = \"perspective(1000px) rotateY(0deg) rotateX(\" + angle + \"deg)\";\r\n        self.calcElementItemVisibility(angle);\r\n    };\r\n\r\n    Picker.prototype.bindEvent = function() {\r\n        var self = this;\r\n        var lastAngle = 0;\r\n        var startY = null;\r\n        var isPicking = false;\r\n        self.holder.addEventListener($.EVENT_START, function(event) {\r\n            isPicking = true;\r\n            event.preventDefault();\r\n            self.list.style.webkitTransition = '';\r\n            startY = (event.changedTouches ? event.changedTouches[0] : event).pageY;\r\n            lastAngle = self.list.angle;\r\n            self.updateInertiaParams(event, true);\r\n        }, false);\r\n        self.holder.addEventListener($.EVENT_END, function(event) {\r\n            isPicking = false;\r\n            event.preventDefault();\r\n            self.startInertiaScroll(event);\r\n        }, false);\r\n        self.holder.addEventListener($.EVENT_CANCEL, function(event) {\r\n            isPicking = false;\r\n            event.preventDefault();\r\n            self.startInertiaScroll(event);\r\n        }, false);\r\n        self.holder.addEventListener($.EVENT_MOVE, function(event) {\r\n            if (!isPicking) {\r\n                return;\r\n            }\r\n            event.preventDefault();\r\n            var endY = (event.changedTouches ? event.changedTouches[0] : event).pageY;\r\n            var dragRange = endY - startY;\r\n            var dragAngle = self.calcAngle(dragRange);\r\n            var newAngle = dragRange > 0 ? lastAngle - dragAngle : lastAngle + dragAngle;\r\n            if (newAngle > self.endExceed) {\r\n                newAngle = self.endExceed\r\n            }\r\n            if (newAngle < self.beginExceed) {\r\n                newAngle = self.beginExceed\r\n            }\r\n            self.setAngle(newAngle);\r\n            self.updateInertiaParams(event);\r\n        }, false);\r\n        //--\r\n        self.list.addEventListener('tap', function(event) {\r\n            elementItem = event.target;\r\n            if (elementItem.tagName == 'LI') {\r\n                self.setSelectedIndex(self.elementItems.indexOf(elementItem), 200);\r\n            }\r\n        }, false);\r\n    };\r\n\r\n    Picker.prototype.initInertiaParams = function() {\r\n        var self = this;\r\n        self.lastMoveTime = 0;\r\n        self.lastMoveStart = 0;\r\n        self.stopInertiaMove = false;\r\n    };\r\n\r\n    Picker.prototype.updateInertiaParams = function(event, isStart) {\r\n        var self = this;\r\n        var point = event.changedTouches ? event.changedTouches[0] : event;\r\n        if (isStart) {\r\n            self.lastMoveStart = point.pageY;\r\n            self.lastMoveTime = event.timeStamp || Date.now();\r\n            self.startAngle = self.list.angle;\r\n        } else {\r\n            var nowTime = event.timeStamp || Date.now();\r\n            if (nowTime - self.lastMoveTime > 300) {\r\n                self.lastMoveTime = nowTime;\r\n                self.lastMoveStart = point.pageY;\r\n            }\r\n        }\r\n        self.stopInertiaMove = true;\r\n    };\r\n\r\n    Picker.prototype.startInertiaScroll = function(event) {\r\n        var self = this;\r\n        var point = event.changedTouches ? event.changedTouches[0] : event;\r\n        /**\r\n         * 缓动代码\r\n         */\r\n        var nowTime = event.timeStamp || Date.now();\r\n        var v = (point.pageY - self.lastMoveStart) / (nowTime - self.lastMoveTime); //最后一段时间手指划动速度\r\n        var dir = v > 0 ? -1 : 1; //加速度方向\r\n        var deceleration = dir * 0.0006 * -1;\r\n        var duration = Math.abs(v / deceleration); // 速度消减至0所需时间\r\n        var dist = v * duration / 2; //最终移动多少\r\n        var startAngle = self.list.angle;\r\n        var distAngle = self.calcAngle(dist) * dir;\r\n        //----\r\n        var srcDistAngle = distAngle;\r\n        if (startAngle + distAngle < self.beginExceed) {\r\n            distAngle = self.beginExceed - startAngle;\r\n            duration = duration * (distAngle / srcDistAngle) * 0.6;\r\n        }\r\n        if (startAngle + distAngle > self.endExceed) {\r\n            distAngle = self.endExceed - startAngle;\r\n            duration = duration * (distAngle / srcDistAngle) * 0.6;\r\n        }\r\n        //----\r\n        if (distAngle == 0) {\r\n            self.endScroll();\r\n            return;\r\n        }\r\n        self.scrollDistAngle(nowTime, startAngle, distAngle, duration);\r\n    };\r\n\r\n    Picker.prototype.scrollDistAngle = function(nowTime, startAngle, distAngle, duration) {\r\n        var self = this;\r\n        self.stopInertiaMove = false;\r\n        (function(nowTime, startAngle, distAngle, duration) {\r\n            var frameInterval = 13;\r\n            var stepCount = duration / frameInterval;\r\n            var stepIndex = 0;\r\n            (function inertiaMove() {\r\n                if (self.stopInertiaMove) return;\r\n                var newAngle = self.quartEaseOut(stepIndex, startAngle, distAngle, stepCount);\r\n                self.setAngle(newAngle);\r\n                stepIndex++;\r\n                if (stepIndex > stepCount - 1 || newAngle < self.beginExceed || newAngle > self.endExceed) {\r\n                    self.endScroll();\r\n                    return;\r\n                }\r\n                setTimeout(inertiaMove, frameInterval);\r\n            })();\r\n        })(nowTime, startAngle, distAngle, duration);\r\n    };\r\n\r\n    Picker.prototype.quartEaseOut = function(t, b, c, d) {\r\n        return -c * ((t = t / d - 1) * t * t * t - 1) + b;\r\n    };\r\n\r\n    Picker.prototype.endScroll = function() {\r\n        var self = this;\r\n        if (self.list.angle < self.beginAngle) {\r\n            self.list.style.webkitTransition = \"150ms ease-out\";\r\n            self.setAngle(self.beginAngle);\r\n        } else if (self.list.angle > self.endAngle) {\r\n            self.list.style.webkitTransition = \"150ms ease-out\";\r\n            self.setAngle(self.endAngle);\r\n        } else {\r\n            var index = parseInt((self.list.angle / self.itemAngle).toFixed(0));\r\n            self.list.style.webkitTransition = \"100ms ease-out\";\r\n            self.setAngle(self.itemAngle * index);\r\n        }\r\n        self.triggerChange();\r\n    };\r\n\r\n    Picker.prototype.triggerChange = function(force) {\r\n        var self = this;\r\n        setTimeout(function() {\r\n            var index = self.getSelectedIndex();\r\n            var item = self.items[index];\r\n            if ($.trigger && (index != self.lastIndex || force === true)) {\r\n                $.trigger(self.holder, 'change', {\r\n                    \"index\": index,\r\n                    \"item\": item\r\n                });\r\n                //console.log('change:' + index);\r\n            }\r\n            self.lastIndex = index;\r\n            typeof force === 'function' && force();\r\n        }, 0);\r\n    };\r\n\r\n    Picker.prototype.correctAngle = function(angle) {\r\n        var self = this;\r\n        if (angle < self.beginAngle) {\r\n            return self.beginAngle;\r\n        } else if (angle > self.endAngle) {\r\n            return self.endAngle;\r\n        } else {\r\n            return angle;\r\n        }\r\n    };\r\n\r\n    Picker.prototype.setItems = function(items) {\r\n        var self = this;\r\n        self.items = items || [];\r\n        var buffer = [];\r\n        self.items.forEach(function(item) {\r\n            if (item !== null && item !== undefined) {\r\n                buffer.push('<li>' + (item.text || item) + '</li>');\r\n            }\r\n        });\r\n        self.list.innerHTML = buffer.join('');\r\n        self.findElementItems();\r\n        self.calcElementItemPostion();\r\n        self.setAngle(self.correctAngle(self.list.angle));\r\n        self.triggerChange(true);\r\n    };\r\n\r\n    Picker.prototype.getItems = function() {\r\n        var self = this;\r\n        return self.items;\r\n    };\r\n\r\n    Picker.prototype.getSelectedIndex = function() {\r\n        var self = this;\r\n        return parseInt((self.list.angle / self.itemAngle).toFixed(0));\r\n    };\r\n\r\n    Picker.prototype.setSelectedIndex = function(index, duration, callback) {\r\n        var self = this;\r\n        self.list.style.webkitTransition = '';\r\n        var angle = self.correctAngle(self.itemAngle * index);\r\n        if (duration && duration > 0) {\r\n            var distAngle = angle - self.list.angle;\r\n            self.scrollDistAngle(Date.now(), self.list.angle, distAngle, duration);\r\n        } else {\r\n            self.setAngle(angle);\r\n        }\r\n        self.triggerChange(callback);\r\n    };\r\n\r\n    Picker.prototype.getSelectedItem = function() {\r\n        var self = this;\r\n        return self.items[self.getSelectedIndex()];\r\n    };\r\n\r\n    Picker.prototype.getSelectedValue = function() {\r\n        var self = this;\r\n        return (self.items[self.getSelectedIndex()] || {}).value;\r\n    };\r\n\r\n    Picker.prototype.getSelectedText = function() {\r\n        var self = this;\r\n        return (self.items[self.getSelectedIndex()] || {}).text;\r\n    };\r\n\r\n    Picker.prototype.setSelectedValue = function(value, duration, callback) {\r\n        var self = this;\r\n        for (var index in self.items) {\r\n            var item = self.items[index];\r\n            if (item.value == value) {\r\n                self.setSelectedIndex(index, duration, callback);\r\n                return;\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tif (window.JSON) {\r\n\t\t$.parseJSON = JSON.parse;\r\n\t}\r\n\t/**\r\n\t * $.fn\r\n\t */\r\n\t$.fn = {\r\n\t\teach: function(callback) {\r\n\t\t\t[].every.call(this, function(el, idx) {\r\n\t\t\t\treturn callback.call(el, idx, el) !== false;\r\n\t\t\t});\r\n\t\t\treturn this;\r\n\t\t}\r\n\t};\r\n\r\n    $.fn.picker = function(options) {\r\n        //遍历选择的元素\r\n        this.each(function(i, element) {\r\n            if (element.picker) return;\r\n            if (options) {\r\n                element.picker = new Picker(element, options);\r\n            } else {\r\n                var optionsText = element.getAttribute('data-picker-options');\r\n                var _options = optionsText ? JSON.parse(optionsText) : {};\r\n                element.picker = new Picker(element, _options);\r\n            }\r\n        });\r\n        return this[0] ? this[0].picker : null;\r\n    };\r\n\r\n    //自动初始化\r\n    $.ready(function() {\r\n        $('.mui-picker').picker();\r\n    });\r\n\r\n\r\n\t/**\r\n\t * 兼容 AMD 模块\r\n\t **/\r\n\tif (typeof define === 'function' && define.amd) {\r\n\t\tdefine('mui', [], function() {\r\n\t\t\treturn $;\r\n\t\t});\r\n\t}\r\n\r\n\treturn $;\r\n})(document);\r\n//window.mui = mui;\r\n//'$' in window || (window.$ = mui);\r\n/**\r\n * $.os\r\n * @param {type} $\r\n * @returns {undefined}\r\n */\r\n(function($, window) {\r\n\tfunction detect(ua) {\r\n\t\tthis.os = {};\r\n\t\tvar funcs = [\r\n\r\n\t\t\tfunction() { //wechat\r\n\t\t\t\tvar wechat = ua.match(/(MicroMessenger)\\/([\\d\\.]+)/i);\r\n\t\t\t\tif (wechat) { //wechat\r\n\t\t\t\t\tthis.os.wechat = {\r\n\t\t\t\t\t\tversion: wechat[2].replace(/_/g, '.')\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\treturn false;\r\n\t\t\t},\r\n\t\t\tfunction() { //android\r\n\t\t\t\tvar android = ua.match(/(Android);?[\\s\\/]+([\\d.]+)?/);\r\n\t\t\t\tif (android) {\r\n\t\t\t\t\tthis.os.android = true;\r\n\t\t\t\t\tthis.os.version = android[2];\r\n\r\n\t\t\t\t\tthis.os.isBadAndroid = !(/Chrome\\/\\d/.test(window.navigator.appVersion));\r\n\t\t\t\t}\r\n\t\t\t\treturn this.os.android === true;\r\n\t\t\t},\r\n\t\t\tfunction() { //ios\r\n\t\t\t\tvar iphone = ua.match(/(iPhone\\sOS)\\s([\\d_]+)/);\r\n\t\t\t\tif (iphone) { //iphone\r\n\t\t\t\t\tthis.os.ios = this.os.iphone = true;\r\n\t\t\t\t\tthis.os.version = iphone[2].replace(/_/g, '.');\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar ipad = ua.match(/(iPad).*OS\\s([\\d_]+)/);\r\n\t\t\t\t\tif (ipad) { //ipad\r\n\t\t\t\t\t\tthis.os.ios = this.os.ipad = true;\r\n\t\t\t\t\t\tthis.os.version = ipad[2].replace(/_/g, '.');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn this.os.ios === true;\r\n\t\t\t}\r\n\t\t];\r\n\t\t[].every.call(funcs, function(func) {\r\n\t\t\treturn !func.call($);\r\n\t\t});\r\n\t}\r\n\tdetect.call($, navigator.userAgent);\r\n})(mui, window);\r\n/**\r\n * $.os.plus\r\n * @param {type} $\r\n * @returns {undefined}\r\n */\r\n(function($, document) {\r\n\tfunction detect(ua) {\r\n\t\tthis.os = this.os || {};\r\n\t\tvar plus = ua.match(/Html5Plus/i); //TODO 5\\+Browser?\r\n\t\tif (plus) {\r\n\t\t\tthis.os.plus = true;\r\n\t\t\t$(function() {\r\n\t\t\t\tdocument.body.classList.add('mui-plus');\r\n\t\t\t});\r\n\t\t\tif (ua.match(/StreamApp/i)) { //TODO 最好有流应用自己的标识\r\n\t\t\t\tthis.os.stream = true;\r\n\t\t\t\t$(function() {\r\n\t\t\t\t\tdocument.body.classList.add('mui-plus-stream');\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tdetect.call($, navigator.userAgent);\r\n})(mui, document);\r\n/**\r\n * 仅提供简单的on，off(仅支持事件委托，不支持当前元素绑定，当前元素绑定请直接使用addEventListener,removeEventListener)\r\n * @param {Object} $\r\n */\r\n(function($) {\r\n\tif ('ontouchstart' in window) {\r\n\t\t$.isTouchable = true;\r\n\t\t$.EVENT_START = 'touchstart';\r\n\t\t$.EVENT_MOVE = 'touchmove';\r\n\t\t$.EVENT_END = 'touchend';\r\n\t} else {\r\n\t\t$.isTouchable = false;\r\n\t\t$.EVENT_START = 'mousedown';\r\n\t\t$.EVENT_MOVE = 'mousemove';\r\n\t\t$.EVENT_END = 'mouseup';\r\n\t}\r\n\t$.EVENT_CANCEL = 'touchcancel';\r\n\t$.EVENT_CLICK = 'click';\r\n\r\n\tvar _mid = 1;\r\n\tvar delegates = {};\r\n\t//需要wrap的函数\r\n\tvar eventMethods = {\r\n\t\tpreventDefault: 'isDefaultPrevented',\r\n\t\tstopImmediatePropagation: 'isImmediatePropagationStopped',\r\n\t\tstopPropagation: 'isPropagationStopped'\r\n\t};\r\n\t//默认true返回函数\r\n\tvar returnTrue = function() {\r\n\t\treturn true\r\n\t};\r\n\t//默认false返回函数\r\n\tvar returnFalse = function() {\r\n\t\treturn false\r\n\t};\r\n\t//wrap浏览器事件\r\n\tvar compatible = function(event, target) {\r\n\t\tif (!event.detail) {\r\n\t\t\tevent.detail = {\r\n\t\t\t\tcurrentTarget: target\r\n\t\t\t};\r\n\t\t} else {\r\n\t\t\tevent.detail.currentTarget = target;\r\n\t\t}\r\n\t\t$.each(eventMethods, function(name, predicate) {\r\n\t\t\tvar sourceMethod = event[name];\r\n\t\t\tevent[name] = function() {\r\n\t\t\t\tthis[predicate] = returnTrue;\r\n\t\t\t\treturn sourceMethod && sourceMethod.apply(event, arguments)\r\n\t\t\t}\r\n\t\t\tevent[predicate] = returnFalse;\r\n\t\t}, true);\r\n\t\treturn event;\r\n\t};\r\n\t//简单的wrap对象_mid\r\n\tvar mid = function(obj) {\r\n\t\treturn obj && (obj._mid || (obj._mid = _mid++));\r\n\t};\r\n\t//事件委托对象绑定的事件回调列表\r\n\tvar delegateFns = {};\r\n\t//返回事件委托的wrap事件回调\r\n\tvar delegateFn = function(element, event, selector, callback) {\r\n\t\treturn function(e) {\r\n\t\t\t//same event\r\n\t\t\tvar callbackObjs = delegates[element._mid][event];\r\n\t\t\tvar handlerQueue = [];\r\n\t\t\tvar target = e.target;\r\n\t\t\tvar selectorAlls = {};\r\n\t\t\tfor (; target && target !== document; target = target.parentNode) {\r\n\t\t\t\tif (target === element) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (~['click', 'tap', 'doubletap', 'longtap', 'hold'].indexOf(event) && (target.disabled || target.classList.contains('mui-disabled'))) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tvar matches = {};\r\n\t\t\t\t$.each(callbackObjs, function(selector, callbacks) { //same selector\r\n\t\t\t\t\tselectorAlls[selector] || (selectorAlls[selector] = $.qsa(selector, element));\r\n\t\t\t\t\tif (selectorAlls[selector] && ~(selectorAlls[selector]).indexOf(target)) {\r\n\t\t\t\t\t\tif (!matches[selector]) {\r\n\t\t\t\t\t\t\tmatches[selector] = callbacks;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, true);\r\n\t\t\t\tif (!$.isEmptyObject(matches)) {\r\n\t\t\t\t\thandlerQueue.push({\r\n\t\t\t\t\t\telement: target,\r\n\t\t\t\t\t\thandlers: matches\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tselectorAlls = null;\r\n\t\t\te = compatible(e); //compatible event\r\n\t\t\t$.each(handlerQueue, function(index, handler) {\r\n\t\t\t\ttarget = handler.element;\r\n\t\t\t\tvar tagName = target.tagName;\r\n\t\t\t\tif (event === 'tap' && (tagName !== 'INPUT' && tagName !== 'TEXTAREA' && tagName !== 'SELECT')) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.detail && e.detail.gesture && e.detail.gesture.preventDefault();\r\n\t\t\t\t}\r\n\t\t\t\t$.each(handler.handlers, function(index, handler) {\r\n\t\t\t\t\t$.each(handler, function(index, callback) {\r\n\t\t\t\t\t\tif (callback.call(target, e) === false) {\r\n\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, true);\r\n\t\t\t\t}, true)\r\n\t\t\t\tif (e.isPropagationStopped()) {\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t}, true);\r\n\t\t};\r\n\t};\r\n\tvar findDelegateFn = function(element, event) {\r\n\t\tvar delegateCallbacks = delegateFns[mid(element)];\r\n\t\tvar result = [];\r\n\t\tif (delegateCallbacks) {\r\n\t\t\tresult = [];\r\n\t\t\tif (event) {\r\n\t\t\t\tvar filterFn = function(fn) {\r\n\t\t\t\t\treturn fn.type === event;\r\n\t\t\t\t}\r\n\t\t\t\treturn delegateCallbacks.filter(filterFn);\r\n\t\t\t} else {\r\n\t\t\t\tresult = delegateCallbacks;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn result;\r\n\t};\r\n\tvar preventDefaultException = /^(INPUT|TEXTAREA|BUTTON|SELECT)$/;\r\n\t/**\r\n\t * mui delegate events\r\n\t * @param {type} event\r\n\t * @param {type} selector\r\n\t * @param {type} callback\r\n\t * @returns {undefined}\r\n\t */\r\n\t$.fn.on = function(event, selector, callback) { //仅支持简单的事件委托,主要是tap事件使用，类似mouse,focus之类暂不封装支持\r\n\t\treturn this.each(function() {\r\n\t\t\tvar element = this;\r\n\t\t\tmid(element);\r\n\t\t\tmid(callback);\r\n\t\t\tvar isAddEventListener = false;\r\n\t\t\tvar delegateEvents = delegates[element._mid] || (delegates[element._mid] = {});\r\n\t\t\tvar delegateCallbackObjs = delegateEvents[event] || ((delegateEvents[event] = {}));\r\n\t\t\tif ($.isEmptyObject(delegateCallbackObjs)) {\r\n\t\t\t\tisAddEventListener = true;\r\n\t\t\t}\r\n\t\t\tvar delegateCallbacks = delegateCallbackObjs[selector] || (delegateCallbackObjs[selector] = []);\r\n\t\t\tdelegateCallbacks.push(callback);\r\n\t\t\tif (isAddEventListener) {\r\n\t\t\t\tvar delegateFnArray = delegateFns[mid(element)];\r\n\t\t\t\tif (!delegateFnArray) {\r\n\t\t\t\t\tdelegateFnArray = [];\r\n\t\t\t\t}\r\n\t\t\t\tvar delegateCallback = delegateFn(element, event, selector, callback);\r\n\t\t\t\tdelegateFnArray.push(delegateCallback);\r\n\t\t\t\tdelegateCallback.i = delegateFnArray.length - 1;\r\n\t\t\t\tdelegateCallback.type = event;\r\n\t\t\t\tdelegateFns[mid(element)] = delegateFnArray;\r\n\t\t\t\telement.addEventListener(event, delegateCallback);\r\n\t\t\t\tif (event === 'tap') { //TODO 需要找个更好的解决方案\r\n\t\t\t\t\telement.addEventListener('click', function(e) {\r\n\t\t\t\t\t\tif (e.target) {\r\n\t\t\t\t\t\t\tvar tagName = e.target.tagName;\r\n\t\t\t\t\t\t\tif (!preventDefaultException.test(tagName)) {\r\n\t\t\t\t\t\t\t\tif (tagName === 'A') {\r\n\t\t\t\t\t\t\t\t\tvar href = e.target.href;\r\n\t\t\t\t\t\t\t\t\tif (!(href && ~href.indexOf('tel:'))) {\r\n\t\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t$.fn.off = function(event, selector, callback) {\r\n\t\treturn this.each(function() {\r\n\t\t\tvar _mid = mid(this);\r\n\t\t\tif (!event) { //mui(selector).off();\r\n\t\t\t\tdelegates[_mid] && delete delegates[_mid];\r\n\t\t\t} else if (!selector) { //mui(selector).off(event);\r\n\t\t\t\tdelegates[_mid] && delete delegates[_mid][event];\r\n\t\t\t} else if (!callback) { //mui(selector).off(event,selector);\r\n\t\t\t\tdelegates[_mid] && delegates[_mid][event] && delete delegates[_mid][event][selector];\r\n\t\t\t} else { //mui(selector).off(event,selector,callback);\r\n\t\t\t\tvar delegateCallbacks = delegates[_mid] && delegates[_mid][event] && delegates[_mid][event][selector];\r\n\t\t\t\t$.each(delegateCallbacks, function(index, delegateCallback) {\r\n\t\t\t\t\tif (mid(delegateCallback) === mid(callback)) {\r\n\t\t\t\t\t\tdelegateCallbacks.splice(index, 1);\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, true);\r\n\t\t\t}\r\n\t\t\tif (delegates[_mid]) {\r\n\t\t\t\t//如果off掉了所有当前element的指定的event事件，则remove掉当前element的delegate回调\r\n\t\t\t\tif ((!delegates[_mid][event] || $.isEmptyObject(delegates[_mid][event]))) {\r\n\t\t\t\t\tfindDelegateFn(this, event).forEach(function(fn) {\r\n\t\t\t\t\t\tthis.removeEventListener(fn.type, fn);\r\n\t\t\t\t\t\tdelete delegateFns[_mid][fn.i];\r\n\t\t\t\t\t}.bind(this));\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t//如果delegates[_mid]已不存在，删除所有\r\n\t\t\t\tfindDelegateFn(this).forEach(function(fn) {\r\n\t\t\t\t\tthis.removeEventListener(fn.type, fn);\r\n\t\t\t\t\tdelete delegateFns[_mid][fn.i];\r\n\t\t\t\t}.bind(this));\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t};\r\n})(mui);\r\n/**\r\n * mui target(action>popover>modal>tab>toggle)\r\n */\r\n(function($, window, document) {\r\n\t/**\r\n\t * targets\r\n\t */\r\n\t$.targets = {};\r\n\t/**\r\n\t * target handles\r\n\t */\r\n\t$.targetHandles = [];\r\n\t/**\r\n\t * register target\r\n\t * @param {type} target\r\n\t * @returns {$.targets}\r\n\t */\r\n\t$.registerTarget = function(target) {\r\n\r\n\t\ttarget.index = target.index || 1000;\r\n\r\n\t\t$.targetHandles.push(target);\r\n\r\n\t\t$.targetHandles.sort(function(a, b) {\r\n\t\t\treturn a.index - b.index;\r\n\t\t});\r\n\r\n\t\treturn $.targetHandles;\r\n\t};\r\n\twindow.addEventListener($.EVENT_START, function(event) {\r\n\t\tvar target = event.target;\r\n\t\tvar founds = {};\r\n\t\tfor (; target && target !== document; target = target.parentNode) {\r\n\t\t\tvar isFound = false;\r\n\t\t\t$.each($.targetHandles, function(index, targetHandle) {\r\n\t\t\t\tvar name = targetHandle.name;\r\n\t\t\t\tif (!isFound && !founds[name] && targetHandle.hasOwnProperty('handle')) {\r\n\t\t\t\t\t$.targets[name] = targetHandle.handle(event, target);\r\n\t\t\t\t\tif ($.targets[name]) {\r\n\t\t\t\t\t\tfounds[name] = true;\r\n\t\t\t\t\t\tif (targetHandle.isContinue !== true) {\r\n\t\t\t\t\t\t\tisFound = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!founds[name]) {\r\n\t\t\t\t\t\tif (targetHandle.isReset !== false)\r\n\t\t\t\t\t\t\t$.targets[name] = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tif (isFound) {\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\twindow.addEventListener('click', function(event) { //解决touch与click的target不一致的问题(比如链接边缘点击时，touch的target为html，而click的target为A)\r\n\t\tvar target = event.target;\r\n\t\tvar isFound = false;\r\n\t\tfor (; target && target !== document; target = target.parentNode) {\r\n\t\t\tif (target.tagName === 'A') {\r\n\t\t\t\t$.each($.targetHandles, function(index, targetHandle) {\r\n\t\t\t\t\tvar name = targetHandle.name;\r\n\t\t\t\t\tif (targetHandle.hasOwnProperty('handle')) {\r\n\t\t\t\t\t\tif (targetHandle.handle(event, target)) {\r\n\t\t\t\t\t\t\tisFound = true;\r\n\t\t\t\t\t\t\tevent.preventDefault();\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\tif (isFound) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n})(mui, window, document);\r\n/**\r\n * fixed trim\r\n * @param {type} undefined\r\n * @returns {undefined}\r\n */\r\n(function(undefined) {\r\n\tif (String.prototype.trim === undefined) { // fix for iOS 3.2\r\n\t\tString.prototype.trim = function() {\r\n\t\t\treturn this.replace(/^\\s+|\\s+$/g, '');\r\n\t\t};\r\n\t}\r\n\tObject.setPrototypeOf = Object.setPrototypeOf || function(obj, proto) {\r\n\t\tobj['__proto__'] = proto;\r\n\t\treturn obj;\r\n\t};\r\n\r\n})();\r\n/**\r\n * fixed CustomEvent\r\n */\r\n(function() {\r\n\tif (typeof window.CustomEvent === 'undefined') {\r\n\t\tfunction CustomEvent(event, params) {\r\n\t\t\tparams = params || {\r\n\t\t\t\tbubbles: false,\r\n\t\t\t\tcancelable: false,\r\n\t\t\t\tdetail: undefined\r\n\t\t\t};\r\n\t\t\tvar evt = document.createEvent('Events');\r\n\t\t\tvar bubbles = true;\r\n\t\t\tfor (var name in params) {\r\n\t\t\t\t(name === 'bubbles') ? (bubbles = !!params[name]) : (evt[name] = params[name]);\r\n\t\t\t}\r\n\t\t\tevt.initEvent(event, bubbles, true);\r\n\t\t\treturn evt;\r\n\t\t};\r\n\t\tCustomEvent.prototype = window.Event.prototype;\r\n\t\twindow.CustomEvent = CustomEvent;\r\n\t}\r\n})();\r\n/*\r\n\tA shim for non ES5 supporting browsers.\r\n\tAdds function bind to Function prototype, so that you can do partial application.\r\n\tWorks even with the nasty thing, where the first word is the opposite of extranet, the second one is the profession of Columbus, and the version number is 9, flipped 180 degrees.\r\n*/\r\n\r\nFunction.prototype.bind = Function.prototype.bind || function(to) {\r\n\t// Make an array of our arguments, starting from second argument\r\n\tvar partial = Array.prototype.splice.call(arguments, 1),\r\n\t\t// We'll need the original function.\r\n\t\tfn = this;\r\n\tvar bound = function() {\r\n\t\t\t// Join the already applied arguments to the now called ones (after converting to an array again).\r\n\t\t\tvar args = partial.concat(Array.prototype.splice.call(arguments, 0));\r\n\t\t\t// If not being called as a constructor\r\n\t\t\tif (!(this instanceof bound)) {\r\n\t\t\t\t// return the result of the function called bound to target and partially applied.\r\n\t\t\t\treturn fn.apply(to, args);\r\n\t\t\t}\r\n\t\t\t// If being called as a constructor, apply the function bound to self.\r\n\t\t\tfn.apply(this, args);\r\n\t\t}\r\n\t\t// Attach the prototype of the function to our newly created function.\r\n\tbound.prototype = fn.prototype;\r\n\treturn bound;\r\n};\r\n/**\r\n * mui fixed classList\r\n * @param {type} document\r\n * @returns {undefined}\r\n */\r\n(function(document) {\r\n    if (!(\"classList\" in document.documentElement) && Object.defineProperty && typeof HTMLElement !== 'undefined') {\r\n\r\n        Object.defineProperty(HTMLElement.prototype, 'classList', {\r\n            get: function() {\r\n                var self = this;\r\n                function update(fn) {\r\n                    return function(value) {\r\n                        var classes = self.className.split(/\\s+/),\r\n                                index = classes.indexOf(value);\r\n\r\n                        fn(classes, index, value);\r\n                        self.className = classes.join(\" \");\r\n                    };\r\n                }\r\n\r\n                var ret = {\r\n                    add: update(function(classes, index, value) {\r\n                        ~index || classes.push(value);\r\n                    }),\r\n                    remove: update(function(classes, index) {\r\n                        ~index && classes.splice(index, 1);\r\n                    }),\r\n                    toggle: update(function(classes, index, value) {\r\n                        ~index ? classes.splice(index, 1) : classes.push(value);\r\n                    }),\r\n                    contains: function(value) {\r\n                        return !!~self.className.split(/\\s+/).indexOf(value);\r\n                    },\r\n                    item: function(i) {\r\n                        return self.className.split(/\\s+/)[i] || null;\r\n                    }\r\n                };\r\n\r\n                Object.defineProperty(ret, 'length', {\r\n                    get: function() {\r\n                        return self.className.split(/\\s+/).length;\r\n                    }\r\n                });\r\n\r\n                return ret;\r\n            }\r\n        });\r\n    }\r\n})(document);\r\n\r\n/**\r\n * mui fixed requestAnimationFrame\r\n * @param {type} window\r\n * @returns {undefined}\r\n */\r\n(function(window) {\r\n\tif (!window.requestAnimationFrame) {\r\n\t\tvar lastTime = 0;\r\n\t\twindow.requestAnimationFrame = window.webkitRequestAnimationFrame || function(callback, element) {\r\n\t\t\tvar currTime = new Date().getTime();\r\n\t\t\tvar timeToCall = Math.max(0, 16.7 - (currTime - lastTime));\r\n\t\t\tvar id = window.setTimeout(function() {\r\n\t\t\t\tcallback(currTime + timeToCall);\r\n\t\t\t}, timeToCall);\r\n\t\t\tlastTime = currTime + timeToCall;\r\n\t\t\treturn id;\r\n\t\t};\r\n\t\twindow.cancelAnimationFrame = window.webkitCancelAnimationFrame || window.webkitCancelRequestAnimationFrame || function(id) {\r\n\t\t\tclearTimeout(id);\r\n\t\t};\r\n\t};\r\n}(window));\r\n/**\r\n * fastclick(only for radio,checkbox)\r\n */\r\n(function($, window, name) {\r\n\tif (!$.os.android && !$.os.ios) { //目前仅识别android和ios\r\n\t\treturn;\r\n\t}\r\n\tif (window.FastClick) {\r\n\t\treturn;\r\n\t}\r\n\r\n\tvar handle = function(event, target) {\r\n\t\tif (target.tagName === 'LABEL') {\r\n\t\t\tif (target.parentNode) {\r\n\t\t\t\ttarget = target.parentNode.querySelector('input');\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (target && (target.type === 'radio' || target.type === 'checkbox')) {\r\n\t\t\tif (!target.disabled) { //disabled\r\n\t\t\t\treturn target;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t$.registerTarget({\r\n\t\tname: name,\r\n\t\tindex: 40,\r\n\t\thandle: handle,\r\n\t\ttarget: false\r\n\t});\r\n\tvar dispatchEvent = function(event) {\r\n\t\tvar targetElement = $.targets.click;\r\n\t\tif (targetElement) {\r\n\t\t\tvar clickEvent, touch;\r\n\t\t\t// On some Android devices activeElement needs to be blurred otherwise the synthetic click will have no effect\r\n\t\t\tif (document.activeElement && document.activeElement !== targetElement) {\r\n\t\t\t\tdocument.activeElement.blur();\r\n\t\t\t}\r\n\t\t\ttouch = event.detail.gesture.changedTouches[0];\r\n\t\t\t// Synthesise a click event, with an extra attribute so it can be tracked\r\n\t\t\tclickEvent = document.createEvent('MouseEvents');\r\n\t\t\tclickEvent.initMouseEvent('click', true, true, window, 1, touch.screenX, touch.screenY, touch.clientX, touch.clientY, false, false, false, false, 0, null);\r\n\t\t\tclickEvent.forwardedTouchEvent = true;\r\n\t\t\ttargetElement.dispatchEvent(clickEvent);\r\n\t\t\tevent.detail && event.detail.gesture.preventDefault();\r\n\t\t}\r\n\t};\r\n\twindow.addEventListener('tap', dispatchEvent);\r\n\twindow.addEventListener('doubletap', dispatchEvent);\r\n\t//捕获\r\n\twindow.addEventListener('click', function(event) {\r\n\t\tif ($.targets.click) {\r\n\t\t\tif (!event.forwardedTouchEvent) { //stop click\r\n\t\t\t\tif (event.stopImmediatePropagation) {\r\n\t\t\t\t\tevent.stopImmediatePropagation();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Part of the hack for browsers that don't support Event#stopImmediatePropagation\r\n\t\t\t\t\tevent.propagationStopped = true;\r\n\t\t\t\t}\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t}, true);\r\n\r\n})(mui, window, 'click');\r\n(function($, document) {\r\n\t$(function() {\r\n\t\tif (!$.os.ios) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar CLASS_FOCUSIN = 'mui-focusin';\r\n\t\tvar CLASS_BAR_TAB = 'mui-bar-tab';\r\n\t\tvar CLASS_BAR_FOOTER = 'mui-bar-footer';\r\n\t\tvar CLASS_BAR_FOOTER_SECONDARY = 'mui-bar-footer-secondary';\r\n\t\tvar CLASS_BAR_FOOTER_SECONDARY_TAB = 'mui-bar-footer-secondary-tab';\r\n\t\t// var content = document.querySelector('.' + CLASS_CONTENT);\r\n\t\t// if (content) {\r\n\t\t// \tdocument.body.insertBefore(content, document.body.firstElementChild);\r\n\t\t// }\r\n\t\tdocument.addEventListener('focusin', function(e) {\r\n\t\t\tif ($.os.plus) { //在父webview里边不fix\r\n\t\t\t\tif (window.plus) {\r\n\t\t\t\t\tif (plus.webview.currentWebview().children().length > 0) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar target = e.target;\r\n\t\t\t//TODO 需考虑所有键盘弹起的情况\r\n\t\t\tif (target.tagName && (target.tagName === 'TEXTAREA' || (target.tagName === 'INPUT' && (target.type === 'text' || target.type === 'search' || target.type === 'number')))) {\r\n\t\t\t\tif (target.disabled || target.readOnly) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tdocument.body.classList.add(CLASS_FOCUSIN);\r\n\t\t\t\tvar isFooter = false;\r\n\t\t\t\tfor (; target && target !== document; target = target.parentNode) {\r\n\t\t\t\t\tvar classList = target.classList;\r\n\t\t\t\t\tif (classList && classList.contains(CLASS_BAR_TAB) || classList.contains(CLASS_BAR_FOOTER) || classList.contains(CLASS_BAR_FOOTER_SECONDARY) || classList.contains(CLASS_BAR_FOOTER_SECONDARY_TAB)) {\r\n\t\t\t\t\t\tisFooter = true;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (isFooter) {\r\n\t\t\t\t\tvar scrollTop = document.body.scrollHeight;\r\n\t\t\t\t\tvar scrollLeft = document.body.scrollLeft;\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\twindow.scrollTo(scrollLeft, scrollTop);\r\n\t\t\t\t\t}, 20);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\tdocument.addEventListener('focusout', function(e) {\r\n\t\t\tvar classList = document.body.classList;\r\n\t\t\tif (classList.contains(CLASS_FOCUSIN)) {\r\n\t\t\t\tclassList.remove(CLASS_FOCUSIN);\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\twindow.scrollTo(document.body.scrollLeft, document.body.scrollTop);\r\n\t\t\t\t}, 20);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n})(mui, document);\r\n/**\r\n * mui namespace(optimization)\r\n * @param {type} $\r\n * @returns {undefined}\r\n */\r\n(function($) {\r\n\t$.namespace = 'mui';\r\n\t$.classNamePrefix = $.namespace + '-';\r\n\t$.classSelectorPrefix = '.' + $.classNamePrefix;\r\n\t/**\r\n\t * 返回正确的className\r\n\t * @param {type} className\r\n\t * @returns {String}\r\n\t */\r\n\t$.className = function(className) {\r\n\t\treturn $.classNamePrefix + className;\r\n\t};\r\n\t/**\r\n\t * 返回正确的classSelector\r\n\t * @param {type} classSelector\r\n\t * @returns {String}\r\n\t */\r\n\t$.classSelector = function(classSelector) {\r\n\t\treturn classSelector.replace(/\\./g, $.classSelectorPrefix);\r\n\t};\r\n\t/**\r\n         * 返回正确的eventName\r\n         * @param {type} event\r\n         * @param {type} module\r\n         * @returns {String}\r\n         */\r\n\t$.eventName = function(event, module) {\r\n\t\treturn event + ($.namespace ? ('.' + $.namespace) : '') + ( module ? ('.' + module) : '');\r\n\t};\r\n})(mui);\r\n\r\n/**\r\n * mui gestures\r\n * @param {type} $\r\n * @param {type} window\r\n * @returns {undefined}\r\n */\r\n(function($, window) {\r\n\t$.gestures = {\r\n\t\tsession: {}\r\n\t};\r\n\t/**\r\n\t * Gesture preventDefault\r\n\t * @param {type} e\r\n\t * @returns {undefined}\r\n\t */\r\n\t$.preventDefault = function(e) {\r\n\t\te.preventDefault();\r\n\t};\r\n\t/**\r\n\t * Gesture stopPropagation\r\n\t * @param {type} e\r\n\t * @returns {undefined}\r\n\t */\r\n\t$.stopPropagation = function(e) {\r\n\t\te.stopPropagation();\r\n\t};\r\n\r\n\t/**\r\n\t * register gesture\r\n\t * @param {type} gesture\r\n\t * @returns {$.gestures}\r\n\t */\r\n\t$.addGesture = function(gesture) {\r\n\t\treturn $.addAction('gestures', gesture);\r\n\r\n\t};\r\n\r\n\tvar round = Math.round;\r\n\tvar abs = Math.abs;\r\n\tvar sqrt = Math.sqrt;\r\n\tvar atan = Math.atan;\r\n\tvar atan2 = Math.atan2;\r\n\t/**\r\n\t * distance\r\n\t * @param {type} p1\r\n\t * @param {type} p2\r\n\t * @returns {Number}\r\n\t */\r\n\tvar getDistance = function(p1, p2, props) {\r\n\t\tif (!props) {\r\n\t\t\tprops = ['x', 'y'];\r\n\t\t}\r\n\t\tvar x = p2[props[0]] - p1[props[0]];\r\n\t\tvar y = p2[props[1]] - p1[props[1]];\r\n\t\treturn sqrt((x * x) + (y * y));\r\n\t};\r\n\t/**\r\n\t * scale\r\n\t * @param {Object} starts\r\n\t * @param {Object} moves\r\n\t */\r\n\tvar getScale = function(starts, moves) {\r\n\t\tif (starts.length >= 2 && moves.length >= 2) {\r\n\t\t\tvar props = ['pageX', 'pageY'];\r\n\t\t\treturn getDistance(moves[1], moves[0], props) / getDistance(starts[1], starts[0], props);\r\n\t\t}\r\n\t\treturn 1;\r\n\t};\r\n\t/**\r\n\t * angle\r\n\t * @param {type} p1\r\n\t * @param {type} p2\r\n\t * @returns {Number}\r\n\t */\r\n\tvar getAngle = function(p1, p2, props) {\r\n\t\tif (!props) {\r\n\t\t\tprops = ['x', 'y'];\r\n\t\t}\r\n\t\tvar x = p2[props[0]] - p1[props[0]];\r\n\t\tvar y = p2[props[1]] - p1[props[1]];\r\n\t\treturn atan2(y, x) * 180 / Math.PI;\r\n\t};\r\n\t/**\r\n\t * direction\r\n\t * @param {Object} x\r\n\t * @param {Object} y\r\n\t */\r\n\tvar getDirection = function(x, y) {\r\n\t\tif (x === y) {\r\n\t\t\treturn '';\r\n\t\t}\r\n\t\tif (abs(x) >= abs(y)) {\r\n\t\t\treturn x > 0 ? 'left' : 'right';\r\n\t\t}\r\n\t\treturn y > 0 ? 'up' : 'down';\r\n\t};\r\n\t/**\r\n\t * rotation\r\n\t * @param {Object} start\r\n\t * @param {Object} end\r\n\t */\r\n\tvar getRotation = function(start, end) {\r\n\t\tvar props = ['pageX', 'pageY'];\r\n\t\treturn getAngle(end[1], end[0], props) - getAngle(start[1], start[0], props);\r\n\t};\r\n\t/**\r\n\t * px per ms\r\n\t * @param {Object} deltaTime\r\n\t * @param {Object} x\r\n\t * @param {Object} y\r\n\t */\r\n\tvar getVelocity = function(deltaTime, x, y) {\r\n\t\treturn {\r\n\t\t\tx: x / deltaTime || 0,\r\n\t\t\ty: y / deltaTime || 0\r\n\t\t};\r\n\t};\r\n\t/**\r\n\t * detect gestures\r\n\t * @param {type} event\r\n\t * @param {type} touch\r\n\t * @returns {undefined}\r\n\t */\r\n\tvar detect = function(event, touch) {\r\n\t\tif ($.gestures.stoped) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t$.doAction('gestures', function(index, gesture) {\r\n\t\t\tif (!$.gestures.stoped) {\r\n\t\t\t\tif ($.options.gestureConfig[gesture.name] !== false) {\r\n\t\t\t\t\tgesture.handle(event, touch);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t/**\r\n\t * 暂时无用\r\n\t * @param {Object} node\r\n\t * @param {Object} parent\r\n\t */\r\n\tvar hasParent = function(node, parent) {\r\n\t\twhile (node) {\r\n\t\t\tif (node == parent) {\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\tnode = node.parentNode;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\tvar uniqueArray = function(src, key, sort) {\r\n\t\tvar results = [];\r\n\t\tvar values = [];\r\n\t\tvar i = 0;\r\n\r\n\t\twhile (i < src.length) {\r\n\t\t\tvar val = key ? src[i][key] : src[i];\r\n\t\t\tif (values.indexOf(val) < 0) {\r\n\t\t\t\tresults.push(src[i]);\r\n\t\t\t}\r\n\t\t\tvalues[i] = val;\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\tif (sort) {\r\n\t\t\tif (!key) {\r\n\t\t\t\tresults = results.sort();\r\n\t\t\t} else {\r\n\t\t\t\tresults = results.sort(function sortUniqueArray(a, b) {\r\n\t\t\t\t\treturn a[key] > b[key];\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn results;\r\n\t};\r\n\tvar getMultiCenter = function(touches) {\r\n\t\tvar touchesLength = touches.length;\r\n\t\tif (touchesLength === 1) {\r\n\t\t\treturn {\r\n\t\t\t\tx: round(touches[0].pageX),\r\n\t\t\t\ty: round(touches[0].pageY)\r\n\t\t\t};\r\n\t\t}\r\n\r\n\t\tvar x = 0;\r\n\t\tvar y = 0;\r\n\t\tvar i = 0;\r\n\t\twhile (i < touchesLength) {\r\n\t\t\tx += touches[i].pageX;\r\n\t\t\ty += touches[i].pageY;\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tx: round(x / touchesLength),\r\n\t\t\ty: round(y / touchesLength)\r\n\t\t};\r\n\t};\r\n\tvar multiTouch = function() {\r\n\t\treturn $.options.gestureConfig.pinch;\r\n\t};\r\n\tvar copySimpleTouchData = function(touch) {\r\n\t\tvar touches = [];\r\n\t\tvar i = 0;\r\n\t\twhile (i < touch.touches.length) {\r\n\t\t\ttouches[i] = {\r\n\t\t\t\tpageX: round(touch.touches[i].pageX),\r\n\t\t\t\tpageY: round(touch.touches[i].pageY)\r\n\t\t\t};\r\n\t\t\ti++;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttimestamp: $.now(),\r\n\t\t\tgesture: touch.gesture,\r\n\t\t\ttouches: touches,\r\n\t\t\tcenter: getMultiCenter(touch.touches),\r\n\t\t\tdeltaX: touch.deltaX,\r\n\t\t\tdeltaY: touch.deltaY\r\n\t\t};\r\n\t};\r\n\r\n\tvar calDelta = function(touch) {\r\n\t\tvar session = $.gestures.session;\r\n\t\tvar center = touch.center;\r\n\t\tvar offset = session.offsetDelta || {};\r\n\t\tvar prevDelta = session.prevDelta || {};\r\n\t\tvar prevTouch = session.prevTouch || {};\r\n\r\n\t\tif (touch.gesture.type === $.EVENT_START || touch.gesture.type === $.EVENT_END) {\r\n\t\t\tprevDelta = session.prevDelta = {\r\n\t\t\t\tx: prevTouch.deltaX || 0,\r\n\t\t\t\ty: prevTouch.deltaY || 0\r\n\t\t\t};\r\n\r\n\t\t\toffset = session.offsetDelta = {\r\n\t\t\t\tx: center.x,\r\n\t\t\t\ty: center.y\r\n\t\t\t};\r\n\t\t}\r\n\t\ttouch.deltaX = prevDelta.x + (center.x - offset.x);\r\n\t\ttouch.deltaY = prevDelta.y + (center.y - offset.y);\r\n\t};\r\n\tvar calTouchData = function(touch) {\r\n\t\tvar session = $.gestures.session;\r\n\t\tvar touches = touch.touches;\r\n\t\tvar touchesLength = touches.length;\r\n\r\n\t\tif (!session.firstTouch) {\r\n\t\t\tsession.firstTouch = copySimpleTouchData(touch);\r\n\t\t}\r\n\r\n\t\tif (multiTouch() && touchesLength > 1 && !session.firstMultiTouch) {\r\n\t\t\tsession.firstMultiTouch = copySimpleTouchData(touch);\r\n\t\t} else if (touchesLength === 1) {\r\n\t\t\tsession.firstMultiTouch = false;\r\n\t\t}\r\n\r\n\t\tvar firstTouch = session.firstTouch;\r\n\t\tvar firstMultiTouch = session.firstMultiTouch;\r\n\t\tvar offsetCenter = firstMultiTouch ? firstMultiTouch.center : firstTouch.center;\r\n\r\n\t\tvar center = touch.center = getMultiCenter(touches);\r\n\t\ttouch.timestamp = $.now();\r\n\t\ttouch.deltaTime = touch.timestamp - firstTouch.timestamp;\r\n\r\n\t\ttouch.angle = getAngle(offsetCenter, center);\r\n\t\ttouch.distance = getDistance(offsetCenter, center);\r\n\r\n\t\tcalDelta(touch);\r\n\r\n\t\ttouch.offsetDirection = getDirection(touch.deltaX, touch.deltaY);\r\n\r\n\t\ttouch.scale = firstMultiTouch ? getScale(firstMultiTouch.touches, touches) : 1;\r\n\t\ttouch.rotation = firstMultiTouch ? getRotation(firstMultiTouch.touches, touches) : 0;\r\n\r\n\t\tcalIntervalTouchData(touch);\r\n\r\n\t};\r\n\tvar CAL_INTERVAL = 25;\r\n\tvar calIntervalTouchData = function(touch) {\r\n\t\tvar session = $.gestures.session;\r\n\t\tvar last = session.lastInterval || touch;\r\n\t\tvar deltaTime = touch.timestamp - last.timestamp;\r\n\t\tvar velocity;\r\n\t\tvar velocityX;\r\n\t\tvar velocityY;\r\n\t\tvar direction;\r\n\r\n\t\tif (touch.gesture.type != $.EVENT_CANCEL && (deltaTime > CAL_INTERVAL || last.velocity === undefined)) {\r\n\t\t\tvar deltaX = last.deltaX - touch.deltaX;\r\n\t\t\tvar deltaY = last.deltaY - touch.deltaY;\r\n\r\n\t\t\tvar v = getVelocity(deltaTime, deltaX, deltaY);\r\n\t\t\tvelocityX = v.x;\r\n\t\t\tvelocityY = v.y;\r\n\t\t\tvelocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\r\n\t\t\tdirection = getDirection(deltaX, deltaY) || last.direction;\r\n\r\n\t\t\tsession.lastInterval = touch;\r\n\t\t} else {\r\n\t\t\tvelocity = last.velocity;\r\n\t\t\tvelocityX = last.velocityX;\r\n\t\t\tvelocityY = last.velocityY;\r\n\t\t\tdirection = last.direction;\r\n\t\t}\r\n\r\n\t\ttouch.velocity = velocity;\r\n\t\ttouch.velocityX = velocityX;\r\n\t\ttouch.velocityY = velocityY;\r\n\t\ttouch.direction = direction;\r\n\t};\r\n\tvar targetIds = {};\r\n\tvar convertTouches = function(touches) {\r\n\t\tfor (var i = 0; i < touches.length; i++) {\r\n\t\t\t!touches['identifier'] && (touches['identifier'] = 0);\r\n\t\t}\r\n\t\treturn touches;\r\n\t};\r\n\tvar getTouches = function(event, touch) {\r\n\t\tvar allTouches = convertTouches($.slice.call(event.touches || [event]));\r\n\r\n\t\tvar type = event.type;\r\n\r\n\t\tvar targetTouches = [];\r\n\t\tvar changedTargetTouches = [];\r\n\r\n\t\t//当touchstart或touchmove且touches长度为1，直接获得all和changed\r\n\t\tif ((type === $.EVENT_START || type === $.EVENT_MOVE) && allTouches.length === 1) {\r\n\t\t\ttargetIds[allTouches[0].identifier] = true;\r\n\t\t\ttargetTouches = allTouches;\r\n\t\t\tchangedTargetTouches = allTouches;\r\n\t\t\ttouch.target = event.target;\r\n\t\t} else {\r\n\t\t\tvar i = 0;\r\n\t\t\tvar targetTouches = [];\r\n\t\t\tvar changedTargetTouches = [];\r\n\t\t\tvar changedTouches = convertTouches($.slice.call(event.changedTouches || [event]));\r\n\r\n\t\t\ttouch.target = event.target;\r\n\t\t\tvar sessionTarget = $.gestures.session.target || event.target;\r\n\t\t\ttargetTouches = allTouches.filter(function(touch) {\r\n\t\t\t\treturn hasParent(touch.target, sessionTarget);\r\n\t\t\t});\r\n\r\n\t\t\tif (type === $.EVENT_START) {\r\n\t\t\t\ti = 0;\r\n\t\t\t\twhile (i < targetTouches.length) {\r\n\t\t\t\t\ttargetIds[targetTouches[i].identifier] = true;\r\n\t\t\t\t\ti++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\ti = 0;\r\n\t\t\twhile (i < changedTouches.length) {\r\n\t\t\t\tif (targetIds[changedTouches[i].identifier]) {\r\n\t\t\t\t\tchangedTargetTouches.push(changedTouches[i]);\r\n\t\t\t\t}\r\n\t\t\t\tif (type === $.EVENT_END || type === $.EVENT_CANCEL) {\r\n\t\t\t\t\tdelete targetIds[changedTouches[i].identifier];\r\n\t\t\t\t}\r\n\t\t\t\ti++;\r\n\t\t\t}\r\n\r\n\t\t\tif (!changedTargetTouches.length) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\t\ttargetTouches = uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true);\r\n\t\tvar touchesLength = targetTouches.length;\r\n\t\tvar changedTouchesLength = changedTargetTouches.length;\r\n\t\tif (type === $.EVENT_START && touchesLength - changedTouchesLength === 0) { //first\r\n\t\t\ttouch.isFirst = true;\r\n\t\t\t$.gestures.touch = $.gestures.session = {\r\n\t\t\t\ttarget: event.target\r\n\t\t\t};\r\n\t\t}\r\n\t\ttouch.isFinal = ((type === $.EVENT_END || type === $.EVENT_CANCEL) && (touchesLength - changedTouchesLength === 0));\r\n\r\n\t\ttouch.touches = targetTouches;\r\n\t\ttouch.changedTouches = changedTargetTouches;\r\n\t\treturn true;\r\n\r\n\t};\r\n\tvar handleTouchEvent = function(event) {\r\n\t\tvar touch = {\r\n\t\t\tgesture: event\r\n\t\t};\r\n\t\tvar touches = getTouches(event, touch);\r\n\t\tif (!touches) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tcalTouchData(touch);\r\n\t\tdetect(event, touch);\r\n\t\t$.gestures.session.prevTouch = touch;\r\n\t\tif (event.type === $.EVENT_END && !$.isTouchable) {\r\n\t\t\t$.gestures.touch = $.gestures.session = {};\r\n\t\t}\r\n\t};\r\n\twindow.addEventListener($.EVENT_START, handleTouchEvent);\r\n\twindow.addEventListener($.EVENT_MOVE, handleTouchEvent);\r\n\twindow.addEventListener($.EVENT_END, handleTouchEvent);\r\n\twindow.addEventListener($.EVENT_CANCEL, handleTouchEvent);\r\n\t//fixed hashchange(android)\r\n\twindow.addEventListener($.EVENT_CLICK, function(e) {\r\n\t\t//TODO 应该判断当前target是不是在targets.popover内部，而不是非要相等\r\n\t\tif (($.os.android || $.os.ios) && (($.targets.popover && e.target === $.targets.popover) || ($.targets.tab) || $.targets.offcanvas || $.targets.modal)) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t}, true);\r\n\r\n\r\n\t//增加原生滚动识别\r\n\t$.isScrolling = false;\r\n\tvar scrollingTimeout = null;\r\n\twindow.addEventListener('scroll', function() {\r\n\t\t$.isScrolling = true;\r\n\t\tscrollingTimeout && clearTimeout(scrollingTimeout);\r\n\t\tscrollingTimeout = setTimeout(function() {\r\n\t\t\t$.isScrolling = false;\r\n\t\t}, 250);\r\n\t});\r\n})(mui, window);\r\n/**\r\n * mui gesture flick[left|right|up|down]\r\n * @param {type} $\r\n * @param {type} name\r\n * @returns {undefined}\r\n */\r\n(function($, name) {\r\n\tvar flickStartTime = 0;\r\n\tvar handle = function(event, touch) {\r\n\t\tvar session = $.gestures.session;\r\n\t\tvar options = this.options;\r\n\t\tvar now = $.now();\r\n\t\tswitch (event.type) {\r\n\t\t\tcase $.EVENT_MOVE:\r\n\t\t\t\tif (now - flickStartTime > 300) {\r\n\t\t\t\t\tflickStartTime = now;\r\n\t\t\t\t\tsession.flickStart = touch.center;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.EVENT_END:\r\n\t\t\tcase $.EVENT_CANCEL:\r\n\t\t\t\ttouch.flick = false;\r\n\t\t\t\tif (session.flickStart && options.flickMaxTime > (now - flickStartTime) && touch.distance > options.flickMinDistince) {\r\n\t\t\t\t\ttouch.flick = true;\r\n\t\t\t\t\ttouch.flickTime = now - flickStartTime;\r\n\t\t\t\t\ttouch.flickDistanceX = touch.center.x - session.flickStart.x;\r\n\t\t\t\t\ttouch.flickDistanceY = touch.center.y - session.flickStart.y;\r\n\t\t\t\t\t$.trigger(session.target, name, touch);\r\n\t\t\t\t\t$.trigger(session.target, name + touch.direction, touch);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\r\n\t};\r\n\t/**\r\n\t * mui gesture flick\r\n\t */\r\n\t$.addGesture({\r\n\t\tname: name,\r\n\t\tindex: 5,\r\n\t\thandle: handle,\r\n\t\toptions: {\r\n\t\t\tflickMaxTime: 200,\r\n\t\t\tflickMinDistince: 10\r\n\t\t}\r\n\t});\r\n})(mui, 'flick');\r\n/**\r\n * mui gesture swipe[left|right|up|down]\r\n * @param {type} $\r\n * @param {type} name\r\n * @returns {undefined}\r\n */\r\n(function($, name) {\r\n\tvar handle = function(event, touch) {\r\n\t\tvar session = $.gestures.session;\r\n\t\tif (event.type === $.EVENT_END || event.type === $.EVENT_CANCEL) {\r\n\t\t\tvar options = this.options;\r\n\t\t\ttouch.swipe = false;\r\n\t\t\t//TODO 后续根据velocity计算\r\n\t\t\tif (touch.direction && options.swipeMaxTime > touch.deltaTime && touch.distance > options.swipeMinDistince) {\r\n\t\t\t\ttouch.swipe = true;\r\n\t\t\t\t$.trigger(session.target, name, touch);\r\n\t\t\t\t$.trigger(session.target, name + touch.direction, touch);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * mui gesture swipe\r\n\t */\r\n\t$.addGesture({\r\n\t\tname: name,\r\n\t\tindex: 10,\r\n\t\thandle: handle,\r\n\t\toptions: {\r\n\t\t\tswipeMaxTime: 300,\r\n\t\t\tswipeMinDistince: 18\r\n\t\t}\r\n\t});\r\n})(mui, 'swipe');\r\n/**\r\n * mui gesture drag[start|left|right|up|down|end]\r\n * @param {type} $\r\n * @param {type} name\r\n * @returns {undefined}\r\n */\r\n(function($, name) {\r\n\tvar handle = function(event, touch) {\r\n\t\tvar session = $.gestures.session;\r\n\t\tswitch (event.type) {\r\n\t\t\tcase $.EVENT_START:\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.EVENT_MOVE:\r\n\t\t\t\tif (!touch.direction || !session.target) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t//修正direction,可在session期间自行锁定拖拽方向，方便开发scroll类不同方向拖拽插件嵌套\r\n\t\t\t\tif (session.lockDirection && session.startDirection) {\r\n\t\t\t\t\tif (session.startDirection && session.startDirection !== touch.direction) {\r\n\t\t\t\t\t\tif (session.startDirection === 'up' || session.startDirection === 'down') {\r\n\t\t\t\t\t\t\ttouch.direction = touch.deltaY < 0 ? 'up' : 'down';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttouch.direction = touch.deltaX < 0 ? 'left' : 'right';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!session.drag) {\r\n\t\t\t\t\tsession.drag = true;\r\n\t\t\t\t\t$.trigger(session.target, name + 'start', touch);\r\n\t\t\t\t}\r\n\t\t\t\t$.trigger(session.target, name, touch);\r\n\t\t\t\t$.trigger(session.target, name + touch.direction, touch);\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.EVENT_END:\r\n\t\t\tcase $.EVENT_CANCEL:\r\n\t\t\t\tif (session.drag && touch.isFinal) {\r\n\t\t\t\t\t$.trigger(session.target, name + 'end', touch);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * mui gesture drag\r\n\t */\r\n\t$.addGesture({\r\n\t\tname: name,\r\n\t\tindex: 20,\r\n\t\thandle: handle,\r\n\t\toptions: {\r\n\t\t\tfingers: 1\r\n\t\t}\r\n\t});\r\n})(mui, 'drag');\r\n/**\r\n * mui gesture tap and doubleTap\r\n * @param {type} $\r\n * @param {type} name\r\n * @returns {undefined}\r\n */\r\n(function($, name) {\r\n\tvar lastTarget;\r\n\tvar lastTapTime;\r\n\tvar handle = function(event, touch) {\r\n\t\tvar session = $.gestures.session;\r\n\t\tvar options = this.options;\r\n\t\tswitch (event.type) {\r\n\t\t\tcase $.EVENT_END:\r\n\t\t\t\tif (!touch.isFinal) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tvar target = session.target;\r\n\t\t\t\tif (!target || (target.disabled || (target.classList && target.classList.contains('mui-disabled')))) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (touch.distance < options.tapMaxDistance && touch.deltaTime < options.tapMaxTime) {\r\n\t\t\t\t\tif ($.options.gestureConfig.doubletap && lastTarget && (lastTarget === target)) { //same target\r\n\t\t\t\t\t\tif (lastTapTime && (touch.timestamp - lastTapTime) < options.tapMaxInterval) {\r\n\t\t\t\t\t\t\t$.trigger(target, 'doubletap', touch);\r\n\t\t\t\t\t\t\tlastTapTime = $.now();\r\n\t\t\t\t\t\t\tlastTarget = target;\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$.trigger(target, name, touch);\r\n\t\t\t\t\tlastTapTime = $.now();\r\n\t\t\t\t\tlastTarget = target;\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * mui gesture tap\r\n\t */\r\n\t$.addGesture({\r\n\t\tname: name,\r\n\t\tindex: 30,\r\n\t\thandle: handle,\r\n\t\toptions: {\r\n\t\t\tfingers: 1,\r\n\t\t\ttapMaxInterval: 300,\r\n\t\t\ttapMaxDistance: 5,\r\n\t\t\ttapMaxTime: 250\r\n\t\t}\r\n\t});\r\n})(mui, 'tap');\r\n/**\r\n * mui gesture longtap\r\n * @param {type} $\r\n * @param {type} name\r\n * @returns {undefined}\r\n */\r\n(function($, name) {\r\n\tvar timer;\r\n\tvar handle = function(event, touch) {\r\n\t\tvar session = $.gestures.session;\r\n\t\tvar options = this.options;\r\n\t\tswitch (event.type) {\r\n\t\t\tcase $.EVENT_START:\r\n\t\t\t\tclearTimeout(timer);\r\n\t\t\t\ttimer = setTimeout(function() {\r\n\t\t\t\t\t$.trigger(session.target, name, touch);\r\n\t\t\t\t}, options.holdTimeout);\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.EVENT_MOVE:\r\n\t\t\t\tif (touch.distance > options.holdThreshold) {\r\n\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.EVENT_END:\r\n\t\t\tcase $.EVENT_CANCEL:\r\n\t\t\t\tclearTimeout(timer);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * mui gesture longtap\r\n\t */\r\n\t$.addGesture({\r\n\t\tname: name,\r\n\t\tindex: 10,\r\n\t\thandle: handle,\r\n\t\toptions: {\r\n\t\t\tfingers: 1,\r\n\t\t\tholdTimeout: 500,\r\n\t\t\tholdThreshold: 2\r\n\t\t}\r\n\t});\r\n})(mui, 'longtap');\r\n/**\r\n * mui gesture hold\r\n * @param {type} $\r\n * @param {type} name\r\n * @returns {undefined}\r\n */\r\n(function($, name) {\r\n\tvar timer;\r\n\tvar handle = function(event, touch) {\r\n\t\tvar session = $.gestures.session;\r\n\t\tvar options = this.options;\r\n\t\tswitch (event.type) {\r\n\t\t\tcase $.EVENT_START:\r\n\t\t\t\tif ($.options.gestureConfig.hold) {\r\n\t\t\t\t\ttimer && clearTimeout(timer);\r\n\t\t\t\t\ttimer = setTimeout(function() {\r\n\t\t\t\t\t\ttouch.hold = true;\r\n\t\t\t\t\t\t$.trigger(session.target, name, touch);\r\n\t\t\t\t\t}, options.holdTimeout);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.EVENT_MOVE:\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.EVENT_END:\r\n\t\t\tcase $.EVENT_CANCEL:\r\n\t\t\t\tif (timer) {\r\n\t\t\t\t\tclearTimeout(timer) && (timer = null);\r\n\t\t\t\t\t$.trigger(session.target, 'release', touch);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * mui gesture hold\r\n\t */\r\n\t$.addGesture({\r\n\t\tname: name,\r\n\t\tindex: 10,\r\n\t\thandle: handle,\r\n\t\toptions: {\r\n\t\t\tfingers: 1,\r\n\t\t\tholdTimeout: 0\r\n\t\t}\r\n\t});\r\n})(mui, 'hold');\r\n/**\r\n * mui gesture pinch\r\n * @param {type} $\r\n * @param {type} name\r\n * @returns {undefined}\r\n */\r\n(function($, name) {\r\n\tvar handle = function(event, touch) {\r\n\t\tvar options = this.options;\r\n\t\tvar session = $.gestures.session;\r\n\t\tswitch (event.type) {\r\n\t\t\tcase $.EVENT_START:\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.EVENT_MOVE:\r\n\t\t\t\tif ($.options.gestureConfig.pinch) {\r\n\t\t\t\t\tif (touch.touches.length < 2) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!session.pinch) { //start\r\n\t\t\t\t\t\tsession.pinch = true;\r\n\t\t\t\t\t\t$.trigger(session.target, name + 'start', touch);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t$.trigger(session.target, name, touch);\r\n\t\t\t\t\tvar scale = touch.scale;\r\n\t\t\t\t\tvar rotation = touch.rotation;\r\n\t\t\t\t\tvar lastScale = typeof touch.lastScale === 'undefined' ? 1 : touch.lastScale;\r\n\t\t\t\t\tvar scaleDiff = 0.000000000001; //防止scale与lastScale相等，不触发事件的情况。\r\n\t\t\t\t\tif (scale > lastScale) { //out\r\n\t\t\t\t\t\tlastScale = scale - scaleDiff;\r\n\t\t\t\t\t\t$.trigger(session.target, name + 'out', touch);\r\n\t\t\t\t\t} //in\r\n\t\t\t\t\telse if (scale < lastScale) {\r\n\t\t\t\t\t\tlastScale = scale + scaleDiff;\r\n\t\t\t\t\t\t$.trigger(session.target, name + 'in', touch);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (Math.abs(rotation) > options.minRotationAngle) {\r\n\t\t\t\t\t\t$.trigger(session.target, 'rotate', touch);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.EVENT_END:\r\n\t\t\tcase $.EVENT_CANCEL:\r\n\t\t\t\tif ($.options.gestureConfig.pinch && session.pinch && touch.touches.length === 2) {\r\n\t\t\t\t\tsession.pinch = false;\r\n\t\t\t\t\t$.trigger(session.target, name + 'end', touch);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * mui gesture pinch\r\n\t */\r\n\t$.addGesture({\r\n\t\tname: name,\r\n\t\tindex: 10,\r\n\t\thandle: handle,\r\n\t\toptions: {\r\n\t\t\tminRotationAngle: 0\r\n\t\t}\r\n\t});\r\n})(mui, 'pinch');\r\n/**\r\n * mui.init\r\n * @param {type} $\r\n * @returns {undefined}\r\n */\r\n(function($) {\r\n\t$.global = $.options = {\r\n\t\tgestureConfig: {\r\n\t\t\ttap: true,\r\n\t\t\tdoubletap: false,\r\n\t\t\tlongtap: false,\r\n\t\t\thold: false,\r\n\t\t\tflick: true,\r\n\t\t\tswipe: true,\r\n\t\t\tdrag: true,\r\n\t\t\tpinch: false\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t *\r\n\t * @param {type} options\r\n\t * @returns {undefined}\r\n\t */\r\n\t$.initGlobal = function(options) {\r\n\t\t$.options = $.extend(true, $.global, options);\r\n\t\treturn this;\r\n\t};\r\n\tvar inits = {};\r\n\r\n\tvar isInitialized = false;\r\n\t//TODO 自动调用init?因为用户自己调用init的时机可能不确定，如果晚于自动init，则会有潜在问题\r\n\t//\t$.ready(function() {\r\n\t//\t\tsetTimeout(function() {\r\n\t//\t\t\tif (!isInitialized) {\r\n\t//\t\t\t\t$.init();\r\n\t//\t\t\t}\r\n\t//\t\t}, 300);\r\n\t//\t});\r\n\t/**\r\n\t * 单页配置 初始化\r\n\t * @param {object} options\r\n\t */\r\n\t$.init = function(options) {\r\n\t\tisInitialized = true;\r\n\t\t$.options = $.extend(true, $.global, options || {});\r\n\t\t$.ready(function() {\r\n\t\t\t$.doAction('inits', function(index, init) {\r\n\t\t\t\tvar isInit = !!(!inits[init.name] || init.repeat);\r\n\t\t\t\tif (isInit) {\r\n\t\t\t\t\tinit.handle.call($);\r\n\t\t\t\t\tinits[init.name] = true;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * 增加初始化执行流程\r\n\t * @param {function} init\r\n\t */\r\n\t$.addInit = function(init) {\r\n\t\treturn $.addAction('inits', init);\r\n\t};\r\n\t/**\r\n\t * 处理html5版本subpages\r\n\t */\r\n\t$.addInit({\r\n\t\tname: 'iframe',\r\n\t\tindex: 100,\r\n\t\thandle: function() {\r\n\t\t\tvar options = $.options;\r\n\t\t\tvar subpages = options.subpages || [];\r\n\t\t\tif (!$.os.plus && subpages.length) {\r\n\t\t\t\t//暂时只处理单个subpage。后续可以考虑支持多个subpage\r\n\t\t\t\tcreateIframe(subpages[0]);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\tvar createIframe = function(options) {\r\n\t\tvar wrapper = document.createElement('div');\r\n\t\twrapper.className = 'mui-iframe-wrapper';\r\n\t\tvar styles = options.styles || {};\r\n\t\tif (typeof styles.top !== 'string') {\r\n\t\t\tstyles.top = '0px';\r\n\t\t}\r\n\t\tif (typeof styles.bottom !== 'string') {\r\n\t\t\tstyles.bottom = '0px';\r\n\t\t}\r\n\t\twrapper.style.top = styles.top;\r\n\t\twrapper.style.bottom = styles.bottom;\r\n\t\tvar iframe = document.createElement('iframe');\r\n\t\tiframe.src = options.url;\r\n\t\tiframe.id = options.id || options.url;\r\n\t\tiframe.name = iframe.id;\r\n\t\twrapper.appendChild(iframe);\r\n\t\tdocument.body.appendChild(wrapper);\r\n\t\t//目前仅处理微信\r\n\t\t$.os.wechat && handleScroll(wrapper, iframe);\r\n\t};\r\n\r\n\tfunction handleScroll(wrapper, iframe) {\r\n\t\tvar key = 'MUI_SCROLL_POSITION_' + document.location.href + '_' + iframe.src;\r\n\t\tvar scrollTop = (parseFloat(localStorage.getItem(key)) || 0);\r\n\t\tif (scrollTop) {\r\n\t\t\t(function(y) {\r\n\t\t\t\tiframe.onload = function() {\r\n\t\t\t\t\twindow.scrollTo(0, y);\r\n\t\t\t\t};\r\n\t\t\t})(scrollTop);\r\n\t\t}\r\n\t\tsetInterval(function() {\r\n\t\t\tvar _scrollTop = window.scrollY;\r\n\t\t\tif (scrollTop !== _scrollTop) {\r\n\t\t\t\tlocalStorage.setItem(key, _scrollTop + '');\r\n\t\t\t\tscrollTop = _scrollTop;\r\n\t\t\t}\r\n\t\t}, 100);\r\n\t};\r\n\t$(function() {\r\n\t\tvar classList = document.body.classList;\r\n\t\tvar os = [];\r\n\t\tif ($.os.ios) {\r\n\t\t\tos.push({\r\n\t\t\t\tos: 'ios',\r\n\t\t\t\tversion: $.os.version\r\n\t\t\t});\r\n\t\t\tclassList.add('mui-ios');\r\n\t\t} else if ($.os.android) {\r\n\t\t\tos.push({\r\n\t\t\t\tos: 'android',\r\n\t\t\t\tversion: $.os.version\r\n\t\t\t});\r\n\t\t\tclassList.add('mui-android');\r\n\t\t}\r\n\t\tif ($.os.wechat) {\r\n\t\t\tos.push({\r\n\t\t\t\tos: 'wechat',\r\n\t\t\t\tversion: $.os.wechat.version\r\n\t\t\t});\r\n\t\t\tclassList.add('mui-wechat');\r\n\t\t}\r\n\t\tif (os.length) {\r\n\t\t\t$.each(os, function(index, osObj) {\r\n\t\t\t\tvar version = '';\r\n\t\t\t\tvar classArray = [];\r\n\t\t\t\tif (osObj.version) {\r\n\t\t\t\t\t$.each(osObj.version.split('.'), function(i, v) {\r\n\t\t\t\t\t\tversion = version + (version ? '-' : '') + v;\r\n\t\t\t\t\t\tclassList.add($.className(osObj.os + '-' + version));\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n})(mui);\r\n/**\r\n * mui.init 5+\r\n * @param {type} $\r\n * @returns {undefined}\r\n */\r\n(function($) {\r\n\tvar defaultOptions = {\r\n\t\tswipeBack: false,\r\n\t\tpreloadPages: [], //5+ lazyLoad webview\r\n\t\tpreloadLimit: 10, //预加载窗口的数量限制(一旦超出，先进先出)\r\n\t\tkeyEventBind: {\r\n\t\t\tbackbutton: true,\r\n\t\t\tmenubutton: true\r\n\t\t}\r\n\t};\r\n\r\n\t//默认页面动画\r\n\tvar defaultShow = {\r\n\t\tautoShow: true,\r\n\t\tduration: $.os.ios ? 200 : 100,\r\n\t\taniShow: 'slide-in-right'\r\n\t};\r\n\t//若执行了显示动画初始化操作，则要覆盖默认配置\r\n\tif ($.options.show) {\r\n\t\tdefaultShow = $.extend(true, defaultShow, $.options.show);\r\n\t}\r\n\r\n\t$.currentWebview = null;\r\n\t$.isHomePage = false;\r\n\r\n\t$.extend(true, $.global, defaultOptions);\r\n\t$.extend(true, $.options, defaultOptions);\r\n\t/**\r\n\t * 等待动画配置\r\n\t * @param {type} options\r\n\t * @returns {Object}\r\n\t */\r\n\t$.waitingOptions = function(options) {\r\n\t\treturn $.extend(true, {}, {\r\n\t\t\tautoShow: true,\r\n\t\t\ttitle: '',\r\n\t\t\tmodal:false\r\n\t\t}, options);\r\n\t};\r\n\t/**\r\n\t * 窗口显示配置\r\n\t * @param {type} options\r\n\t * @returns {Object}\r\n\t */\r\n\t$.showOptions = function(options) {\r\n\t\treturn $.extend(true, {}, defaultShow, options);\r\n\t};\r\n\t/**\r\n\t * 窗口默认配置\r\n\t * @param {type} options\r\n\t * @returns {Object}\r\n\t */\r\n\t$.windowOptions = function(options) {\r\n\t\treturn $.extend({\r\n\t\t\tscalable: false,\r\n\t\t\tbounce: \"\" //vertical\r\n\t\t}, options);\r\n\t};\r\n\t/**\r\n\t * plusReady\r\n\t * @param {type} callback\r\n\t * @returns {_L6.$}\r\n\t */\r\n\t$.plusReady = function(callback) {\r\n\t\tif (window.plus) {\r\n\t\t\tsetTimeout(function() { //解决callback与plusready事件的执行时机问题(典型案例:showWaiting,closeWaiting)\r\n\t\t\t\tcallback();\r\n\t\t\t}, 0);\r\n\t\t} else {\r\n\t\t\tdocument.addEventListener(\"plusready\", function() {\r\n\t\t\t\tcallback();\r\n\t\t\t}, false);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\t/**\r\n\t * 5+ event(5+没提供之前我自己实现)\r\n\t * @param {type} webview\r\n\t * @param {type} eventType\r\n\t * @param {type} data\r\n\t * @returns {undefined}\r\n\t */\r\n\t$.fire = function(webview, eventType, data) {\r\n\t\tif (webview) {\r\n\t\t\tif (data !== '') {\r\n\t\t\t\tdata = data || {};\r\n\t\t\t\tif ($.isPlainObject(data)) {\r\n\t\t\t\t\tdata = JSON.stringify(data || {}).replace(/\\'/g, \"\\\\u0027\").replace(/\\\\/g, \"\\\\u005c\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\twebview.evalJS(\"typeof mui!=='undefined'&&mui.receive('\" + eventType + \"','\" + data + \"')\");\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * 5+ event(5+没提供之前我自己实现)\r\n\t * @param {type} eventType\r\n\t * @param {type} data\r\n\t * @returns {undefined}\r\n\t */\r\n\t$.receive = function(eventType, data) {\r\n\t\tif (eventType) {\r\n\t\t\ttry {\r\n\t\t\t\tif (data) {\r\n\t\t\t\t\tdata = JSON.parse(data);\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {}\r\n\t\t\t$.trigger(document, eventType, data);\r\n\t\t}\r\n\t};\r\n\tvar triggerPreload = function(webview) {\r\n\t\tif (!webview.preloaded) {\r\n\t\t\t$.fire(webview, 'preload');\r\n\t\t\tvar list = webview.children();\r\n\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t$.fire(list[i], 'preload');\r\n\t\t\t}\r\n\t\t\twebview.preloaded = true;\r\n\t\t}\r\n\t};\r\n\tvar trigger = function(webview, eventType, timeChecked) {\r\n\t\tif (timeChecked) {\r\n\t\t\tif (!webview[eventType + 'ed']) {\r\n\t\t\t\t$.fire(webview, eventType);\r\n\t\t\t\tvar list = webview.children();\r\n\t\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t\t$.fire(list[i], eventType);\r\n\t\t\t\t}\r\n\t\t\t\twebview[eventType + 'ed'] = true;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\t$.fire(webview, eventType);\r\n\t\t\tvar list = webview.children();\r\n\t\t\tfor (var i = 0; i < list.length; i++) {\r\n\t\t\t\t$.fire(list[i], eventType);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t};\r\n\t/**\r\n\t * 打开新窗口\r\n\t * @param {string} url 要打开的页面地址\r\n\t * @param {string} id 指定页面ID\r\n\t * @param {object} options 可选:参数,等待,窗口,显示配置{params:{},waiting:{},styles:{},show:{}}\r\n\t */\r\n\t$.openWindow = function(url, id, options) {\r\n\t\tif (typeof url === 'object') {\r\n\t\t\toptions = url;\r\n\t\t\turl = options.url;\r\n\t\t\tid = options.id || url;\r\n\t\t} else {\r\n\t\t\tif (typeof id === 'object') {\r\n\t\t\t\toptions = id;\r\n\t\t\t\tid = url;\r\n\t\t\t} else {\r\n\t\t\t\tid = id || url;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!$.os.plus) {\r\n\t\t\t//TODO 先临时这么处理：手机上顶层跳，PC上parent跳\r\n\t\t\tif ($.os.ios || $.os.android) {\r\n\t\t\t\twindow.top.location.href = url;\r\n\t\t\t} else {\r\n\t\t\t\twindow.parent.location.href = url;\r\n\t\t\t}\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!window.plus) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\toptions = options || {};\r\n\t\tvar params = options.params || {};\r\n\t\tvar webview = null,\r\n\t\t\twebviewCache = null,\r\n\t\t\tnShow, nWaiting;\r\n\r\n\t\tif ($.webviews[id]) {\r\n\t\t\twebviewCache = $.webviews[id];\r\n\t\t\t//webview真实存在，才能获取\r\n\t\t\tif (plus.webview.getWebviewById(id)) {\r\n\t\t\t\twebview = webviewCache.webview;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (webviewCache && webview) { //已缓存\r\n\t\t\t//每次show都需要传递动画参数；\r\n\t\t\t//预加载的动画参数优先级：openWindow配置>preloadPages配置>mui默认配置；\r\n\t\t\tnShow = webviewCache.show;\r\n\t\t\tnShow = options.show ? $.extend(nShow, options.show) : nShow;\r\n\t\t\twebview.show(nShow.aniShow, nShow.duration, function() {\r\n\t\t\t\ttriggerPreload(webview);\r\n\t\t\t\ttrigger(webview, 'pagebeforeshow', false);\r\n\t\t\t});\r\n\r\n\t\t\twebviewCache.afterShowMethodName && webview.evalJS(webviewCache.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\r\n\t\t\treturn webview;\r\n\t\t} else { //新窗口\r\n\t\t\tif (options.createNew !== true) {\r\n\t\t\t\twebview = plus.webview.getWebviewById(id);\r\n\t\t\t\tif (webview) { //如果已存在\r\n\t\t\t\t\tnShow = $.showOptions(options.show);\r\n\t\t\t\t\tnShow.autoShow && webview.show(nShow.aniShow, nShow.duration, function() {\r\n\t\t\t\t\t\ttriggerPreload(webview);\r\n\t\t\t\t\t\ttrigger(webview, 'pagebeforeshow', false);\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn webview;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!url) {\r\n\t\t\t\t\t\tthrow new Error('webview[' + id + '] does not exist');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t//显示waiting\r\n\t\t\tvar waitingConfig = $.waitingOptions(options.waiting);\r\n\t\t\tif (waitingConfig.autoShow) {\r\n\t\t\t\tnWaiting = plus.nativeUI.showWaiting(waitingConfig.title, waitingConfig.options);\r\n\t\t\t}\r\n\t\t\t//创建页面\r\n\t\t\toptions = $.extend(options, {\r\n\t\t\t\tid: id,\r\n\t\t\t\turl: url\r\n\t\t\t});\r\n\r\n\t\t\twebview = $.createWindow(options);\r\n\t\t\t//显示\r\n\t\t\tnShow = $.showOptions(options.show);\r\n\t\t\tif (nShow.autoShow) {\r\n\t\t\t\tvar showWebview = function() {\r\n\t\t\t\t\t//关闭等待框\r\n\t\t\t\t\tif (nWaiting) {\r\n\t\t\t\t\t\tnWaiting.close();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//显示页面\r\n\t\t\t\t\twebview.show(nShow.aniShow, nShow.duration, function() {\r\n\t\t\t\t\t\t//titleUpdate事件发生较早，很多环境尚不具备\r\n\t\t\t\t\t\t// triggerPreload(webview);\r\n\t\t\t\t\t\t// trigger(webview, 'pagebeforeshow', false);\r\n\t\t\t\t\t});\r\n\t\t\t\t\twebview.showed = true;\r\n\t\t\t\t\toptions.afterShowMethodName && webview.evalJS(options.afterShowMethodName + '(\\'' + JSON.stringify(params) + '\\')');\r\n\t\t\t\t};\r\n\t\t\t\t//TODO 能走到这一步，应该不用判断url了吧？\r\n\t\t\t\tif (!url) {\r\n\t\t\t\t\tshowWebview();\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// webview.addEventListener(\"loaded\", showWebview, false);\r\n\t\t\t\t\t//titleUpdate触发时机早于loaded，更换为titleUpdate后，可以更早的显示webview\r\n\t\t\t\t\twebview.addEventListener(\"titleUpdate\", showWebview, false);\r\n\t\t\t\t\t//loaded事件发生后，触发预加载和pagebeforeshow事件\r\n\t\t\t\t\twebview.addEventListener(\"loaded\",function(){\r\n\t\t\t\t\t\ttriggerPreload(webview);\r\n\t\t\t\t\t\ttrigger(webview, 'pagebeforeshow', false);\r\n\t\t\t\t\t}, false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn webview;\r\n\t};\r\n\t/**\r\n\t * 根据配置信息创建一个webview\r\n\t * @param {type} options\r\n\t * @param {type} isCreate\r\n\t * @returns {webview}\r\n\t */\r\n\t$.createWindow = function(options, isCreate) {\r\n\t\tif (!window.plus) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar id = options.id || options.url;\r\n\t\tvar webview;\r\n\t\tif (options.preload) {\r\n\t\t\tif ($.webviews[id] && $.webviews[id].webview.getURL()) { //已经cache\r\n\t\t\t\twebview = $.webviews[id].webview;\r\n\t\t\t} else { //新增预加载窗口\r\n\t\t\t\t//preload\r\n\t\t\t\t//判断是否携带createNew参数，默认为false\r\n\t\t\t\tif (options.createNew !== true) {\r\n\t\t\t\t\twebview = plus.webview.getWebviewById(id);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//之前没有，那就新创建\r\n\t\t\t\tif (!webview) {\r\n\t\t\t\t\twebview = plus.webview.create(options.url, id, $.windowOptions(options.styles), $.extend({\r\n\t\t\t\t\t\tpreload: true\r\n\t\t\t\t\t}, options.extras));\r\n\t\t\t\t\tif (options.subpages) {\r\n\t\t\t\t\t\t$.each(options.subpages, function(index, subpage) {\r\n\t\t\t\t\t\t\tvar subpageId = subpage.id || subpage.url;\r\n\t\t\t\t\t\t\tif (subpageId) { //过滤空对象\r\n\t\t\t\t\t\t\t\tvar subWebview = plus.webview.getWebviewById(subpageId);\r\n\t\t\t\t\t\t\t\tif (!subWebview) { //如果该webview不存在，则创建\r\n\t\t\t\t\t\t\t\t\tsubWebview = plus.webview.create(subpage.url, subpageId, $.windowOptions(subpage.styles), $.extend({\r\n\t\t\t\t\t\t\t\t\t\tpreload: true\r\n\t\t\t\t\t\t\t\t\t}, subpage.extras));\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\twebview.append(subWebview);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t//TODO 理论上，子webview也应该计算到预加载队列中，但这样就麻烦了，要退必须退整体，否则可能出现问题；\r\n\t\t\t$.webviews[id] = {\r\n\t\t\t\twebview: webview, //目前仅preload的缓存webview\r\n\t\t\t\tpreload: true,\r\n\t\t\t\tshow: $.showOptions(options.show),\r\n\t\t\t\tafterShowMethodName: options.afterShowMethodName //就不应该用evalJS。应该是通过事件消息通讯\r\n\t\t\t};\r\n\t\t\t//索引该预加载窗口\r\n\t\t\tvar preloads = $.data.preloads;\r\n\t\t\tvar index = preloads.indexOf(id);\r\n\t\t\tif (~index) { //删除已存在的(变相调整插入位置)\r\n\t\t\t\tpreloads.splice(index, 1);\r\n\t\t\t}\r\n\t\t\tpreloads.push(id);\r\n\t\t\tif (preloads.length > $.options.preloadLimit) {\r\n\t\t\t\t//先进先出\r\n\t\t\t\tvar first = $.data.preloads.shift();\r\n\t\t\t\tvar webviewCache = $.webviews[first];\r\n\t\t\t\tif (webviewCache && webviewCache.webview) {\r\n\t\t\t\t\t//需要将自己打开的所有页面，全部close；\r\n\t\t\t\t\t//关闭该预加载webview\r\n\t\t\t\t\t$.closeAll(webviewCache.webview);\r\n\t\t\t\t}\r\n\t\t\t\t//删除缓存\r\n\t\t\t\tdelete $.webviews[first];\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tif (isCreate !== false) { //直接创建非预加载窗口\r\n\t\t\t\twebview = plus.webview.create(options.url, id, $.windowOptions(options.styles), options.extras);\r\n\t\t\t\tif (options.subpages) {\r\n\t\t\t\t\t$.each(options.subpages, function(index, subpage) {\r\n\t\t\t\t\t\tvar subpageId = subpage.id || subpage.url;\r\n\t\t\t\t\t\tvar subWebview = plus.webview.getWebviewById(subpageId);\r\n\t\t\t\t\t\tif (!subWebview) {\r\n\t\t\t\t\t\t\tsubWebview = plus.webview.create(subpage.url, subpageId, $.windowOptions(subpage.styles), subpage.extras);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twebview.append(subWebview);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn webview;\r\n\t};\r\n\r\n\t/**\r\n\t * 预加载\r\n\t */\r\n\t$.preload = function(options) {\r\n\t\t//调用预加载函数，不管是否传递preload参数，强制变为true\r\n\t\tif (!options.preload) {\r\n\t\t\toptions.preload = true;\r\n\t\t}\r\n\t\treturn $.createWindow(options);\r\n\t};\r\n\r\n\t/**\r\n\t *关闭当前webview打开的所有webview；\r\n\t */\r\n\t$.closeOpened = function(webview) {\r\n\t\tvar opened = webview.opened();\r\n\t\tif (opened) {\r\n\t\t\tfor (var i = 0, len = opened.length; i < len; i++) {\r\n\t\t\t\tvar openedWebview = opened[i];\r\n\t\t\t\tvar open_open = openedWebview.opened();\r\n\t\t\t\tif (open_open && open_open.length > 0) {\r\n\t\t\t\t\t$.closeOpened(openedWebview);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//如果直接孩子节点，就不用关闭了，因为父关闭的时候，会自动关闭子；\r\n\t\t\t\t\tif (openedWebview.parent() !== webview) {\r\n\t\t\t\t\t\topenedWebview.close('none');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t$.closeAll = function(webview, aniShow) {\r\n\t\t$.closeOpened(webview);\r\n\t\tif (aniShow) {\r\n\t\t\twebview.close(aniShow);\r\n\t\t} else {\r\n\t\t\twebview.close();\r\n\t\t}\r\n\t};\r\n\r\n\t/**\r\n\t * 批量创建webview\r\n\t * @param {type} options\r\n\t * @returns {undefined}\r\n\t */\r\n\t$.createWindows = function(options) {\r\n\t\t$.each(options, function(index, option) {\r\n\t\t\t//初始化预加载窗口(创建)和非预加载窗口(仅配置，不创建)\r\n\t\t\t$.createWindow(option, false);\r\n\t\t});\r\n\t};\r\n\t/**\r\n\t * 创建当前页面的子webview\r\n\t * @param {type} options\r\n\t * @returns {webview}\r\n\t */\r\n\t$.appendWebview = function(options) {\r\n\t\tif (!window.plus) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar id = options.id || options.url;\r\n\t\tvar webview;\r\n\t\tif (!$.webviews[id]) { //保证执行一遍\r\n\t\t\t//TODO 这里也有隐患，比如某个webview不是作为subpage创建的，而是作为target webview的话；\r\n\t\t\tif (!plus.webview.getWebviewById(id)) {\r\n\t\t\t\twebview = plus.webview.create(options.url, id, options.styles, options.extras);\r\n\t\t\t}\r\n\t\t\t//之前的实现方案：子窗口loaded之后再append到父窗口中；\r\n\t\t\t//问题：部分子窗口loaded事件发生较晚，此时执行父窗口的children方法会返回空，导致父子通讯失败；\r\n\t\t\t//     比如父页面执行完preload事件后，需触发子页面的preload事件，此时未append的话，就无法触发；\r\n\t\t\t//修改方式：不再监控loaded事件，直接append\r\n\t\t\t//by chb@20150521\r\n\t\t\t// webview.addEventListener('loaded', function() {\r\n\t\t\tplus.webview.currentWebview().append(webview);\r\n\t\t\t// });\r\n\t\t\t$.webviews[id] = options;\r\n\r\n\t\t}\r\n\t\treturn webview;\r\n\t};\r\n\r\n\t//全局webviews\r\n\t$.webviews = {};\r\n\t//预加载窗口索引\r\n\t$.data.preloads = [];\r\n\t//$.currentWebview\r\n\t$.plusReady(function() {\r\n\t\t$.currentWebview = plus.webview.currentWebview();\r\n\t});\r\n\t$.addInit({\r\n\t\tname: '5+',\r\n\t\tindex: 100,\r\n\t\thandle: function() {\r\n\t\t\tvar options = $.options;\r\n\t\t\tvar subpages = options.subpages || [];\r\n\t\t\tif ($.os.plus) {\r\n\t\t\t\t$.plusReady(function() {\r\n\t\t\t\t\t//TODO  这里需要判断一下，最好等子窗口加载完毕后，再调用主窗口的show方法；\r\n\t\t\t\t\t//或者：在openwindow方法中，监听实现；\r\n\t\t\t\t\t$.each(subpages, function(index, subpage) {\r\n\t\t\t\t\t\t$.appendWebview(subpage);\r\n\t\t\t\t\t});\r\n\t\t\t\t\t//判断是否首页\r\n\t\t\t\t\tif (plus.webview.currentWebview() === plus.webview.getWebviewById(plus.runtime.appid)) {\r\n\t\t\t\t\t\t$.isHomePage = true;\r\n\t\t\t\t\t\t//首页需要自己激活预加载；\r\n\t\t\t\t\t\t//timeout因为子页面loaded之后才append的，防止子页面尚未append、从而导致其preload未触发的问题；\r\n\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\ttriggerPreload(plus.webview.currentWebview());\r\n\t\t\t\t\t\t}, 300);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//设置ios顶部状态栏颜色；\r\n\t\t\t\t\tif ($.os.ios && $.options.statusBarBackground) {\r\n\t\t\t\t\t\tplus.navigator.setStatusBarBackground($.options.statusBarBackground);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif ($.os.android && parseFloat($.os.version) < 4.4) {\r\n\t\t\t\t\t\t//解决Android平台4.4版本以下，resume后，父窗体标题延迟渲染的问题；\r\n\t\t\t\t\t\tif (plus.webview.currentWebview().parent() == null) {\r\n\t\t\t\t\t\t\tdocument.addEventListener(\"resume\", function() {\r\n\t\t\t\t\t\t\t\tvar body = document.body;\r\n\t\t\t\t\t\t\t\tbody.style.display = 'none';\r\n\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\tbody.style.display = '';\r\n\t\t\t\t\t\t\t\t}, 10);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t//已支持iframe嵌入\r\n\t\t\t\t//\t\t\t\tif (subpages.length > 0) {\r\n\t\t\t\t//\t\t\t\t\tvar err = document.createElement('div');\r\n\t\t\t\t//\t\t\t\t\terr.className = 'mui-error';\r\n\t\t\t\t//\t\t\t\t\t//文字描述\r\n\t\t\t\t//\t\t\t\t\tvar span = document.createElement('span');\r\n\t\t\t\t//\t\t\t\t\tspan.innerHTML = '在该浏览器下，不支持创建子页面，具体参考';\r\n\t\t\t\t//\t\t\t\t\terr.appendChild(span);\r\n\t\t\t\t//\t\t\t\t\tvar a = document.createElement('a');\r\n\t\t\t\t//\t\t\t\t\ta.innerHTML = '\"mui框架适用场景\"';\r\n\t\t\t\t//\t\t\t\t\ta.href = 'http://ask.dcloud.net.cn/article/113';\r\n\t\t\t\t//\t\t\t\t\terr.appendChild(a);\r\n\t\t\t\t//\t\t\t\t\tdocument.body.appendChild(err);\r\n\t\t\t\t//\t\t\t\t\tconsole.log('在该浏览器下，不支持创建子页面');\r\n\t\t\t\t//\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t});\r\n\twindow.addEventListener('preload', function() {\r\n\t\t//处理预加载部分\r\n\t\tvar webviews = $.options.preloadPages || [];\r\n\t\t$.plusReady(function() {\r\n\t\t\t$.each(webviews, function(index, webview) {\r\n\t\t\t\t$.createWindow($.extend(webview, {\r\n\t\t\t\t\tpreload: true\r\n\t\t\t\t}));\r\n\t\t\t});\r\n\r\n\t\t});\r\n\t});\r\n\t$.supportStatusbarOffset = function() {\r\n\t\treturn $.os.plus && $.os.ios && parseFloat($.os.version) >= 7;\r\n\t};\r\n\t$.ready(function() {\r\n\t\t//标识当前环境支持statusbar\r\n\t\tif ($.supportStatusbarOffset()) {\r\n\t\t\tdocument.body.classList.add('mui-statusbar');\r\n\t\t}\r\n\t});\r\n})(mui);\r\n/**\r\n * mui back\r\n * @param {type} $\r\n * @param {type} window\r\n * @returns {undefined}\r\n */\r\n(function($, window) {\r\n\t/**\r\n\t * register back\r\n\t * @param {type} back\r\n\t * @returns {$.gestures}\r\n\t */\r\n\t$.addBack = function(back) {\r\n\t\treturn $.addAction('backs', back);\r\n\t};\r\n\t/**\r\n\t * default\r\n\t */\r\n\t$.addBack({\r\n\t\tname: 'browser',\r\n\t\tindex: 100,\r\n\t\thandle: function() {\r\n\t\t\tif (window.history.length > 1) {\r\n\t\t\t\twindow.history.back();\r\n\t\t\t\treturn true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t}\r\n\t});\r\n\t/**\r\n\t * 后退\r\n\t */\r\n\t$.back = function() {\r\n\t\tif (typeof $.options.beforeback === 'function') {\r\n\t\t\tif ($.options.beforeback() === false) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\t$.doAction('backs');\r\n\t};\r\n\twindow.addEventListener('tap', function(e) {\r\n\t\tvar action = $.targets.action;\r\n\t\tif (action && action.classList.contains('mui-action-back')) {\r\n\t\t\t$.back();\r\n\t\t\t$.targets.action = false;\r\n\t\t}\r\n\t});\r\n\twindow.addEventListener('swiperight', function(e) {\r\n\t\tvar detail = e.detail;\r\n\t\tif ($.options.swipeBack === true && Math.abs(detail.angle) < 3) {\r\n\t\t\t$.back();\r\n\t\t}\r\n\t});\r\n\r\n})(mui, window);\r\n/**\r\n * mui back 5+\r\n * @param {type} $\r\n * @param {type} window\r\n * @returns {undefined}\r\n */\r\n(function($, window) {\r\n\tif ($.os.plus && $.os.android) {\r\n\t\t$.addBack({\r\n\t\t\tname: 'mui',\r\n\t\t\tindex: 5,\r\n\t\t\thandle: function() {\r\n\t\t\t\t//后续重新设计此处，将back放到各个空间内部实现\r\n\t\t\t\t//popover\r\n\t\t\t\tif ($.targets._popover && $.targets._popover.classList.contains('mui-active')) {\r\n\t\t\t\t\t$($.targets._popover).popover('hide');\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\t//offcanvas\r\n\t\t\t\tvar offCanvas = document.querySelector('.mui-off-canvas-wrap.mui-active');\r\n\t\t\t\tif (offCanvas) {\r\n\t\t\t\t\t$(offCanvas).offCanvas('close');\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\tvar previewImage = $.isFunction($.getPreviewImage) && $.getPreviewImage();\r\n\t\t\t\tif (previewImage && previewImage.isShown()) {\r\n\t\t\t\t\tpreviewImage.close();\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\t//popup\r\n\t\t\t\treturn $.closePopup();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t//首次按下back按键的时间\r\n\t$.__back__first = null;\r\n\t/**\r\n\t * 5+ back\r\n\t */\r\n\t$.addBack({\r\n\t\tname: '5+',\r\n\t\tindex: 10,\r\n\t\thandle: function() {\r\n\t\t\tif (!window.plus) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tvar wobj = plus.webview.currentWebview();\r\n\t\t\tvar parent = wobj.parent();\r\n\t\t\tif (parent) {\r\n\t\t\t\tparent.evalJS('mui&&mui.back();');\r\n\t\t\t} else {\r\n\t\t\t\twobj.canBack(function(e) {\r\n\t\t\t\t\t//by chb 暂时注释，在碰到类似popover之类的锚点的时候，需多次点击才能返回；\r\n\t\t\t\t\tif (e.canBack) { //webview history back\r\n\t\t\t\t\t\twindow.history.back();\r\n\t\t\t\t\t} else { //webview close or hide\r\n\t\t\t\t\t\t//fixed by fxy 此处不应该用opener判断，因为用户有可能自己close掉当前窗口的opener。这样的话。opener就为空了，导致不能执行close\r\n\t\t\t\t\t\tif (wobj.id === plus.runtime.appid) { //首页\r\n\t\t\t\t\t\t\t//首页不存在opener的情况下，后退实际上应该是退出应用；\r\n\t\t\t\t\t\t\t//首次按键，提示‘再按一次退出应用’\r\n\t\t\t\t\t\t\tif (!$.__back__first) {\r\n\t\t\t\t\t\t\t\t$.__back__first = new Date().getTime();\r\n\t\t\t\t\t\t\t\tmui.toast('再按一次退出应用');\r\n\t\t\t\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\t\t\t\t$.__back__first = null;\r\n\t\t\t\t\t\t\t\t}, 2000);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (new Date().getTime() - $.__back__first < 2000) {\r\n\t\t\t\t\t\t\t\t\tplus.runtime.quit();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else { //其他页面，\r\n\t\t\t\t\t\t\tif (wobj.preload) {\r\n\t\t\t\t\t\t\t\twobj.hide(\"auto\");\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t//关闭页面时，需要将其打开的所有子页面全部关闭；\r\n\t\t\t\t\t\t\t\t$.closeAll(wobj);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t}\r\n\t});\r\n\r\n\r\n\t$.menu = function() {\r\n\t\tvar menu = document.querySelector('.mui-action-menu');\r\n\t\tif (menu) {\r\n\t\t\t$.trigger(menu, $.EVENT_START); //临时处理menu无touchstart的话，找不到当前targets的问题\r\n\t\t\t$.trigger(menu, 'tap');\r\n\t\t} else { //执行父窗口的menu\r\n\t\t\tif (window.plus) {\r\n\t\t\t\tvar wobj = $.currentWebview;\r\n\t\t\t\tvar parent = wobj.parent();\r\n\t\t\t\tif (parent) { //又得evalJS\r\n\t\t\t\t\tparent.evalJS('mui&&mui.menu();');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar __back = function() {\r\n\t\t$.back();\r\n\t};\r\n\tvar __menu = function() {\r\n\t\t$.menu();\r\n\t};\r\n\t//默认监听\r\n\t$.plusReady(function() {\r\n\t\tif ($.options.keyEventBind.backbutton) {\r\n\t\t\tplus.key.addEventListener('backbutton', __back, false);\r\n\t\t}\r\n\t\tif ($.options.keyEventBind.menubutton) {\r\n\t\t\tplus.key.addEventListener('menubutton', __menu, false);\r\n\t\t}\r\n\t});\r\n\t//处理按键监听事件\r\n\t$.addInit({\r\n\t\tname: 'keyEventBind',\r\n\t\tindex: 1000,\r\n\t\thandle: function() {\r\n\t\t\t$.plusReady(function() {\r\n\t\t\t\t//如果不为true，则移除默认监听\r\n\t\t\t\tif (!$.options.keyEventBind.backbutton) {\r\n\t\t\t\t\tplus.key.removeEventListener('backbutton', __back);\r\n\t\t\t\t}\r\n\t\t\t\tif (!$.options.keyEventBind.menubutton) {\r\n\t\t\t\t\tplus.key.removeEventListener('menubutton', __menu);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t});\r\n})(mui, window);\r\n/**\r\n * mui.init pulldownRefresh\r\n * @param {type} $\r\n * @returns {undefined}\r\n */\r\n(function($) {\r\n\t$.addInit({\r\n\t\tname: 'pullrefresh',\r\n\t\tindex: 1000,\r\n\t\thandle: function() {\r\n\t\t\tvar options = $.options;\r\n\t\t\tvar pullRefreshOptions = options.pullRefresh || {};\r\n\t\t\tvar hasPulldown = pullRefreshOptions.down && pullRefreshOptions.down.hasOwnProperty('callback');\r\n\t\t\tvar hasPullup = pullRefreshOptions.up && pullRefreshOptions.up.hasOwnProperty('callback');\r\n\t\t\tif (hasPulldown || hasPullup) {\r\n\t\t\t\tvar container = pullRefreshOptions.container;\r\n\t\t\t\tif (container) {\r\n\t\t\t\t\tvar $container = $(container);\r\n\t\t\t\t\tif ($container.length === 1) {\r\n\t\t\t\t\t\tif ($.os.plus && $.os.android) { //android 5+\r\n\t\t\t\t\t\t\t$.plusReady(function() {\r\n\t\t\t\t\t\t\t\tvar webview = plus.webview.currentWebview();\r\n\t\t\t\t\t\t\t\tif (hasPullup) {\r\n\t\t\t\t\t\t\t\t\t//当前页面初始化pullup\r\n\t\t\t\t\t\t\t\t\tvar upOptions = {};\r\n\t\t\t\t\t\t\t\t\tupOptions.up = pullRefreshOptions.up;\r\n\t\t\t\t\t\t\t\t\tupOptions.webviewId = webview.id || webview.getURL();\r\n\t\t\t\t\t\t\t\t\t$container.pullRefresh(upOptions);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (hasPulldown) {\r\n\t\t\t\t\t\t\t\t\tvar parent = webview.parent();\r\n\t\t\t\t\t\t\t\t\tvar id = webview.id || webview.getURL();\r\n\t\t\t\t\t\t\t\t\tif (parent) {\r\n\t\t\t\t\t\t\t\t\t\tif (!hasPullup) { //如果没有上拉加载，需要手动初始化一个默认的pullRefresh，以便当前页面容器可以调用endPulldownToRefresh等方法\r\n\t\t\t\t\t\t\t\t\t\t\t$container.pullRefresh({\r\n\t\t\t\t\t\t\t\t\t\t\t\twebviewId: id\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tvar downOptions = {\r\n\t\t\t\t\t\t\t\t\t\t\twebviewId: id\r\n\t\t\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t\t\t\tdownOptions.down = $.extend({}, pullRefreshOptions.down);\r\n\t\t\t\t\t\t\t\t\t\tdownOptions.down.callback = '_CALLBACK';\r\n\t\t\t\t\t\t\t\t\t\t//父页面初始化pulldown\r\n\t\t\t\t\t\t\t\t\t\tparent.evalJS(\"mui&&mui(document.querySelector('.mui-content')).pullRefresh('\" + JSON.stringify(downOptions) + \"')\");\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t$container.pullRefresh(pullRefreshOptions);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n})(mui);\r\n/**\r\n * mui ajax\r\n * @param {type} $\r\n * @returns {undefined}\r\n */\r\n(function($, window, undefined) {\r\n\r\n\tvar jsonType = 'application/json';\r\n\tvar htmlType = 'text/html';\r\n\tvar rscript = /<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi;\r\n\tvar scriptTypeRE = /^(?:text|application)\\/javascript/i;\r\n\tvar xmlTypeRE = /^(?:text|application)\\/xml/i;\r\n\tvar blankRE = /^\\s*$/;\r\n\r\n\t$.ajaxSettings = {\r\n\t\ttype: 'GET',\r\n\t\tbeforeSend: $.noop,\r\n\t\tsuccess: $.noop,\r\n\t\terror: $.noop,\r\n\t\tcomplete: $.noop,\r\n\t\tcontext: null,\r\n\t\txhr: function(protocol) {\r\n\t\t\treturn new window.XMLHttpRequest();\r\n\t\t},\r\n\t\taccepts: {\r\n\t\t\tscript: 'text/javascript, application/javascript, application/x-javascript',\r\n\t\t\tjson: jsonType,\r\n\t\t\txml: 'application/xml, text/xml',\r\n\t\t\thtml: htmlType,\r\n\t\t\ttext: 'text/plain'\r\n\t\t},\r\n\t\ttimeout: 0,\r\n\t\tprocessData: true,\r\n\t\tcache: true\r\n\t};\r\n\tvar ajaxBeforeSend = function(xhr, settings) {\r\n\t\tvar context = settings.context\r\n\t\tif (settings.beforeSend.call(context, xhr, settings) === false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\tvar ajaxSuccess = function(data, xhr, settings) {\r\n\t\tsettings.success.call(settings.context, data, 'success', xhr);\r\n\t\tajaxComplete('success', xhr, settings);\r\n\t};\r\n\t// type: \"timeout\", \"error\", \"abort\", \"parsererror\"\r\n\tvar ajaxError = function(error, type, xhr, settings) {\r\n\t\tsettings.error.call(settings.context, xhr, type, error);\r\n\t\tajaxComplete(type, xhr, settings);\r\n\t};\r\n\t// status: \"success\", \"notmodified\", \"error\", \"timeout\", \"abort\", \"parsererror\"\r\n\tvar ajaxComplete = function(status, xhr, settings) {\r\n\t\tsettings.complete.call(settings.context, xhr, status);\r\n\t};\r\n\r\n\tvar serialize = function(params, obj, traditional, scope) {\r\n\t\tvar type, array = $.isArray(obj),\r\n\t\t\thash = $.isPlainObject(obj);\r\n\t\t$.each(obj, function(key, value) {\r\n\t\t\ttype = $.type(value);\r\n\t\t\tif (scope) {\r\n\t\t\t\tkey = traditional ? scope :\r\n\t\t\t\t\tscope + '[' + (hash || type === 'object' || type === 'array' ? key : '') + ']';\r\n\t\t\t}\r\n\t\t\t// handle data in serializeArray() format\r\n\t\t\tif (!scope && array) {\r\n\t\t\t\tparams.add(value.name, value.value);\r\n\t\t\t}\r\n\t\t\t// recurse into nested objects\r\n\t\t\telse if (type === \"array\" || (!traditional && type === \"object\")) {\r\n\t\t\t\tserialize(params, value, traditional, key);\r\n\t\t\t} else {\r\n\t\t\t\tparams.add(key, value);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\tvar serializeData = function(options) {\r\n\t\tif (options.processData && options.data && typeof options.data !== \"string\") {\r\n\t\t\toptions.data = $.param(options.data, options.traditional);\r\n\t\t}\r\n\t\tif (options.data && (!options.type || options.type.toUpperCase() === 'GET')) {\r\n\t\t\toptions.url = appendQuery(options.url, options.data);\r\n\t\t\toptions.data = undefined;\r\n\t\t}\r\n\t};\r\n\tvar appendQuery = function(url, query) {\r\n\t\tif (query === '') {\r\n\t\t\treturn url;\r\n\t\t}\r\n\t\treturn (url + '&' + query).replace(/[&?]{1,2}/, '?');\r\n\t};\r\n\tvar mimeToDataType = function(mime) {\r\n\t\tif (mime) {\r\n\t\t\tmime = mime.split(';', 2)[0];\r\n\t\t}\r\n\t\treturn mime && (mime === htmlType ? 'html' :\r\n\t\t\tmime === jsonType ? 'json' :\r\n\t\t\tscriptTypeRE.test(mime) ? 'script' :\r\n\t\t\txmlTypeRE.test(mime) && 'xml') || 'text';\r\n\t};\r\n\tvar parseArguments = function(url, data, success, dataType) {\r\n\t\tif ($.isFunction(data)) {\r\n\t\t\tdataType = success, success = data, data = undefined;\r\n\t\t}\r\n\t\tif (!$.isFunction(success)) {\r\n\t\t\tdataType = success, success = undefined;\r\n\t\t}\r\n\t\treturn {\r\n\t\t\turl: url,\r\n\t\t\tdata: data,\r\n\t\t\tsuccess: success,\r\n\t\t\tdataType: dataType\r\n\t\t};\r\n\t};\r\n\t$.ajax = function(url, options) {\r\n\t\tif (typeof url === \"object\") {\r\n\t\t\toptions = url;\r\n\t\t\turl = undefined;\r\n\t\t}\r\n\t\tvar settings = options || {};\r\n\t\tsettings.url = url || settings.url;\r\n\t\tfor (var key in $.ajaxSettings) {\r\n\t\t\tif (settings[key] === undefined) {\r\n\t\t\t\tsettings[key] = $.ajaxSettings[key];\r\n\t\t\t}\r\n\t\t}\r\n\t\tserializeData(settings);\r\n\t\tvar dataType = settings.dataType;\r\n\r\n\t\tif (settings.cache === false || ((!options || options.cache !== true) && ('script' === dataType))) {\r\n\t\t\tsettings.url = appendQuery(settings.url, '_=' + $.now());\r\n\t\t}\r\n\t\tvar mime = settings.accepts[dataType && dataType.toLowerCase()];\r\n\t\tvar headers = {};\r\n\t\tvar setHeader = function(name, value) {\r\n\t\t\theaders[name.toLowerCase()] = [name, value];\r\n\t\t};\r\n\t\tvar protocol = /^([\\w-]+:)\\/\\//.test(settings.url) ? RegExp.$1 : window.location.protocol;\r\n\t\tvar xhr = settings.xhr(settings);\r\n\t\tvar nativeSetHeader = xhr.setRequestHeader;\r\n\t\tvar abortTimeout;\r\n\r\n\t\tsetHeader('X-Requested-With', 'XMLHttpRequest');\r\n\t\tsetHeader('Accept', mime || '*/*');\r\n\t\tif (!!(mime = settings.mimeType || mime)) {\r\n\t\t\tif (mime.indexOf(',') > -1) {\r\n\t\t\t\tmime = mime.split(',', 2)[0];\r\n\t\t\t}\r\n\t\t\txhr.overrideMimeType && xhr.overrideMimeType(mime);\r\n\t\t}\r\n\t\tif (settings.contentType || (settings.contentType !== false && settings.data && settings.type.toUpperCase() !== 'GET')) {\r\n\t\t\tsetHeader('Content-Type', settings.contentType || 'application/x-www-form-urlencoded');\r\n\t\t}\r\n\t\tif (settings.headers) {\r\n\t\t\tfor (var name in settings.headers)\r\n\t\t\t\tsetHeader(name, settings.headers[name]);\r\n\t\t}\r\n\t\txhr.setRequestHeader = setHeader;\r\n\r\n\t\txhr.onreadystatechange = function() {\r\n\t\t\tif (xhr.readyState === 4) {\r\n\t\t\t\txhr.onreadystatechange = $.noop;\r\n\t\t\t\tclearTimeout(abortTimeout);\r\n\t\t\t\tvar result, error = false;\r\n\t\t\t\tvar isLocal = protocol === 'file:';\r\n\t\t\t\tif ((xhr.status >= 200 && xhr.status < 300) || xhr.status === 304 || (xhr.status === 0 && isLocal && xhr.responseText)) {\r\n\t\t\t\t\tdataType = dataType || mimeToDataType(settings.mimeType || xhr.getResponseHeader('content-type'));\r\n\t\t\t\t\tresult = xhr.responseText;\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\t// http://perfectionkills.com/global-eval-what-are-the-options/\r\n\t\t\t\t\t\tif (dataType === 'script') {\r\n\t\t\t\t\t\t\t(1, eval)(result);\r\n\t\t\t\t\t\t} else if (dataType === 'xml') {\r\n\t\t\t\t\t\t\tresult = xhr.responseXML;\r\n\t\t\t\t\t\t} else if (dataType === 'json') {\r\n\t\t\t\t\t\t\tresult = blankRE.test(result) ? null : $.parseJSON(result);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\terror = e;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (error) {\r\n\t\t\t\t\t\tajaxError(error, 'parsererror', xhr, settings);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tajaxSuccess(result, xhr, settings);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar status = xhr.status ? 'error' : 'abort';\r\n\t\t\t\t\tvar statusText = xhr.statusText || null;\r\n\t\t\t\t\tif (isLocal) {\r\n\t\t\t\t\t\tstatus = 'error';\r\n\t\t\t\t\t\tstatusText = '404';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tajaxError(statusText, status, xhr, settings);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tif (ajaxBeforeSend(xhr, settings) === false) {\r\n\t\t\txhr.abort();\r\n\t\t\tajaxError(null, 'abort', xhr, settings);\r\n\t\t\treturn xhr;\r\n\t\t}\r\n\r\n\t\tif (settings.xhrFields) {\r\n\t\t\tfor (var name in settings.xhrFields) {\r\n\t\t\t\txhr[name] = settings.xhrFields[name];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar async = 'async' in settings ? settings.async : true;\r\n\r\n\t\txhr.open(settings.type.toUpperCase(), settings.url, async, settings.username, settings.password);\r\n\r\n\t\tfor (var name in headers) {\r\n\t\t\tnativeSetHeader.apply(xhr, headers[name]);\r\n\t\t}\r\n\t\tif (settings.timeout > 0) {\r\n\t\t\tabortTimeout = setTimeout(function() {\r\n\t\t\t\txhr.onreadystatechange = $.noop;\r\n\t\t\t\txhr.abort();\r\n\t\t\t\tajaxError(null, 'timeout', xhr, settings);\r\n\t\t\t}, settings.timeout);\r\n\t\t}\r\n\t\txhr.send(settings.data ? settings.data : null);\r\n\t\treturn xhr;\r\n\t};\r\n\r\n\r\n\t$.param = function(obj, traditional) {\r\n\t\tvar params = [];\r\n\t\tparams.add = function(k, v) {\r\n\t\t\tthis.push(encodeURIComponent(k) + '=' + encodeURIComponent(v));\r\n\t\t};\r\n\t\tserialize(params, obj, traditional);\r\n\t\treturn params.join('&').replace(/%20/g, '+');\r\n\t};\r\n\t$.get = function( /* url, data, success, dataType */ ) {\r\n\t\treturn $.ajax(parseArguments.apply(null, arguments));\r\n\t};\r\n\r\n\t$.post = function( /* url, data, success, dataType */ ) {\r\n\t\tvar options = parseArguments.apply(null, arguments);\r\n\t\toptions.type = 'POST';\r\n\t\treturn $.ajax(options);\r\n\t};\r\n\r\n\t$.getJSON = function( /* url, data, success */ ) {\r\n\t\tvar options = parseArguments.apply(null, arguments);\r\n\t\toptions.dataType = 'json';\r\n\t\treturn $.ajax(options);\r\n\t};\r\n\r\n\t$.fn.load = function(url, data, success) {\r\n\t\tif (!this.length)\r\n\t\t\treturn this;\r\n\t\tvar self = this,\r\n\t\t\tparts = url.split(/\\s/),\r\n\t\t\tselector,\r\n\t\t\toptions = parseArguments(url, data, success),\r\n\t\t\tcallback = options.success;\r\n\t\tif (parts.length > 1)\r\n\t\t\toptions.url = parts[0], selector = parts[1];\r\n\t\toptions.success = function(response) {\r\n\t\t\tif (selector) {\r\n\t\t\t\tvar div = document.createElement('div');\r\n\t\t\t\tdiv.innerHTML = response.replace(rscript, \"\");\r\n\t\t\t\tvar selectorDiv = document.createElement('div');\r\n\t\t\t\tvar childs = div.querySelectorAll(selector);\r\n\t\t\t\tif (childs && childs.length > 0) {\r\n\t\t\t\t\tfor (var i = 0, len = childs.length; i < len; i++) {\r\n\t\t\t\t\t\tselectorDiv.appendChild(childs[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tself[0].innerHTML = selectorDiv.innerHTML;\r\n\t\t\t} else {\r\n\t\t\t\tself[0].innerHTML = response;\r\n\t\t\t}\r\n\t\t\tcallback && callback.apply(self, arguments);\r\n\t\t};\r\n\t\t$.ajax(options);\r\n\t\treturn this;\r\n\t};\r\n\r\n})(mui, window);\r\n/**\r\n * 5+ ajax\r\n */\r\n(function($) {\r\n\tvar originAnchor = document.createElement('a');\r\n\toriginAnchor.href = window.location.href;\r\n\t$.plusReady(function() {\r\n\t\t$.ajaxSettings = $.extend($.ajaxSettings, {\r\n\t\t\txhr: function(settings) {\r\n\t\t\t\tif (settings.crossDomain) { //强制使用plus跨域\r\n\t\t\t\t\treturn new plus.net.XMLHttpRequest();\r\n\t\t\t\t}\r\n\t\t\t\t//仅在webview的url为远程文件，且ajax请求的资源不同源下使用plus.net.XMLHttpRequest\r\n\t\t\t\tif (originAnchor.protocol !== 'file:') {\r\n\t\t\t\t\tvar urlAnchor = document.createElement('a');\r\n\t\t\t\t\turlAnchor.href = settings.url;\r\n\t\t\t\t\turlAnchor.href = urlAnchor.href;\r\n\t\t\t\t\tsettings.crossDomain = (originAnchor.protocol + '//' + originAnchor.host) !== (urlAnchor.protocol + '//' + urlAnchor.host);\r\n\t\t\t\t\tif (settings.crossDomain) {\r\n\t\t\t\t\t\treturn new plus.net.XMLHttpRequest();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\treturn new window.XMLHttpRequest();\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n})(mui);\r\n/**\r\n * mui layout(offset[,position,width,height...])\r\n * @param {type} $\r\n * @param {type} window\r\n * @param {type} undefined\r\n * @returns {undefined}\r\n */\r\n(function($, window, undefined) {\r\n\t$.offset = function(element) {\r\n\t\tvar box = {\r\n\t\t\ttop : 0,\r\n\t\t\tleft : 0\r\n\t\t};\r\n\t\tif ( typeof element.getBoundingClientRect !== undefined) {\r\n\t\t\tbox = element.getBoundingClientRect();\r\n\t\t}\r\n\t\treturn {\r\n\t\t\ttop : box.top + window.pageYOffset - element.clientTop,\r\n\t\t\tleft : box.left + window.pageXOffset - element.clientLeft\r\n\t\t};\r\n\t};\r\n})(mui, window);\r\n/**\r\n * mui animation\r\n */\r\n(function($, window) {\r\n\t/**\r\n\t * scrollTo\r\n\t */\r\n\t$.scrollTo = function(scrollTop, duration, callback) {\r\n\t\tduration = duration || 1000;\r\n\t\tvar scroll = function(duration) {\r\n\t\t\tif (duration <= 0) {\r\n\t\t\t\twindow.scrollTo(0, scrollTop);\r\n\t\t\t\tcallback && callback();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar distaince = scrollTop - window.scrollY;\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\twindow.scrollTo(0, window.scrollY + distaince / duration * 10);\r\n\t\t\t\tscroll(duration - 10);\r\n\t\t\t}, 16.7);\r\n\t\t};\r\n\t\tscroll(duration);\r\n\t};\r\n\t$.animationFrame = function(cb) {\r\n\t\tvar args, isQueued, context;\r\n\t\treturn function() {\r\n\t\t\targs = arguments;\r\n\t\t\tcontext = this;\r\n\t\t\tif (!isQueued) {\r\n\t\t\t\tisQueued = true;\r\n\t\t\t\trequestAnimationFrame(function() {\r\n\t\t\t\t\tcb.apply(context, args);\r\n\t\t\t\t\tisQueued = false;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t};\r\n\r\n})(mui, window);\r\n(function($) {\r\n\tvar initializing = false,\r\n\t\tfnTest = /xyz/.test(function() {\r\n\t\t\txyz;\r\n\t\t}) ? /\\b_super\\b/ : /.*/;\r\n\r\n\tvar Class = function() {};\r\n\tClass.extend = function(prop) {\r\n\t\tvar _super = this.prototype;\r\n\t\tinitializing = true;\r\n\t\tvar prototype = new this();\r\n\t\tinitializing = false;\r\n\t\tfor (var name in prop) {\r\n\t\t\tprototype[name] = typeof prop[name] == \"function\" &&\r\n\t\t\t\ttypeof _super[name] == \"function\" && fnTest.test(prop[name]) ?\r\n\t\t\t\t(function(name, fn) {\r\n\t\t\t\t\treturn function() {\r\n\t\t\t\t\t\tvar tmp = this._super;\r\n\r\n\t\t\t\t\t\tthis._super = _super[name];\r\n\r\n\t\t\t\t\t\tvar ret = fn.apply(this, arguments);\r\n\t\t\t\t\t\tthis._super = tmp;\r\n\r\n\t\t\t\t\t\treturn ret;\r\n\t\t\t\t\t};\r\n\t\t\t\t})(name, prop[name]) :\r\n\t\t\t\tprop[name];\r\n\t\t}\r\n\t\tfunction Class() {\r\n\t\t\tif (!initializing && this.init)\r\n\t\t\t\tthis.init.apply(this, arguments);\r\n\t\t}\r\n\t\tClass.prototype = prototype;\r\n\t\tClass.prototype.constructor = Class;\r\n\t\tClass.extend = arguments.callee;\r\n\t\treturn Class;\r\n\t};\r\n\t$.Class = Class;\r\n})(mui);\r\n(function($, document, undefined) {\r\n\tvar CLASS_PULL_TOP_POCKET = 'mui-pull-top-pocket';\r\n\tvar CLASS_PULL_BOTTOM_POCKET = 'mui-pull-bottom-pocket';\r\n\tvar CLASS_PULL = 'mui-pull';\r\n\tvar CLASS_PULL_LOADING = 'mui-pull-loading';\r\n\tvar CLASS_PULL_CAPTION = 'mui-pull-caption';\r\n\tvar CLASS_PULL_CAPTION_DOWN = 'mui-pull-caption-down';\r\n\tvar CLASS_PULL_CAPTION_REFRESH = 'mui-pull-caption-refresh';\r\n\tvar CLASS_PULL_CAPTION_NOMORE = 'mui-pull-caption-nomore';\r\n\r\n\tvar CLASS_ICON = 'mui-icon';\r\n\tvar CLASS_SPINNER = 'mui-spinner';\r\n\tvar CLASS_ICON_PULLDOWN = 'mui-icon-pulldown';\r\n\r\n\tvar CLASS_BLOCK = 'mui-block';\r\n\tvar CLASS_HIDDEN = 'mui-hidden';\r\n\tvar CLASS_VISIBILITY = 'mui-visibility';\r\n\r\n\tvar CLASS_LOADING_UP = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_ICON_PULLDOWN;\r\n\tvar CLASS_LOADING_DOWN = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_ICON_PULLDOWN;\r\n\tvar CLASS_LOADING = CLASS_PULL_LOADING + ' ' + CLASS_ICON + ' ' + CLASS_SPINNER;\r\n\r\n\tvar pocketHtml = ['<div class=\"' + CLASS_PULL + '\">', '<div class=\"{icon}\"></div>', '<div class=\"' + CLASS_PULL_CAPTION + '\">{contentrefresh}</div>', '</div>'].join('');\r\n\r\n\tvar PullRefresh = {\r\n\t\tinit: function(element, options) {\r\n\t\t\tthis._super(element, $.extend(true, {\r\n\t\t\t\tscrollY: true,\r\n\t\t\t\tscrollX: false,\r\n\t\t\t\tindicators: true,\r\n\t\t\t\tdeceleration: 0.003,\r\n\t\t\t\tdown: {\r\n\t\t\t\t\theight: 50,\r\n\t\t\t\t\tcontentinit: '下拉可以刷新',\r\n\t\t\t\t\tcontentdown: '下拉可以刷新',\r\n\t\t\t\t\tcontentover: '释放立即刷新',\r\n\t\t\t\t\tcontentrefresh: '正在刷新...'\r\n\t\t\t\t},\r\n\t\t\t\tup: {\r\n\t\t\t\t\theight: 50,\r\n\t\t\t\t\tauto: false,\r\n\t\t\t\t\tcontentinit: '上拉显示更多',\r\n\t\t\t\t\tcontentdown: '上拉显示更多',\r\n\t\t\t\t\tcontentrefresh: '正在加载...',\r\n\t\t\t\t\tcontentnomore: '没有更多数据了',\r\n\t\t\t\t\tduration: 300\r\n\t\t\t\t}\r\n\t\t\t}, options));\r\n\t\t},\r\n\t\t_init: function() {\r\n\t\t\tthis._super();\r\n\t\t\tthis._initPocket();\r\n\t\t},\r\n\t\t_initPulldownRefresh: function() {\r\n\t\t\tthis.pulldown = true;\r\n\t\t\tthis.pullPocket = this.topPocket;\r\n\t\t\tthis.pullPocket.classList.add(CLASS_BLOCK);\r\n\t\t\tthis.pullPocket.classList.add(CLASS_VISIBILITY);\r\n\t\t\tthis.pullCaption = this.topCaption;\r\n\t\t\tthis.pullLoading = this.topLoading;\r\n\t\t},\r\n\t\t_initPullupRefresh: function() {\r\n\t\t\tthis.pulldown = false;\r\n\t\t\tthis.pullPocket = this.bottomPocket;\r\n\t\t\tthis.pullPocket.classList.add(CLASS_BLOCK);\r\n\t\t\tthis.pullPocket.classList.add(CLASS_VISIBILITY);\r\n\t\t\tthis.pullCaption = this.bottomCaption;\r\n\t\t\tthis.pullLoading = this.bottomLoading;\r\n\t\t},\r\n\t\t_initPocket: function() {\r\n\t\t\tvar options = this.options;\r\n\t\t\tif (options.down && options.down.hasOwnProperty('callback')) {\r\n\t\t\t\tthis.topPocket = this.scroller.querySelector('.' + CLASS_PULL_TOP_POCKET);\r\n\t\t\t\tif (!this.topPocket) {\r\n\t\t\t\t\tthis.topPocket = this._createPocket(CLASS_PULL_TOP_POCKET, options.down, CLASS_LOADING_DOWN);\r\n\t\t\t\t\tthis.wrapper.insertBefore(this.topPocket, this.wrapper.firstChild);\r\n\t\t\t\t}\r\n\t\t\t\tthis.topLoading = this.topPocket.querySelector('.' + CLASS_PULL_LOADING);\r\n\t\t\t\tthis.topCaption = this.topPocket.querySelector('.' + CLASS_PULL_CAPTION);\r\n\t\t\t}\r\n\t\t\tif (options.up && options.up.hasOwnProperty('callback')) {\r\n\t\t\t\tthis.bottomPocket = this.scroller.querySelector('.' + CLASS_PULL_BOTTOM_POCKET);\r\n\t\t\t\tif (!this.bottomPocket) {\r\n\t\t\t\t\tthis.bottomPocket = this._createPocket(CLASS_PULL_BOTTOM_POCKET, options.up, CLASS_LOADING);\r\n\t\t\t\t\tthis.scroller.appendChild(this.bottomPocket);\r\n\t\t\t\t}\r\n\t\t\t\tthis.bottomLoading = this.bottomPocket.querySelector('.' + CLASS_PULL_LOADING);\r\n\t\t\t\tthis.bottomCaption = this.bottomPocket.querySelector('.' + CLASS_PULL_CAPTION);\r\n\t\t\t\t//TODO only for h5\r\n\t\t\t\tthis.wrapper.addEventListener('scrollbottom', this);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_createPocket: function(clazz, options, iconClass) {\r\n\t\t\tvar pocket = document.createElement('div');\r\n\t\t\tpocket.className = clazz;\r\n\t\t\tpocket.innerHTML = pocketHtml.replace('{contentrefresh}', options.contentinit).replace('{icon}', iconClass);\r\n\t\t\treturn pocket;\r\n\t\t},\r\n\t\t_resetPullDownLoading: function() {\r\n\t\t\tvar loading = this.pullLoading;\r\n\t\t\tif (loading) {\r\n\t\t\t\tthis.pullCaption.innerHTML = this.options.down.contentdown;\r\n\t\t\t\tloading.style.webkitTransition = \"\";\r\n\t\t\t\tloading.style.webkitTransform = \"\";\r\n\t\t\t\tloading.style.webkitAnimation = \"\";\r\n\t\t\t\tloading.className = CLASS_LOADING_DOWN;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_setCaptionClass: function(isPulldown, caption, title) {\r\n\t\t\tif (!isPulldown) {\r\n\t\t\t\tswitch (title) {\r\n\t\t\t\t\tcase this.options.up.contentdown:\r\n\t\t\t\t\t\tcaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase this.options.up.contentrefresh:\r\n\t\t\t\t\t\tcaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_REFRESH\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase this.options.up.contentnomore:\r\n\t\t\t\t\t\tcaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_NOMORE;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_setCaption: function(title, reset) {\r\n\t\t\tif (this.loading) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar options = this.options;\r\n\t\t\tvar pocket = this.pullPocket;\r\n\t\t\tvar caption = this.pullCaption;\r\n\t\t\tvar loading = this.pullLoading;\r\n\t\t\tvar isPulldown = this.pulldown;\r\n\t\t\tvar self = this;\r\n\t\t\tif (pocket) {\r\n\t\t\t\tif (reset) {\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tcaption.innerHTML = self.lastTitle = title;\r\n\t\t\t\t\t\tif (isPulldown) {\r\n\t\t\t\t\t\t\tloading.className = CLASS_LOADING_DOWN;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tself._setCaptionClass(false, caption, title);\r\n\t\t\t\t\t\t\tloading.className = CLASS_LOADING;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tloading.style.webkitAnimation = \"\";\r\n\t\t\t\t\t\tloading.style.webkitTransition = \"\";\r\n\t\t\t\t\t\tloading.style.webkitTransform = \"\";\r\n\t\t\t\t\t}, 100);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (title !== this.lastTitle) {\r\n\t\t\t\t\t\tcaption.innerHTML = title;\r\n\t\t\t\t\t\tif (isPulldown) {\r\n\t\t\t\t\t\t\tif (title === options.down.contentrefresh) {\r\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING;\r\n\t\t\t\t\t\t\t\tloading.style.webkitAnimation = \"spinner-spin 1s step-end infinite\";\r\n\t\t\t\t\t\t\t} else if (title === options.down.contentover) {\r\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING_UP;\r\n\t\t\t\t\t\t\t\tloading.style.webkitTransition = \"-webkit-transform 0.3s ease-in\";\r\n\t\t\t\t\t\t\t\tloading.style.webkitTransform = \"rotate(180deg)\";\r\n\t\t\t\t\t\t\t} else if (title === options.down.contentdown) {\r\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING_DOWN;\r\n\t\t\t\t\t\t\t\tloading.style.webkitTransition = \"-webkit-transform 0.3s ease-in\";\r\n\t\t\t\t\t\t\t\tloading.style.webkitTransform = \"rotate(0deg)\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (title === options.up.contentrefresh) {\r\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING + ' ' + CLASS_VISIBILITY;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tloading.className = CLASS_LOADING + ' ' + CLASS_HIDDEN;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tself._setCaptionClass(false, caption, title);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthis.lastTitle = title;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t$.PullRefresh = PullRefresh;\r\n})(mui, document);\r\n(function($, window, document, undefined) {\r\n\tvar CLASS_SCROLL = 'mui-scroll';\r\n\tvar CLASS_SCROLLBAR = 'mui-scrollbar';\r\n\tvar CLASS_INDICATOR = 'mui-scrollbar-indicator';\r\n\tvar CLASS_SCROLLBAR_VERTICAL = CLASS_SCROLLBAR + '-vertical';\r\n\tvar CLASS_SCROLLBAR_HORIZONTAL = CLASS_SCROLLBAR + '-horizontal';\r\n\r\n\tvar CLASS_ACTIVE = 'mui-active';\r\n\r\n\tvar ease = {\r\n\t\tquadratic: {\r\n\t\t\tstyle: 'cubic-bezier(0.25, 0.46, 0.45, 0.94)',\r\n\t\t\tfn: function(k) {\r\n\t\t\t\treturn k * (2 - k);\r\n\t\t\t}\r\n\t\t},\r\n\t\tcircular: {\r\n\t\t\tstyle: 'cubic-bezier(0.1, 0.57, 0.1, 1)',\r\n\t\t\tfn: function(k) {\r\n\t\t\t\treturn Math.sqrt(1 - (--k * k));\r\n\t\t\t}\r\n\t\t},\r\n\t\toutCirc: {\r\n\t\t\tstyle: 'cubic-bezier(0.075, 0.82, 0.165, 1)'\r\n\t\t},\r\n\t\toutCubic: {\r\n\t\t\tstyle: 'cubic-bezier(0.165, 0.84, 0.44, 1)'\r\n\t\t}\r\n\t}\r\n\tvar Scroll = $.Class.extend({\r\n\t\tinit: function(element, options) {\r\n\t\t\tthis.wrapper = this.element = element;\r\n\t\t\tthis.scroller = this.wrapper.children[0];\r\n\t\t\tthis.scrollerStyle = this.scroller && this.scroller.style;\r\n\t\t\tthis.stopped = false;\r\n\r\n\t\t\tthis.options = $.extend(true, {\r\n\t\t\t\tscrollY: true, //是否竖向滚动\r\n\t\t\t\tscrollX: false, //是否横向滚动\r\n\t\t\t\tstartX: 0, //初始化时滚动至x\r\n\t\t\t\tstartY: 0, //初始化时滚动至y\r\n\r\n\t\t\t\tindicators: true, //是否显示滚动条\r\n\t\t\t\tstopPropagation: false,\r\n\t\t\t\thardwareAccelerated: true,\r\n\t\t\t\tfixedBadAndorid: false,\r\n\t\t\t\tpreventDefaultException: {\r\n\t\t\t\t\ttagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|VIDEO)$/\r\n\t\t\t\t},\r\n\t\t\t\tmomentum: true,\r\n\r\n\t\t\t\tsnapX: 0.5, //横向切换距离(以当前容器宽度为基准)\r\n\t\t\t\tsnap: false, //图片轮播，拖拽式选项卡\r\n\r\n\t\t\t\tbounce: true, //是否启用回弹\r\n\t\t\t\tbounceTime: 500, //回弹动画时间\r\n\t\t\t\tbounceEasing: ease.outCirc, //回弹动画曲线\r\n\r\n\t\t\t\tscrollTime: 500,\r\n\t\t\t\tscrollEasing: ease.outCubic, //轮播动画曲线\r\n\r\n\t\t\t\tdirectionLockThreshold: 5,\r\n\r\n\t\t\t\tparallaxElement: false, //视差元素\r\n\t\t\t\tparallaxRatio: 0.5\r\n\t\t\t}, options);\r\n\r\n\t\t\tthis.x = 0;\r\n\t\t\tthis.y = 0;\r\n\t\t\tthis.translateZ = this.options.hardwareAccelerated ? ' translateZ(0)' : '';\r\n\r\n\t\t\tthis._init();\r\n\t\t\tif (this.scroller) {\r\n\t\t\t\tthis.refresh();\r\n\t\t\t\t//\t\t\t\tif (this.options.startX !== 0 || this.options.startY !== 0) { //需要判断吗？后续根据实际情况再看看\r\n\t\t\t\tthis.scrollTo(this.options.startX, this.options.startY);\r\n\t\t\t\t//\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_init: function() {\r\n\t\t\tthis._initParallax();\r\n\t\t\tthis._initIndicators();\r\n\t\t\tthis._initEvent();\r\n\t\t},\r\n\t\t_initParallax: function() {\r\n\t\t\tif (this.options.parallaxElement) {\r\n\t\t\t\tthis.parallaxElement = document.querySelector(this.options.parallaxElement);\r\n\t\t\t\tthis.parallaxStyle = this.parallaxElement.style;\r\n\t\t\t\tthis.parallaxHeight = this.parallaxElement.offsetHeight;\r\n\t\t\t\tthis.parallaxImgStyle = this.parallaxElement.querySelector('img').style;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_initIndicators: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tself.indicators = [];\r\n\t\t\tif (!this.options.indicators) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar indicators = [],\r\n\t\t\t\tindicator;\r\n\r\n\t\t\t// Vertical scrollbar\r\n\t\t\tif (self.options.scrollY) {\r\n\t\t\t\tindicator = {\r\n\t\t\t\t\tel: this._createScrollBar(CLASS_SCROLLBAR_VERTICAL),\r\n\t\t\t\t\tlistenX: false\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\r\n\t\t\t\tindicators.push(indicator);\r\n\t\t\t}\r\n\r\n\t\t\t// Horizontal scrollbar\r\n\t\t\tif (this.options.scrollX) {\r\n\t\t\t\tindicator = {\r\n\t\t\t\t\tel: this._createScrollBar(CLASS_SCROLLBAR_HORIZONTAL),\r\n\t\t\t\t\tlistenY: false\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.wrapper.appendChild(indicator.el);\r\n\t\t\t\tindicators.push(indicator);\r\n\t\t\t}\r\n\r\n\t\t\tfor (var i = indicators.length; i--;) {\r\n\t\t\t\tthis.indicators.push(new Indicator(this, indicators[i]));\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t_initSnap: function() {\r\n\t\t\tthis.currentPage = {};\r\n\t\t\tthis.pages = [];\r\n\t\t\tvar snaps = this.snaps;\r\n\t\t\tvar length = snaps.length;\r\n\t\t\tvar m = 0;\r\n\t\t\tvar n = -1;\r\n\t\t\tvar x = 0;\r\n\t\t\tvar leftX = 0;\r\n\t\t\tvar rightX = 0;\r\n\t\t\tvar snapX = 0;\r\n\t\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\t\tvar snap = snaps[i];\r\n\t\t\t\tvar offsetLeft = snap.offsetLeft;\r\n\t\t\t\tvar offsetWidth = snap.offsetWidth;\r\n\t\t\t\tif (i === 0 || offsetLeft <= snaps[i - 1].offsetLeft) {\r\n\t\t\t\t\tm = 0;\r\n\t\t\t\t\tn++;\r\n\t\t\t\t}\r\n\t\t\t\tif (!this.pages[m]) {\r\n\t\t\t\t\tthis.pages[m] = [];\r\n\t\t\t\t}\r\n\t\t\t\tx = this._getSnapX(offsetLeft);\r\n\t\t\t\tsnapX = Math.round((offsetWidth) * this.options.snapX);\r\n\t\t\t\tleftX = x - snapX;\r\n\t\t\t\trightX = x - offsetWidth + snapX;\r\n\t\t\t\tthis.pages[m][n] = {\r\n\t\t\t\t\tx: x,\r\n\t\t\t\t\tleftX: leftX,\r\n\t\t\t\t\trightX: rightX,\r\n\t\t\t\t\tpageX: m,\r\n\t\t\t\t\telement: snap\r\n\t\t\t\t}\r\n\t\t\t\tif (snap.classList.contains(CLASS_ACTIVE)) {\r\n\t\t\t\t\tthis.currentPage = this.pages[m][0];\r\n\t\t\t\t}\r\n\t\t\t\tif (x >= this.maxScrollX) {\r\n\t\t\t\t\tm++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.options.startX = this.currentPage.x || 0;\r\n\t\t},\r\n\t\t_getSnapX: function(offsetLeft) {\r\n\t\t\treturn Math.max(Math.min(0, -offsetLeft + (this.wrapperWidth / 2)), this.maxScrollX);\r\n\t\t},\r\n\t\t_gotoPage: function(index) {\r\n\t\t\tthis.currentPage = this.pages[Math.min(index, this.pages.length - 1)][0];\r\n\t\t\tfor (var i = 0, len = this.snaps.length; i < len; i++) {\r\n\t\t\t\tif (i === index) {\r\n\t\t\t\t\tthis.snaps[i].classList.add(CLASS_ACTIVE);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.snaps[i].classList.remove(CLASS_ACTIVE);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.scrollTo(this.currentPage.x, 0, this.options.scrollTime);\r\n\t\t},\r\n\t\t_nearestSnap: function(x) {\r\n\t\t\tif (!this.pages.length) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tx: 0,\r\n\t\t\t\t\tpageX: 0\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t\tvar i = 0;\r\n\t\t\tvar length = this.pages.length;\r\n\t\t\tif (x > 0) {\r\n\t\t\t\tx = 0;\r\n\t\t\t} else if (x < this.maxScrollX) {\r\n\t\t\t\tx = this.maxScrollX;\r\n\t\t\t}\r\n\t\t\tfor (; i < length; i++) {\r\n\t\t\t\tvar nearestX = this.direction === 'left' ? this.pages[i][0].leftX : this.pages[i][0].rightX;\r\n\t\t\t\tif (x >= nearestX) {\r\n\t\t\t\t\treturn this.pages[i][0];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn {\r\n\t\t\t\tx: 0,\r\n\t\t\t\tpageX: 0\r\n\t\t\t};\r\n\t\t},\r\n\t\t_initEvent: function(detach) {\r\n\t\t\tvar action = detach ? 'removeEventListener' : 'addEventListener';\r\n\t\t\twindow[action]('orientationchange', this);\r\n\t\t\twindow[action]('resize', this);\r\n\r\n\t\t\tthis.scroller[action]('webkitTransitionEnd', this);\r\n\r\n\t\t\tthis.wrapper[action]($.EVENT_START, this);\r\n\t\t\tthis.wrapper[action]($.EVENT_CANCEL, this);\r\n\t\t\tthis.wrapper[action]($.EVENT_END, this);\r\n\t\t\tthis.wrapper[action]('drag', this);\r\n\t\t\tthis.wrapper[action]('dragend', this);\r\n\t\t\tthis.wrapper[action]('flick', this);\r\n\t\t\tthis.wrapper[action]('scrollend', this);\r\n\t\t\tif (this.options.scrollX) {\r\n\t\t\t\tthis.wrapper[action]('swiperight', this);\r\n\t\t\t}\r\n\t\t\tvar segmentedControl = this.wrapper.querySelector('.mui-segmented-control');\r\n\t\t\tif (segmentedControl) { //靠，这个bug排查了一下午，阻止hash跳转，一旦hash跳转会导致可拖拽选项卡的tab不见\r\n\t\t\t\tmui(segmentedControl)[detach ? 'off' : 'on']('click', 'a', $.preventDefault);\r\n\t\t\t}\r\n\r\n\t\t\tthis.wrapper[action]('scrollstart', this);\r\n\t\t\tthis.wrapper[action]('refresh', this);\r\n\t\t},\r\n\t\t_handleIndicatorScrollend: function() {\r\n\t\t\tthis.indicators.map(function(indicator) {\r\n\t\t\t\tindicator.fade();\r\n\t\t\t});\r\n\t\t},\r\n\t\t_handleIndicatorScrollstart: function() {\r\n\t\t\tthis.indicators.map(function(indicator) {\r\n\t\t\t\tindicator.fade(1);\r\n\t\t\t});\r\n\t\t},\r\n\t\t_handleIndicatorRefresh: function() {\r\n\t\t\tthis.indicators.map(function(indicator) {\r\n\t\t\t\tindicator.refresh();\r\n\t\t\t});\r\n\t\t},\r\n\t\thandleEvent: function(e) {\r\n\t\t\tif (this.stopped) {\r\n\t\t\t\tthis.resetPosition();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tswitch (e.type) {\r\n\t\t\t\tcase $.EVENT_START:\r\n\t\t\t\t\tthis._start(e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'drag':\r\n\t\t\t\t\tthis.options.stopPropagation && e.stopPropagation();\r\n\t\t\t\t\tthis._drag(e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'dragend':\r\n\t\t\t\tcase 'flick':\r\n\t\t\t\t\tthis.options.stopPropagation && e.stopPropagation();\r\n\t\t\t\t\tthis._flick(e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase $.EVENT_CANCEL:\r\n\t\t\t\tcase $.EVENT_END:\r\n\t\t\t\t\tthis._end(e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'webkitTransitionEnd':\r\n\t\t\t\t\tthis.transitionTimer && this.transitionTimer.cancel();\r\n\t\t\t\t\tthis._transitionEnd(e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'scrollstart':\r\n\t\t\t\t\tthis._handleIndicatorScrollstart(e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'scrollend':\r\n\t\t\t\t\tthis._handleIndicatorScrollend(e);\r\n\t\t\t\t\tthis._scrollend(e);\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'orientationchange':\r\n\t\t\t\tcase 'resize':\r\n\t\t\t\t\tthis._resize();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'swiperight':\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'refresh':\r\n\t\t\t\t\tthis._handleIndicatorRefresh(e);\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t},\r\n\t\t_start: function(e) {\r\n\t\t\tthis.moved = this.needReset = false;\r\n\t\t\tthis._transitionTime();\r\n\t\t\tif (this.isInTransition) {\r\n\t\t\t\tthis.needReset = true;\r\n\t\t\t\tthis.isInTransition = false;\r\n\t\t\t\tvar pos = $.parseTranslateMatrix($.getStyles(this.scroller, 'webkitTransform'));\r\n\t\t\t\tthis.setTranslate(Math.round(pos.x), Math.round(pos.y));\r\n\t\t\t\t//\t\t\t\tthis.resetPosition(); //reset\r\n\t\t\t\t$.trigger(this.scroller, 'scrollend', this);\r\n\t\t\t\t//\t\t\t\te.stopPropagation();\r\n\t\t\t\te.preventDefault();\r\n\t\t\t}\r\n\t\t\tthis.reLayout();\r\n\t\t\t$.trigger(this.scroller, 'beforescrollstart', this);\r\n\t\t},\r\n\t\t_getDirectionByAngle: function(angle) {\r\n\t\t\tif (angle < -80 && angle > -100) {\r\n\t\t\t\treturn 'up';\r\n\t\t\t} else if (angle >= 80 && angle < 100) {\r\n\t\t\t\treturn 'down';\r\n\t\t\t} else if (angle >= 170 || angle <= -170) {\r\n\t\t\t\treturn 'left';\r\n\t\t\t} else if (angle >= -35 && angle <= 10) {\r\n\t\t\t\treturn 'right';\r\n\t\t\t}\r\n\t\t\treturn null;\r\n\t\t},\r\n\t\t_drag: function(e) {\r\n\t\t\t//\t\t\tif (this.needReset) {\r\n\t\t\t//\t\t\t\te.stopPropagation(); //disable parent drag(nested scroller)\r\n\t\t\t//\t\t\t\treturn;\r\n\t\t\t//\t\t\t}\r\n\t\t\tvar detail = e.detail;\r\n\t\t\tif (this.options.scrollY || detail.direction === 'up' || detail.direction === 'down') { //如果是竖向滚动或手势方向是上或下\r\n\t\t\t\t//ios8 hack\r\n\t\t\t\tif ($.os.ios && parseFloat($.os.version) >= 8) { //多webview时，离开当前webview会导致后续touch事件不触发\r\n\t\t\t\t\tvar clientY = detail.gesture.touches[0].clientY;\r\n\t\t\t\t\t//下拉刷新 or 上拉加载\r\n\t\t\t\t\tif ((clientY + 10) > window.innerHeight || clientY < 10) {\r\n\t\t\t\t\t\tthis.resetPosition(this.options.bounceTime);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar isPreventDefault = isReturn = false;\r\n\t\t\tvar direction = this._getDirectionByAngle(detail.angle);\r\n\t\t\tif (detail.direction === 'left' || detail.direction === 'right') {\r\n\t\t\t\tif (this.options.scrollX) {\r\n\t\t\t\t\tisPreventDefault = true;\r\n\t\t\t\t\tif (!this.moved) { //识别角度(该角度导致轮播不灵敏)\r\n\t\t\t\t\t\t//\t\t\t\t\t\tif (direction !== 'left' && direction !== 'right') {\r\n\t\t\t\t\t\t//\t\t\t\t\t\t\tisReturn = true;\r\n\t\t\t\t\t\t//\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t$.gestures.session.lockDirection = true; //锁定方向\r\n\t\t\t\t\t\t$.gestures.session.startDirection = detail.direction;\r\n\t\t\t\t\t\t//\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.options.scrollY && !this.moved) {\r\n\t\t\t\t\tisReturn = true;\r\n\t\t\t\t}\r\n\t\t\t} else if (detail.direction === 'up' || detail.direction === 'down') {\r\n\t\t\t\tif (this.options.scrollY) {\r\n\t\t\t\t\tisPreventDefault = true;\r\n\t\t\t\t\t//\t\t\t\t\tif (!this.moved) { //识别角度,竖向滚动似乎没必要进行小角度验证\r\n\t\t\t\t\t//\t\t\t\t\t\tif (direction !== 'up' && direction !== 'down') {\r\n\t\t\t\t\t//\t\t\t\t\t\t\tisReturn = true;\r\n\t\t\t\t\t//\t\t\t\t\t\t}\r\n\t\t\t\t\t//\t\t\t\t\t}\r\n\t\t\t\t\tif (!this.moved) {\r\n\t\t\t\t\t\t$.gestures.session.lockDirection = true; //锁定方向\r\n\t\t\t\t\t\t$.gestures.session.startDirection = detail.direction;\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (this.options.scrollX && !this.moved) {\r\n\t\t\t\t\tisReturn = true;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tisReturn = true;\r\n\t\t\t}\r\n\t\t\tif (this.moved || isPreventDefault) {\r\n\t\t\t\te.stopPropagation(); //阻止冒泡(scroll类嵌套)\r\n\t\t\t\tdetail.gesture && detail.gesture.preventDefault();\r\n\t\t\t}\r\n\t\t\tif (isReturn) { //禁止非法方向滚动\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!this.moved) {\r\n\t\t\t\t$.trigger(this.scroller, 'scrollstart', this);\r\n\t\t\t} else {\r\n\t\t\t\te.stopPropagation(); //move期间阻止冒泡(scroll嵌套)\r\n\t\t\t}\r\n\t\t\tvar deltaX = 0;\r\n\t\t\tvar deltaY = 0;\r\n\t\t\tif (!this.moved) { //start\r\n\t\t\t\tdeltaX = detail.deltaX;\r\n\t\t\t\tdeltaY = detail.deltaY;\r\n\t\t\t} else { //move\r\n\t\t\t\tdeltaX = detail.deltaX - $.gestures.session.prevTouch.deltaX;\r\n\t\t\t\tdeltaY = detail.deltaY - $.gestures.session.prevTouch.deltaY;\r\n\t\t\t}\r\n\t\t\tvar absDeltaX = Math.abs(detail.deltaX);\r\n\t\t\tvar absDeltaY = Math.abs(detail.deltaY);\r\n\t\t\tif (absDeltaX > absDeltaY + this.options.directionLockThreshold) {\r\n\t\t\t\tdeltaY = 0;\r\n\t\t\t} else if (absDeltaY >= absDeltaX + this.options.directionLockThreshold) {\r\n\t\t\t\tdeltaX = 0;\r\n\t\t\t}\r\n\r\n\t\t\tdeltaX = this.hasHorizontalScroll ? deltaX : 0;\r\n\t\t\tdeltaY = this.hasVerticalScroll ? deltaY : 0;\r\n\t\t\tvar newX = this.x + deltaX;\r\n\t\t\tvar newY = this.y + deltaY;\r\n\t\t\t// Slow down if outside of the boundaries\r\n\t\t\tif (newX > 0 || newX < this.maxScrollX) {\r\n\t\t\t\tnewX = this.options.bounce ? this.x + deltaX / 3 : newX > 0 ? 0 : this.maxScrollX;\r\n\t\t\t}\r\n\t\t\tif (newY > 0 || newY < this.maxScrollY) {\r\n\t\t\t\tnewY = this.options.bounce ? this.y + deltaY / 3 : newY > 0 ? 0 : this.maxScrollY;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.requestAnimationFrame) {\r\n\t\t\t\tthis._updateTranslate();\r\n\t\t\t}\r\n\t\t\tthis.direction = detail.deltaX > 0 ? 'right' : 'left';\r\n\t\t\tthis.moved = true;\r\n\t\t\tthis.x = newX;\r\n\t\t\tthis.y = newY;\r\n\t\t\t$.trigger(this.scroller, 'scroll', this);\r\n\t\t},\r\n\t\t_flick: function(e) {\r\n\t\t\t//\t\t\tif (!this.moved || this.needReset) {\r\n\t\t\t//\t\t\t\treturn;\r\n\t\t\t//\t\t\t}\r\n\t\t\tif (!this.moved) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\te.stopPropagation();\r\n\t\t\tvar detail = e.detail;\r\n\t\t\tthis._clearRequestAnimationFrame();\r\n\t\t\tif (e.type === 'dragend' && detail.flick) { //dragend\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tvar newX = Math.round(this.x);\r\n\t\t\tvar newY = Math.round(this.y);\r\n\r\n\t\t\tthis.isInTransition = false;\r\n\t\t\t// reset if we are outside of the boundaries\r\n\t\t\tif (this.resetPosition(this.options.bounceTime)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tthis.scrollTo(newX, newY); // ensures that the last position is rounded\r\n\r\n\t\t\tif (e.type === 'dragend') { //dragend\r\n\t\t\t\t$.trigger(this.scroller, 'scrollend', this);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar time = 0;\r\n\t\t\tvar easing = '';\r\n\t\t\t// start momentum animation if needed\r\n\t\t\tif (this.options.momentum && detail.flickTime < 300) {\r\n\t\t\t\tmomentumX = this.hasHorizontalScroll ? this._momentum(this.x, detail.flickDistanceX, detail.flickTime, this.maxScrollX, this.options.bounce ? this.wrapperWidth : 0, this.options.deceleration) : {\r\n\t\t\t\t\tdestination: newX,\r\n\t\t\t\t\tduration: 0\r\n\t\t\t\t};\r\n\t\t\t\tmomentumY = this.hasVerticalScroll ? this._momentum(this.y, detail.flickDistanceY, detail.flickTime, this.maxScrollY, this.options.bounce ? this.wrapperHeight : 0, this.options.deceleration) : {\r\n\t\t\t\t\tdestination: newY,\r\n\t\t\t\t\tduration: 0\r\n\t\t\t\t};\r\n\t\t\t\tnewX = momentumX.destination;\r\n\t\t\t\tnewY = momentumY.destination;\r\n\t\t\t\ttime = Math.max(momentumX.duration, momentumY.duration);\r\n\t\t\t\tthis.isInTransition = true;\r\n\t\t\t}\r\n\r\n\t\t\tif (newX != this.x || newY != this.y) {\r\n\t\t\t\tif (newX > 0 || newX < this.maxScrollX || newY > 0 || newY < this.maxScrollY) {\r\n\t\t\t\t\teasing = ease.quadratic;\r\n\t\t\t\t}\r\n\t\t\t\tthis.scrollTo(newX, newY, time, easing);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t$.trigger(this.scroller, 'scrollend', this);\r\n\t\t\t//\t\t\te.stopPropagation();\r\n\t\t},\r\n\t\t_end: function(e) {\r\n\t\t\tthis.needReset = false;\r\n\t\t\tif ((!this.moved && this.needReset) || e.type === $.EVENT_CANCEL) {\r\n\t\t\t\tthis.resetPosition();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_transitionEnd: function(e) {\r\n\t\t\tif (e.target != this.scroller || !this.isInTransition) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._transitionTime();\r\n\t\t\tif (!this.resetPosition(this.options.bounceTime)) {\r\n\t\t\t\tthis.isInTransition = false;\r\n\t\t\t\t$.trigger(this.scroller, 'scrollend', this);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_scrollend: function(e) {\r\n\t\t\tif ((this.y === 0 && this.maxScrollY === 0) || (Math.abs(this.y) > 0 && this.y <= this.maxScrollY)) {\r\n\t\t\t\t$.trigger(this.scroller, 'scrollbottom', this);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_resize: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tclearTimeout(that.resizeTimeout);\r\n\t\t\tthat.resizeTimeout = setTimeout(function() {\r\n\t\t\t\tthat.refresh();\r\n\t\t\t}, that.options.resizePolling);\r\n\t\t},\r\n\t\t_transitionTime: function(time) {\r\n\t\t\ttime = time || 0;\r\n\t\t\tthis.scrollerStyle['webkitTransitionDuration'] = time + 'ms';\r\n\t\t\tif (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\r\n\t\t\t\tthis.parallaxStyle['webkitTransitionDuration'] = time + 'ms';\r\n\t\t\t}\r\n\t\t\tif (this.options.fixedBadAndorid && !time && $.os.isBadAndroid) {\r\n\t\t\t\tthis.scrollerStyle['webkitTransitionDuration'] = '0.001s';\r\n\t\t\t\tif (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\r\n\t\t\t\t\tthis.parallaxStyle['webkitTransitionDuration'] = '0.001s';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.indicators) {\r\n\t\t\t\tfor (var i = this.indicators.length; i--;) {\r\n\t\t\t\t\tthis.indicators[i].transitionTime(time);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (time) { //自定义timer，保证webkitTransitionEnd始终触发\r\n\t\t\t\tthis.transitionTimer && this.transitionTimer.cancel();\r\n\t\t\t\tthis.transitionTimer = $.later(function() {\r\n\t\t\t\t\t$.trigger(this.scroller, 'webkitTransitionEnd');\r\n\t\t\t\t}, time + 100, this);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_transitionTimingFunction: function(easing) {\r\n\t\t\tthis.scrollerStyle['webkitTransitionTimingFunction'] = easing;\r\n\t\t\tif (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\r\n\t\t\t\tthis.parallaxStyle['webkitTransitionDuration'] = easing;\r\n\t\t\t}\r\n\t\t\tif (this.indicators) {\r\n\t\t\t\tfor (var i = this.indicators.length; i--;) {\r\n\t\t\t\t\tthis.indicators[i].transitionTimingFunction(easing);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_translate: function(x, y) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t},\r\n\t\t_clearRequestAnimationFrame: function() {\r\n\t\t\tif (this.requestAnimationFrame) {\r\n\t\t\t\tcancelAnimationFrame(this.requestAnimationFrame);\r\n\t\t\t\tthis.requestAnimationFrame = null;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_updateTranslate: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tif (self.x !== self.lastX || self.y !== self.lastY) {\r\n\t\t\t\tself.setTranslate(self.x, self.y);\r\n\t\t\t}\r\n\t\t\tself.requestAnimationFrame = requestAnimationFrame(function() {\r\n\t\t\t\tself._updateTranslate();\r\n\t\t\t});\r\n\t\t},\r\n\t\t_createScrollBar: function(clazz) {\r\n\t\t\tvar scrollbar = document.createElement('div');\r\n\t\t\tvar indicator = document.createElement('div');\r\n\t\t\tscrollbar.className = CLASS_SCROLLBAR + ' ' + clazz;\r\n\t\t\tindicator.className = CLASS_INDICATOR;\r\n\t\t\tscrollbar.appendChild(indicator);\r\n\t\t\tif (clazz === CLASS_SCROLLBAR_VERTICAL) {\r\n\t\t\t\tthis.scrollbarY = scrollbar;\r\n\t\t\t\tthis.scrollbarIndicatorY = indicator;\r\n\t\t\t} else if (clazz === CLASS_SCROLLBAR_HORIZONTAL) {\r\n\t\t\t\tthis.scrollbarX = scrollbar;\r\n\t\t\t\tthis.scrollbarIndicatorX = indicator;\r\n\t\t\t}\r\n\t\t\tthis.wrapper.appendChild(scrollbar);\r\n\t\t\treturn scrollbar;\r\n\t\t},\r\n\t\t_preventDefaultException: function(el, exceptions) {\r\n\t\t\tfor (var i in exceptions) {\r\n\t\t\t\tif (exceptions[i].test(el[i])) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\t_reLayout: function() {\r\n\t\t\tif (!this.hasHorizontalScroll) {\r\n\t\t\t\tthis.maxScrollX = 0;\r\n\t\t\t\tthis.scrollerWidth = this.wrapperWidth;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.hasVerticalScroll) {\r\n\t\t\t\tthis.maxScrollY = 0;\r\n\t\t\t\tthis.scrollerHeight = this.wrapperHeight;\r\n\t\t\t}\r\n\r\n\t\t\tthis.indicators.map(function(indicator) {\r\n\t\t\t\tindicator.refresh();\r\n\t\t\t});\r\n\r\n\t\t\t//以防slider类嵌套使用\r\n\t\t\tif (this.options.snap && typeof this.options.snap === 'string') {\r\n\t\t\t\tvar items = this.scroller.querySelectorAll(this.options.snap);\r\n\t\t\t\tthis.itemLength = 0;\r\n\t\t\t\tthis.snaps = [];\r\n\t\t\t\tfor (var i = 0, len = items.length; i < len; i++) {\r\n\t\t\t\t\tvar item = items[i];\r\n\t\t\t\t\tif (item.parentNode === this.scroller) {\r\n\t\t\t\t\t\tthis.itemLength++;\r\n\t\t\t\t\t\tthis.snaps.push(item);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis._initSnap(); //需要每次都_initSnap么。其实init的时候执行一次，后续resize的时候执行一次就行了吧.先这么做吧，如果影响性能，再调整\r\n\t\t\t}\r\n\t\t},\r\n\t\t_momentum: function(current, distance, time, lowerMargin, wrapperSize, deceleration) {\r\n\t\t\tvar speed = parseFloat(Math.abs(distance) / time),\r\n\t\t\t\tdestination,\r\n\t\t\t\tduration;\r\n\r\n\t\t\tdeceleration = deceleration === undefined ? 0.0006 : deceleration;\r\n\t\t\tdestination = current + (speed * speed) / (2 * deceleration) * (distance < 0 ? -1 : 1);\r\n\t\t\tduration = speed / deceleration;\r\n\t\t\tif (destination < lowerMargin) {\r\n\t\t\t\tdestination = wrapperSize ? lowerMargin - (wrapperSize / 2.5 * (speed / 8)) : lowerMargin;\r\n\t\t\t\tdistance = Math.abs(destination - current);\r\n\t\t\t\tduration = distance / speed;\r\n\t\t\t} else if (destination > 0) {\r\n\t\t\t\tdestination = wrapperSize ? wrapperSize / 2.5 * (speed / 8) : 0;\r\n\t\t\t\tdistance = Math.abs(current) + destination;\r\n\t\t\t\tduration = distance / speed;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tdestination: Math.round(destination),\r\n\t\t\t\tduration: duration\r\n\t\t\t};\r\n\t\t},\r\n\t\t_getTranslateStr: function(x, y) {\r\n\t\t\tif (this.options.hardwareAccelerated) {\r\n\t\t\t\treturn 'translate3d(' + x + 'px,' + y + 'px,0px) ' + this.translateZ;\r\n\t\t\t}\r\n\t\t\treturn 'translate(' + x + 'px,' + y + 'px) ';\r\n\t\t},\r\n\t\t//API\r\n\t\tsetStopped: function(stopped) {\r\n\t\t\tthis.stopped = !!stopped;\r\n\t\t},\r\n\t\tsetTranslate: function(x, y) {\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\t\t\tthis.scrollerStyle['webkitTransform'] = this._getTranslateStr(x, y);\r\n\t\t\tif (this.parallaxElement && this.options.scrollY) { //目前仅支持竖向视差效果\r\n\t\t\t\tvar parallaxY = y * this.options.parallaxRatio;\r\n\t\t\t\tvar scale = 1 + parallaxY / ((this.parallaxHeight - parallaxY) / 2);\r\n\t\t\t\tif (scale > 1) {\r\n\t\t\t\t\tthis.parallaxImgStyle['opacity'] = 1 - parallaxY / 100 * this.options.parallaxRatio;\r\n\t\t\t\t\tthis.parallaxStyle['webkitTransform'] = this._getTranslateStr(0, -parallaxY) + ' scale(' + scale + ',' + scale + ')';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.parallaxImgStyle['opacity'] = 1;\r\n\t\t\t\t\tthis.parallaxStyle['webkitTransform'] = this._getTranslateStr(0, -1) + ' scale(1,1)';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.indicators) {\r\n\t\t\t\tfor (var i = this.indicators.length; i--;) {\r\n\t\t\t\t\tthis.indicators[i].updatePosition();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.lastX = this.x;\r\n\t\t\tthis.lastY = this.y;\r\n\t\t\t$.trigger(this.scroller, 'scroll', this);\r\n\t\t},\r\n\t\treLayout: function() {\r\n\t\t\tthis.wrapper.offsetHeight;\r\n\r\n\t\t\tvar paddingLeft = parseFloat($.getStyles(this.wrapper, 'padding-left')) || 0;\r\n\t\t\tvar paddingRight = parseFloat($.getStyles(this.wrapper, 'padding-right')) || 0;\r\n\t\t\tvar paddingTop = parseFloat($.getStyles(this.wrapper, 'padding-top')) || 0;\r\n\t\t\tvar paddingBottom = parseFloat($.getStyles(this.wrapper, 'padding-bottom')) || 0;\r\n\r\n\t\t\tvar clientWidth = this.wrapper.clientWidth;\r\n\t\t\tvar clientHeight = this.wrapper.clientHeight;\r\n\r\n\t\t\tthis.scrollerWidth = this.scroller.offsetWidth;\r\n\t\t\tthis.scrollerHeight = this.scroller.offsetHeight;\r\n\r\n\t\t\tthis.wrapperWidth = clientWidth - paddingLeft - paddingRight;\r\n\t\t\tthis.wrapperHeight = clientHeight - paddingTop - paddingBottom;\r\n\r\n\t\t\tthis.maxScrollX = Math.min(this.wrapperWidth - this.scrollerWidth, 0);\r\n\t\t\tthis.maxScrollY = Math.min(this.wrapperHeight - this.scrollerHeight, 0);\r\n\t\t\tthis.hasHorizontalScroll = this.options.scrollX && this.maxScrollX < 0;\r\n\t\t\tthis.hasVerticalScroll = this.options.scrollY && this.maxScrollY < 0;\r\n\t\t\tthis._reLayout();\r\n\t\t},\r\n\t\tresetPosition: function(time) {\r\n\t\t\tvar x = this.x,\r\n\t\t\t\ty = this.y;\r\n\r\n\t\t\ttime = time || 0;\r\n\t\t\tif (!this.hasHorizontalScroll || this.x > 0) {\r\n\t\t\t\tx = 0;\r\n\t\t\t} else if (this.x < this.maxScrollX) {\r\n\t\t\t\tx = this.maxScrollX;\r\n\t\t\t}\r\n\r\n\t\t\tif (!this.hasVerticalScroll || this.y > 0) {\r\n\t\t\t\ty = 0;\r\n\t\t\t} else if (this.y < this.maxScrollY) {\r\n\t\t\t\ty = this.maxScrollY;\r\n\t\t\t}\r\n\r\n\t\t\tif (x == this.x && y == this.y) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tthis.scrollTo(x, y, time, this.options.scrollEasing);\r\n\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\t_reInit: function() {\r\n\t\t\tvar groups = this.wrapper.querySelectorAll('.' + CLASS_SCROLL);\r\n\t\t\tfor (var i = 0, len = groups.length; i < len; i++) {\r\n\t\t\t\tif (groups[i].parentNode === this.wrapper) {\r\n\t\t\t\t\tthis.scroller = groups[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.scrollerStyle = this.scroller && this.scroller.style;\r\n\t\t},\r\n\t\trefresh: function() {\r\n\t\t\tthis._reInit();\r\n\t\t\tthis.reLayout();\r\n\t\t\t$.trigger(this.scroller, 'refresh', this);\r\n\t\t\tthis.resetPosition();\r\n\t\t},\r\n\t\tscrollTo: function(x, y, time, easing) {\r\n\t\t\tvar easing = easing || ease.circular;\r\n\t\t\t//\t\t\tthis.isInTransition = time > 0 && (this.lastX != x || this.lastY != y);\r\n\t\t\t//暂不严格判断x,y，否则会导致部分版本上不正常触发轮播\r\n\t\t\tthis.isInTransition = time > 0;\r\n\t\t\tif (this.isInTransition) {\r\n\t\t\t\tthis._clearRequestAnimationFrame();\r\n\t\t\t\tthis._transitionTimingFunction(easing.style);\r\n\t\t\t\tthis._transitionTime(time);\r\n\t\t\t\tthis.setTranslate(x, y);\r\n\t\t\t} else {\r\n\t\t\t\tthis.setTranslate(x, y);\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tscrollToBottom: function(time, easing) {\r\n\t\t\ttime = time || this.options.scrollTime;\r\n\t\t\tthis.scrollTo(0, this.maxScrollY, time, easing);\r\n\t\t},\r\n\t\tgotoPage: function(index) {\r\n\t\t\tthis._gotoPage(index);\r\n\t\t},\r\n\t\tdestroy: function() {\r\n\t\t\tthis._initEvent(true); //detach\r\n\t\t\tdelete $.data[this.wrapper.getAttribute('data-scroll')];\r\n\t\t\tthis.wrapper.setAttribute('data-scroll', '');\r\n\t\t}\r\n\t});\r\n\t//Indicator\r\n\tvar Indicator = function(scroller, options) {\r\n\t\tthis.wrapper = typeof options.el == 'string' ? document.querySelector(options.el) : options.el;\r\n\t\tthis.wrapperStyle = this.wrapper.style;\r\n\t\tthis.indicator = this.wrapper.children[0];\r\n\t\tthis.indicatorStyle = this.indicator.style;\r\n\t\tthis.scroller = scroller;\r\n\r\n\t\tthis.options = $.extend({\r\n\t\t\tlistenX: true,\r\n\t\t\tlistenY: true,\r\n\t\t\tfade: false,\r\n\t\t\tspeedRatioX: 0,\r\n\t\t\tspeedRatioY: 0\r\n\t\t}, options);\r\n\r\n\t\tthis.sizeRatioX = 1;\r\n\t\tthis.sizeRatioY = 1;\r\n\t\tthis.maxPosX = 0;\r\n\t\tthis.maxPosY = 0;\r\n\r\n\t\tif (this.options.fade) {\r\n\t\t\tthis.wrapperStyle['webkitTransform'] = this.scroller.translateZ;\r\n\t\t\tthis.wrapperStyle['webkitTransitionDuration'] = this.options.fixedBadAndorid && $.os.isBadAndroid ? '0.001s' : '0ms';\r\n\t\t\tthis.wrapperStyle.opacity = '0';\r\n\t\t}\r\n\t}\r\n\tIndicator.prototype = {\r\n\t\thandleEvent: function(e) {\r\n\r\n\t\t},\r\n\t\ttransitionTime: function(time) {\r\n\t\t\ttime = time || 0;\r\n\t\t\tthis.indicatorStyle['webkitTransitionDuration'] = time + 'ms';\r\n\t\t\tif (this.scroller.options.fixedBadAndorid && !time && $.os.isBadAndroid) {\r\n\t\t\t\tthis.indicatorStyle['webkitTransitionDuration'] = '0.001s';\r\n\t\t\t}\r\n\t\t},\r\n\t\ttransitionTimingFunction: function(easing) {\r\n\t\t\tthis.indicatorStyle['webkitTransitionTimingFunction'] = easing;\r\n\t\t},\r\n\t\trefresh: function() {\r\n\t\t\tthis.transitionTime();\r\n\r\n\t\t\tif (this.options.listenX && !this.options.listenY) {\r\n\t\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll ? 'block' : 'none';\r\n\t\t\t} else if (this.options.listenY && !this.options.listenX) {\r\n\t\t\t\tthis.indicatorStyle.display = this.scroller.hasVerticalScroll ? 'block' : 'none';\r\n\t\t\t} else {\r\n\t\t\t\tthis.indicatorStyle.display = this.scroller.hasHorizontalScroll || this.scroller.hasVerticalScroll ? 'block' : 'none';\r\n\t\t\t}\r\n\r\n\t\t\tthis.wrapper.offsetHeight; // force refresh\r\n\r\n\t\t\tif (this.options.listenX) {\r\n\t\t\t\tthis.wrapperWidth = this.wrapper.clientWidth;\r\n\t\t\t\tthis.indicatorWidth = Math.max(Math.round(this.wrapperWidth * this.wrapperWidth / (this.scroller.scrollerWidth || this.wrapperWidth || 1)), 8);\r\n\t\t\t\tthis.indicatorStyle.width = this.indicatorWidth + 'px';\r\n\r\n\t\t\t\tthis.maxPosX = this.wrapperWidth - this.indicatorWidth;\r\n\r\n\t\t\t\tthis.minBoundaryX = 0;\r\n\t\t\t\tthis.maxBoundaryX = this.maxPosX;\r\n\r\n\t\t\t\tthis.sizeRatioX = this.options.speedRatioX || (this.scroller.maxScrollX && (this.maxPosX / this.scroller.maxScrollX));\r\n\t\t\t}\r\n\r\n\t\t\tif (this.options.listenY) {\r\n\t\t\t\tthis.wrapperHeight = this.wrapper.clientHeight;\r\n\t\t\t\tthis.indicatorHeight = Math.max(Math.round(this.wrapperHeight * this.wrapperHeight / (this.scroller.scrollerHeight || this.wrapperHeight || 1)), 8);\r\n\t\t\t\tthis.indicatorStyle.height = this.indicatorHeight + 'px';\r\n\r\n\t\t\t\tthis.maxPosY = this.wrapperHeight - this.indicatorHeight;\r\n\r\n\t\t\t\tthis.minBoundaryY = 0;\r\n\t\t\t\tthis.maxBoundaryY = this.maxPosY;\r\n\r\n\t\t\t\tthis.sizeRatioY = this.options.speedRatioY || (this.scroller.maxScrollY && (this.maxPosY / this.scroller.maxScrollY));\r\n\t\t\t}\r\n\r\n\t\t\tthis.updatePosition();\r\n\t\t},\r\n\r\n\t\tupdatePosition: function() {\r\n\t\t\tvar x = this.options.listenX && Math.round(this.sizeRatioX * this.scroller.x) || 0,\r\n\t\t\t\ty = this.options.listenY && Math.round(this.sizeRatioY * this.scroller.y) || 0;\r\n\r\n\t\t\tif (x < this.minBoundaryX) {\r\n\t\t\t\tthis.width = Math.max(this.indicatorWidth + x, 8);\r\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\r\n\t\t\t\tx = this.minBoundaryX;\r\n\t\t\t} else if (x > this.maxBoundaryX) {\r\n\t\t\t\tthis.width = Math.max(this.indicatorWidth - (x - this.maxPosX), 8);\r\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\r\n\t\t\t\tx = this.maxPosX + this.indicatorWidth - this.width;\r\n\t\t\t} else if (this.width != this.indicatorWidth) {\r\n\t\t\t\tthis.width = this.indicatorWidth;\r\n\t\t\t\tthis.indicatorStyle.width = this.width + 'px';\r\n\t\t\t}\r\n\r\n\t\t\tif (y < this.minBoundaryY) {\r\n\t\t\t\tthis.height = Math.max(this.indicatorHeight + y * 3, 8);\r\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\r\n\t\t\t\ty = this.minBoundaryY;\r\n\t\t\t} else if (y > this.maxBoundaryY) {\r\n\t\t\t\tthis.height = Math.max(this.indicatorHeight - (y - this.maxPosY) * 3, 8);\r\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\r\n\t\t\t\ty = this.maxPosY + this.indicatorHeight - this.height;\r\n\t\t\t} else if (this.height != this.indicatorHeight) {\r\n\t\t\t\tthis.height = this.indicatorHeight;\r\n\t\t\t\tthis.indicatorStyle.height = this.height + 'px';\r\n\t\t\t}\r\n\r\n\t\t\tthis.x = x;\r\n\t\t\tthis.y = y;\r\n\r\n\t\t\tthis.indicatorStyle['webkitTransform'] = this.scroller._getTranslateStr(x, y);\r\n\r\n\t\t},\r\n\t\tfade: function(val, hold) {\r\n\t\t\tif (hold && !this.visible) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tclearTimeout(this.fadeTimeout);\r\n\t\t\tthis.fadeTimeout = null;\r\n\r\n\t\t\tvar time = val ? 250 : 500,\r\n\t\t\t\tdelay = val ? 0 : 300;\r\n\r\n\t\t\tval = val ? '1' : '0';\r\n\r\n\t\t\tthis.wrapperStyle['webkitTransitionDuration'] = time + 'ms';\r\n\r\n\t\t\tthis.fadeTimeout = setTimeout((function(val) {\r\n\t\t\t\tthis.wrapperStyle.opacity = val;\r\n\t\t\t\tthis.visible = +val;\r\n\t\t\t}).bind(this, val), delay);\r\n\t\t}\r\n\t};\r\n\r\n\t$.Scroll = Scroll;\r\n\r\n\t$.fn.scroll = function(options) {\r\n\t\tvar scrollApis = [];\r\n\t\tthis.each(function() {\r\n\t\t\tvar scrollApi = null;\r\n\t\t\tvar self = this;\r\n\t\t\tvar id = self.getAttribute('data-scroll');\r\n\t\t\tif (!id) {\r\n\t\t\t\tid = ++$.uuid;\r\n\t\t\t\tvar _options = $.extend({}, options);\r\n\t\t\t\tif (self.classList.contains('mui-segmented-control')) {\r\n\t\t\t\t\t_options = $.extend(_options, {\r\n\t\t\t\t\t\tscrollY: false,\r\n\t\t\t\t\t\tscrollX: true,\r\n\t\t\t\t\t\tindicators: false,\r\n\t\t\t\t\t\tsnap: '.mui-control-item'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t$.data[id] = scrollApi = new Scroll(self, _options);\r\n\t\t\t\tself.setAttribute('data-scroll', id);\r\n\t\t\t} else {\r\n\t\t\t\tscrollApi = $.data[id];\r\n\t\t\t}\r\n\t\t\tscrollApis.push(scrollApi);\r\n\t\t});\r\n\t\treturn scrollApis.length === 1 ? scrollApis[0] : scrollApis;\r\n\t};\r\n})(mui, window, document);\r\n(function($, window, document, undefined) {\r\n\r\n\tvar CLASS_VISIBILITY = 'mui-visibility';\r\n\tvar CLASS_HIDDEN = 'mui-hidden';\r\n\r\n\tvar PullRefresh = $.Scroll.extend($.extend({\r\n\t\thandleEvent: function(e) {\r\n\t\t\tthis._super(e);\r\n\t\t\tif (e.type === 'scrollbottom') {\r\n\t\t\t\tif (e.target === this.scroller) {\r\n\t\t\t\t\tthis._scrollbottom();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t_scrollbottom: function() {\r\n\t\t\tif (!this.pulldown && !this.loading) {\r\n\t\t\t\tthis.pulldown = false;\r\n\t\t\t\tthis._initPullupRefresh();\r\n\t\t\t\tthis.pullupLoading();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_start: function(e) {\r\n\t\t\t//仅下拉刷新在start阻止默认事件\r\n\t\t\tif (e.touches && e.touches.length && e.touches[0].clientX > 30) {\r\n\t\t\t\te.target && !this._preventDefaultException(e.target, this.options.preventDefaultException) && e.preventDefault();\r\n\t\t\t}\r\n\t\t\tif (!this.loading) {\r\n\t\t\t\tthis.pulldown = this.pullPocket = this.pullCaption = this.pullLoading = false\r\n\t\t\t}\r\n\t\t\tthis._super(e);\r\n\t\t},\r\n\t\t_drag: function(e) {\r\n\t\t\tthis._super(e);\r\n\t\t\tif (!this.pulldown && !this.loading && this.topPocket && e.detail.direction === 'down' && this.y >= 0) {\r\n\t\t\t\tthis._initPulldownRefresh();\r\n\t\t\t}\r\n\t\t\tif (this.pulldown) {\r\n\t\t\t\tthis._setCaption(this.y > this.options.down.height ? this.options.down.contentover : this.options.down.contentdown);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_reLayout: function() {\r\n\t\t\tthis.hasVerticalScroll = true;\r\n\t\t\tthis._super();\r\n\t\t},\r\n\t\t//API\r\n\t\tresetPosition: function(time) {\r\n\t\t\tif (this.pulldown) {\r\n\t\t\t\tif (this.y >= this.options.down.height) {\r\n\t\t\t\t\tthis.pulldownLoading(undefined, time || 0);\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\t!this.loading && this.topPocket.classList.remove(CLASS_VISIBILITY);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this._super(time);\r\n\t\t},\r\n\t\tpulldownLoading: function(y, time) {\r\n\t\t\ttypeof y === 'undefined' && (y = this.options.down.height); //默认高度\r\n\t\t\tthis.scrollTo(0, y, time, this.options.bounceEasing);\r\n\t\t\tif (this.loading) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//\t\t\tif (!this.pulldown) {\r\n\t\t\tthis._initPulldownRefresh();\r\n\t\t\t//\t\t\t}\r\n\t\t\tthis._setCaption(this.options.down.contentrefresh);\r\n\t\t\tthis.loading = true;\r\n\t\t\tthis.indicators.map(function(indicator) {\r\n\t\t\t\tindicator.fade(0);\r\n\t\t\t});\r\n\t\t\tvar callback = this.options.down.callback;\r\n\t\t\tcallback && callback.call(this);\r\n\t\t},\r\n\t\tendPulldownToRefresh: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tif (self.topPocket && self.loading && this.pulldown) {\r\n\t\t\t\tself.scrollTo(0, 0, self.options.bounceTime, self.options.bounceEasing);\r\n\t\t\t\tself.loading = false;\r\n\t\t\t\tself._setCaption(self.options.down.contentdown, true);\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tself.loading || self.topPocket.classList.remove(CLASS_VISIBILITY);\r\n\t\t\t\t}, 350);\r\n\t\t\t}\r\n\t\t},\r\n\t\tpullupLoading: function(callback, x, time) {\r\n\t\t\tx = x || 0;\r\n\t\t\tthis.scrollTo(x, this.maxScrollY, time, this.options.bounceEasing);\r\n\t\t\tif (this.loading) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._initPullupRefresh();\r\n\t\t\tthis._setCaption(this.options.up.contentrefresh);\r\n\t\t\tthis.indicators.map(function(indicator) {\r\n\t\t\t\tindicator.fade(0);\r\n\t\t\t});\r\n\t\t\tthis.loading = true;\r\n\t\t\tcallback = callback || this.options.up.callback;\r\n\t\t\tcallback && callback.call(this);\r\n\t\t},\r\n\t\tendPullupToRefresh: function(finished) {\r\n\t\t\tvar self = this;\r\n\t\t\tif (self.bottomPocket) { // && self.loading && !this.pulldown\r\n\t\t\t\tself.loading = false;\r\n\t\t\t\tif (finished) {\r\n\t\t\t\t\tthis.finished = true;\r\n\t\t\t\t\tself._setCaption(self.options.up.contentnomore);\r\n\t\t\t\t\t//\t\t\t\t\tself.bottomPocket.classList.remove(CLASS_VISIBILITY);\r\n\t\t\t\t\t//\t\t\t\t\tself.bottomPocket.classList.add(CLASS_HIDDEN);\r\n\t\t\t\t\tself.wrapper.removeEventListener('scrollbottom', self);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself._setCaption(self.options.up.contentdown);\r\n\t\t\t\t\t//\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tself.loading || self.bottomPocket.classList.remove(CLASS_VISIBILITY);\r\n\t\t\t\t\t//\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdisablePullupToRefresh: function() {\r\n\t\t\tthis._initPullupRefresh();\r\n\t\t\tthis.bottomPocket.className = 'mui-pull-bottom-pocket' + ' ' + CLASS_HIDDEN;\r\n\t\t\tthis.wrapper.removeEventListener('scrollbottom', this);\r\n\t\t},\r\n\t\tenablePullupToRefresh: function() {\r\n\t\t\tthis._initPullupRefresh();\r\n\t\t\tthis.bottomPocket.classList.remove(CLASS_HIDDEN);\r\n\t\t\tthis._setCaption(this.options.up.contentdown);\r\n\t\t\tthis.wrapper.addEventListener('scrollbottom', this);\r\n\t\t},\r\n\t\trefresh: function(isReset) {\r\n\t\t\tif (isReset && this.finished) {\r\n\t\t\t\tthis.enablePullupToRefresh();\r\n\t\t\t\tthis.finished = false;\r\n\t\t\t}\r\n\t\t\tthis._super();\r\n\t\t},\r\n\t}, $.PullRefresh));\r\n\t$.fn.pullRefresh = function(options) {\r\n\t\tif (this.length === 1) {\r\n\t\t\tvar self = this[0];\r\n\t\t\tvar pullRefreshApi = null;\r\n\t\t\toptions = options || {};\r\n\t\t\tvar id = self.getAttribute('data-pullrefresh');\r\n\t\t\tif (!id) {\r\n\t\t\t\tid = ++$.uuid;\r\n\t\t\t\t$.data[id] = pullRefreshApi = new PullRefresh(self, options);\r\n\t\t\t\tself.setAttribute('data-pullrefresh', id);\r\n\t\t\t} else {\r\n\t\t\t\tpullRefreshApi = $.data[id];\r\n\t\t\t}\r\n\t\t\tif (options.down && options.down.auto) { //如果设置了auto，则自动下拉一次\r\n\t\t\t\tpullRefreshApi.pulldownLoading(options.down.autoY);\r\n\t\t\t} else if (options.up && options.up.auto) { //如果设置了auto，则自动上拉一次\r\n\t\t\t\tpullRefreshApi.pullupLoading();\r\n\t\t\t}\r\n\t\t\t//暂不提供这种调用方式吧\r\n\t\t\t//\t\t\tif (typeof options === 'string') {\r\n\t\t\t//\t\t\t\tvar methodValue = pullRefreshApi[options].apply(pullRefreshApi, $.slice.call(arguments, 1));\r\n\t\t\t//\t\t\t\tif (methodValue !== undefined) {\r\n\t\t\t//\t\t\t\t\treturn methodValue;\r\n\t\t\t//\t\t\t\t}\r\n\t\t\t//\t\t\t}\r\n\t\t\treturn pullRefreshApi;\r\n\t\t}\r\n\t};\r\n})(mui, window, document);\r\n/**\r\n * snap 重构\r\n * @param {Object} $\r\n * @param {Object} window\r\n */\r\n(function($, window) {\r\n\tvar CLASS_SLIDER = 'mui-slider';\r\n\tvar CLASS_SLIDER_GROUP = 'mui-slider-group';\r\n\tvar CLASS_SLIDER_LOOP = 'mui-slider-loop';\r\n\tvar CLASS_SLIDER_INDICATOR = 'mui-slider-indicator';\r\n\tvar CLASS_ACTION_PREVIOUS = 'mui-action-previous';\r\n\tvar CLASS_ACTION_NEXT = 'mui-action-next';\r\n\tvar CLASS_SLIDER_ITEM = 'mui-slider-item';\r\n\r\n\tvar CLASS_ACTIVE = 'mui-active';\r\n\r\n\tvar SELECTOR_SLIDER_ITEM = '.' + CLASS_SLIDER_ITEM;\r\n\tvar SELECTOR_SLIDER_INDICATOR = '.' + CLASS_SLIDER_INDICATOR;\r\n\tvar SELECTOR_SLIDER_PROGRESS_BAR = '.mui-slider-progress-bar';\r\n\r\n\tvar Slider = $.Slider = $.Scroll.extend({\r\n\t\tinit: function(element, options) {\r\n\t\t\tthis._super(element, $.extend(true, {\r\n\t\t\t\tfingers: 1,\r\n\t\t\t\tinterval: 0, //设置为0，则不定时轮播\r\n\t\t\t\tscrollY: false,\r\n\t\t\t\tscrollX: true,\r\n\t\t\t\tindicators: false,\r\n\t\t\t\tscrollTime: 1000,\r\n\t\t\t\tstartX: false,\r\n\t\t\t\tslideTime: 0, //滑动动画时间\r\n\t\t\t\tsnap: SELECTOR_SLIDER_ITEM\r\n\t\t\t}, options));\r\n\t\t\tif (this.options.startX) {\r\n\t\t\t\t//\t\t\t\t$.trigger(this.wrapper, 'scrollend', this);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_init: function() {\r\n\t\t\tthis._reInit();\r\n\t\t\tif (this.scroller) {\r\n\t\t\t\tthis.scrollerStyle = this.scroller.style;\r\n\t\t\t\tthis.progressBar = this.wrapper.querySelector(SELECTOR_SLIDER_PROGRESS_BAR);\r\n\t\t\t\tif (this.progressBar) {\r\n\t\t\t\t\tthis.progressBarWidth = this.progressBar.offsetWidth;\r\n\t\t\t\t\tthis.progressBarStyle = this.progressBar.style;\r\n\t\t\t\t}\r\n\t\t\t\t//忘记这个代码是干什么的了？\r\n\t\t\t\t//\t\t\t\tthis.x = this._getScroll();\r\n\t\t\t\t//\t\t\t\tif (this.options.startX === false) {\r\n\t\t\t\t//\t\t\t\t\tthis.options.startX = this.x;\r\n\t\t\t\t//\t\t\t\t}\r\n\t\t\t\t//根据active修正startX\r\n\r\n\t\t\t\tthis._super();\r\n\t\t\t\tthis._initTimer();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_triggerSlide: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tself.isInTransition = false;\r\n\t\t\tvar page = self.currentPage;\r\n\t\t\tself.slideNumber = self._fixedSlideNumber();\r\n\t\t\tif (self.loop) {\r\n\t\t\t\tif (self.slideNumber === 0) {\r\n\t\t\t\t\tself.setTranslate(self.pages[1][0].x, 0);\r\n\t\t\t\t} else if (self.slideNumber === self.itemLength - 3) {\r\n\t\t\t\t\tself.setTranslate(self.pages[self.itemLength - 2][0].x, 0);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (self.lastSlideNumber != self.slideNumber) {\r\n\t\t\t\tself.lastSlideNumber = self.slideNumber;\r\n\t\t\t\tself.lastPage = self.currentPage;\r\n\t\t\t\t$.trigger(self.wrapper, 'slide', {\r\n\t\t\t\t\tslideNumber: self.slideNumber\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tself._initTimer();\r\n\t\t},\r\n\t\t_handleSlide: function(e) {\r\n\t\t\tvar self = this;\r\n\t\t\tif (e.target !== self.wrapper) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar detail = e.detail;\r\n\t\t\tdetail.slideNumber = detail.slideNumber || 0;\r\n\t\t\tvar temps = self.scroller.querySelectorAll(SELECTOR_SLIDER_ITEM);\r\n\t\t\tvar items = [];\r\n\t\t\tfor (var i = 0, len = temps.length; i < len; i++) {\r\n\t\t\t\tvar item = temps[i];\r\n\t\t\t\tif (item.parentNode === self.scroller) {\r\n\t\t\t\t\titems.push(item);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar _slideNumber = detail.slideNumber;\r\n\t\t\tif (self.loop) {\r\n\t\t\t\t_slideNumber += 1;\r\n\t\t\t}\r\n\t\t\tif (!self.wrapper.classList.contains('mui-segmented-control')) {\r\n\t\t\t\tfor (var i = 0, len = items.length; i < len; i++) {\r\n\t\t\t\t\tvar item = items[i];\r\n\t\t\t\t\tif (item.parentNode === self.scroller) {\r\n\t\t\t\t\t\tif (i === _slideNumber) {\r\n\t\t\t\t\t\t\titem.classList.add(CLASS_ACTIVE);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\titem.classList.remove(CLASS_ACTIVE);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar indicatorWrap = self.wrapper.querySelector('.mui-slider-indicator');\r\n\t\t\tif (indicatorWrap) {\r\n\t\t\t\tif (indicatorWrap.getAttribute('data-scroll')) { //scroll\r\n\t\t\t\t\t$(indicatorWrap).scroll().gotoPage(detail.slideNumber);\r\n\t\t\t\t}\r\n\t\t\t\tvar indicators = indicatorWrap.querySelectorAll('.mui-indicator');\r\n\t\t\t\tif (indicators.length > 0) { //图片轮播\r\n\t\t\t\t\tfor (var i = 0, len = indicators.length; i < len; i++) {\r\n\t\t\t\t\t\tindicators[i].classList[i === detail.slideNumber ? 'add' : 'remove'](CLASS_ACTIVE);\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar number = indicatorWrap.querySelector('.mui-number span');\r\n\t\t\t\t\tif (number) { //图文表格\r\n\t\t\t\t\t\tnumber.innerText = (detail.slideNumber + 1);\r\n\t\t\t\t\t} else { //segmented controls\r\n\t\t\t\t\t\tvar controlItems = indicatorWrap.querySelectorAll('.mui-control-item');\r\n\t\t\t\t\t\tfor (var i = 0, len = controlItems.length; i < len; i++) {\r\n\t\t\t\t\t\t\tcontrolItems[i].classList[i === detail.slideNumber ? 'add' : 'remove'](CLASS_ACTIVE);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\te.stopPropagation();\r\n\t\t},\r\n\t\t_handleTabShow: function(e) {\r\n\t\t\tvar self = this;\r\n\t\t\tself.gotoItem((e.detail.tabNumber || 0), self.options.slideTime);\r\n\t\t},\r\n\t\t_handleIndicatorTap: function(event) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar target = event.target;\r\n\t\t\tif (target.classList.contains(CLASS_ACTION_PREVIOUS) || target.classList.contains(CLASS_ACTION_NEXT)) {\r\n\t\t\t\tself[target.classList.contains(CLASS_ACTION_PREVIOUS) ? 'prevItem' : 'nextItem']();\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_initEvent: function(detach) {\r\n\t\t\tvar self = this;\r\n\t\t\tself._super(detach);\r\n\t\t\tvar action = detach ? 'removeEventListener' : 'addEventListener';\r\n\t\t\tself.wrapper[action]('slide', this);\r\n\t\t\tself.wrapper[action]($.eventName('shown', 'tab'), this);\r\n\t\t},\r\n\t\thandleEvent: function(e) {\r\n\t\t\tthis._super(e);\r\n\t\t\tswitch (e.type) {\r\n\t\t\t\tcase 'slide':\r\n\t\t\t\t\tthis._handleSlide(e);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase $.eventName('shown', 'tab'):\r\n\t\t\t\t\tif (~this.snaps.indexOf(e.target)) { //避免嵌套监听错误的tab show\r\n\t\t\t\t\t\tthis._handleTabShow(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_scrollend: function(e) {\r\n\t\t\tthis._super(e);\r\n\t\t\tthis._triggerSlide(e);\r\n\t\t},\r\n\t\t_drag: function(e) {\r\n\t\t\tthis._super(e);\r\n\t\t\tvar direction = e.detail.direction;\r\n\t\t\tif (direction === 'left' || direction === 'right') {\r\n\t\t\t\t//拖拽期间取消定时\r\n\t\t\t\tvar slidershowTimer = this.wrapper.getAttribute('data-slidershowTimer');\r\n\t\t\t\tslidershowTimer && window.clearTimeout(slidershowTimer);\r\n\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_initTimer: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar slider = self.wrapper;\r\n\t\t\tvar interval = self.options.interval;\r\n\t\t\tvar slidershowTimer = slider.getAttribute('data-slidershowTimer');\r\n\t\t\tslidershowTimer && window.clearTimeout(slidershowTimer);\r\n\t\t\tif (interval) {\r\n\t\t\t\tslidershowTimer = window.setTimeout(function() {\r\n\t\t\t\t\tif (!slider) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//仅slider显示状态进行自动轮播\r\n\t\t\t\t\tif (!!(slider.offsetWidth || slider.offsetHeight)) {\r\n\t\t\t\t\t\tself.nextItem(true);\r\n\t\t\t\t\t\t//下一个\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself._initTimer();\r\n\t\t\t\t}, interval);\r\n\t\t\t\tslider.setAttribute('data-slidershowTimer', slidershowTimer);\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t_fixedSlideNumber: function(page) {\r\n\t\t\tpage = page || this.currentPage;\r\n\t\t\tvar slideNumber = page.pageX;\r\n\t\t\tif (this.loop) {\r\n\t\t\t\tif (page.pageX === 0) {\r\n\t\t\t\t\tslideNumber = this.itemLength - 3;\r\n\t\t\t\t} else if (page.pageX === (this.itemLength - 1)) {\r\n\t\t\t\t\tslideNumber = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tslideNumber = page.pageX - 1;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn slideNumber;\r\n\t\t},\r\n\t\t_reLayout: function() {\r\n\t\t\tthis.hasHorizontalScroll = true;\r\n\t\t\tthis.loop = this.scroller.classList.contains(CLASS_SLIDER_LOOP);\r\n\t\t\tthis._super();\r\n\t\t},\r\n\t\t_getScroll: function() {\r\n\t\t\tvar result = $.parseTranslateMatrix($.getStyles(this.scroller, 'webkitTransform'));\r\n\t\t\treturn result ? result.x : 0;\r\n\t\t},\r\n\t\t_transitionEnd: function(e) {\r\n\t\t\tif (e.target !== this.scroller || !this.isInTransition) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis._transitionTime();\r\n\t\t\tthis.isInTransition = false;\r\n\t\t\t$.trigger(this.wrapper, 'scrollend', this);\r\n\t\t},\r\n\t\t_flick: function(e) {\r\n\t\t\tif (!this.moved) { //无moved\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar detail = e.detail;\r\n\t\t\tvar direction = detail.direction;\r\n\t\t\tthis._clearRequestAnimationFrame();\r\n\t\t\tthis.isInTransition = true;\r\n\t\t\t//\t\t\tif (direction === 'up' || direction === 'down') {\r\n\t\t\t//\t\t\t\tthis.resetPosition(this.options.bounceTime);\r\n\t\t\t//\t\t\t\treturn;\r\n\t\t\t//\t\t\t}\r\n\t\t\tif (e.type === 'flick') {\r\n\t\t\t\tif (detail.deltaTime < 200) { //flick，太容易触发，额外校验一下deltaTime\r\n\t\t\t\t\tthis.x = this._getPage((this.slideNumber + (direction === 'right' ? -1 : 1)), true).x;\r\n\t\t\t\t}\r\n\t\t\t\tthis.resetPosition(this.options.bounceTime);\r\n\t\t\t} else if (e.type === 'dragend' && !detail.flick) {\r\n\t\t\t\tthis.resetPosition(this.options.bounceTime);\r\n\t\t\t}\r\n\t\t\te.stopPropagation();\r\n\t\t},\r\n\t\t_initSnap: function() {\r\n\t\t\tthis.scrollerWidth = this.itemLength * this.scrollerWidth;\r\n\t\t\tthis.maxScrollX = Math.min(this.wrapperWidth - this.scrollerWidth, 0);\r\n\t\t\tthis._super();\r\n\t\t\tif (!this.currentPage.x) {\r\n\t\t\t\t//当slider处于隐藏状态时，导致snap计算是错误的，临时先这么判断一下，后续要考虑解决所有scroll在隐藏状态下初始化属性不正确的问题\r\n\t\t\t\tvar currentPage = this.pages[this.loop ? 1 : 0];\r\n\t\t\t\tcurrentPage = currentPage || this.pages[0];\r\n\t\t\t\tif (!currentPage) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.currentPage = currentPage[0];\r\n\t\t\t\tthis.slideNumber = 0;\r\n\t\t\t\tthis.lastSlideNumber = typeof this.lastSlideNumber === 'undefined' ? 0 : this.lastSlideNumber;\r\n\t\t\t} else {\r\n\t\t\t\tthis.slideNumber = this._fixedSlideNumber();\r\n\t\t\t\tthis.lastSlideNumber = typeof this.lastSlideNumber === 'undefined' ? this.slideNumber : this.lastSlideNumber;\r\n\t\t\t}\r\n\t\t\tthis.options.startX = this.currentPage.x || 0;\r\n\t\t},\r\n\t\t_getSnapX: function(offsetLeft) {\r\n\t\t\treturn Math.max(-offsetLeft, this.maxScrollX);\r\n\t\t},\r\n\t\t_getPage: function(slideNumber, isFlick) {\r\n\t\t\tif (this.loop) {\r\n\t\t\t\tif (slideNumber > (this.itemLength - (isFlick ? 2 : 3))) {\r\n\t\t\t\t\tslideNumber = 1;\r\n\t\t\t\t\ttime = 0;\r\n\t\t\t\t} else if (slideNumber < (isFlick ? -1 : 0)) {\r\n\t\t\t\t\tslideNumber = this.itemLength - 2;\r\n\t\t\t\t\ttime = 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tslideNumber += 1;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (!isFlick) {\r\n\t\t\t\t\tif (slideNumber > (this.itemLength - 1)) {\r\n\t\t\t\t\t\tslideNumber = 0;\r\n\t\t\t\t\t\ttime = 0;\r\n\t\t\t\t\t} else if (slideNumber < 0) {\r\n\t\t\t\t\t\tslideNumber = this.itemLength - 1;\r\n\t\t\t\t\t\ttime = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tslideNumber = Math.min(Math.max(0, slideNumber), this.itemLength - 1);\r\n\t\t\t}\r\n\t\t\treturn this.pages[slideNumber][0];\r\n\t\t},\r\n\t\t_gotoItem: function(slideNumber, time) {\r\n\t\t\tthis.currentPage = this._getPage(slideNumber, true); //此处传true。可保证程序切换时，动画与人手操作一致(第一张，最后一张的切换动画)\r\n\t\t\tthis.scrollTo(this.currentPage.x, 0, time, this.options.scrollEasing);\r\n\t\t\tif (time === 0) {\r\n\t\t\t\t$.trigger(this.wrapper, 'scrollend', this);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//API\r\n\t\tsetTranslate: function(x, y) {\r\n\t\t\tthis._super(x, y);\r\n\t\t\tvar progressBar = this.progressBar;\r\n\t\t\tif (progressBar) {\r\n\t\t\t\tthis.progressBarStyle.webkitTransform = this._getTranslateStr((-x * (this.progressBarWidth / this.wrapperWidth)), 0);\r\n\t\t\t}\r\n\t\t},\r\n\t\tresetPosition: function(time) {\r\n\t\t\ttime = time || 0;\r\n\t\t\tif (this.x > 0) {\r\n\t\t\t\tthis.x = 0;\r\n\t\t\t} else if (this.x < this.maxScrollX) {\r\n\t\t\t\tthis.x = this.maxScrollX;\r\n\t\t\t}\r\n\t\t\tthis.currentPage = this._nearestSnap(this.x);\r\n\t\t\tthis.scrollTo(this.currentPage.x, 0, time, this.options.scrollEasing);\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\tgotoItem: function(slideNumber, time) {\r\n\t\t\tthis._gotoItem(slideNumber, typeof time === 'undefined' ? this.options.scrollTime : time);\r\n\t\t},\r\n\t\tnextItem: function() {\r\n\t\t\tthis._gotoItem(this.slideNumber + 1, this.options.scrollTime);\r\n\t\t},\r\n\t\tprevItem: function() {\r\n\t\t\tthis._gotoItem(this.slideNumber - 1, this.options.scrollTime);\r\n\t\t},\r\n\t\tgetSlideNumber: function() {\r\n\t\t\treturn this.slideNumber || 0;\r\n\t\t},\r\n\t\t_reInit: function() {\r\n\t\t\tvar groups = this.wrapper.querySelectorAll('.' + CLASS_SLIDER_GROUP);\r\n\t\t\tfor (var i = 0, len = groups.length; i < len; i++) {\r\n\t\t\t\tif (groups[i].parentNode === this.wrapper) {\r\n\t\t\t\t\tthis.scroller = groups[i];\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.scrollerStyle = this.scroller && this.scroller.style;\r\n\t\t\tif (this.progressBar) {\r\n\t\t\t\tthis.progressBarWidth = this.progressBar.offsetWidth;\r\n\t\t\t\tthis.progressBarStyle = this.progressBar.style;\r\n\t\t\t}\r\n\t\t},\r\n\t\trefresh: function(options) {\r\n\t\t\tif (options) {\r\n\t\t\t\t$.extend(this.options, options);\r\n\t\t\t\tthis._super();\r\n\t\t\t\tthis._initTimer();\r\n\t\t\t} else {\r\n\t\t\t\tthis._super();\r\n\t\t\t}\r\n\t\t},\r\n\t\tdestroy: function() {\r\n\t\t\tthis._initEvent(true); //detach\r\n\t\t\tdelete $.data[this.wrapper.getAttribute('data-slider')];\r\n\t\t\tthis.wrapper.setAttribute('data-slider', '');\r\n\t\t}\r\n\t});\r\n\t$.fn.slider = function(options) {\r\n\t\tvar slider = null;\r\n\t\tthis.each(function() {\r\n\t\t\tvar sliderElement = this;\r\n\t\t\tif (!this.classList.contains(CLASS_SLIDER)) {\r\n\t\t\t\tsliderElement = this.querySelector('.' + CLASS_SLIDER);\r\n\t\t\t}\r\n\t\t\tif (sliderElement && sliderElement.querySelector(SELECTOR_SLIDER_ITEM)) {\r\n\t\t\t\tvar id = sliderElement.getAttribute('data-slider');\r\n\t\t\t\tif (!id) {\r\n\t\t\t\t\tid = ++$.uuid;\r\n\t\t\t\t\t$.data[id] = slider = new Slider(sliderElement, options);\r\n\t\t\t\t\tsliderElement.setAttribute('data-slider', id);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tslider = $.data[id];\r\n\t\t\t\t\tif (slider && options) {\r\n\t\t\t\t\t\tslider.refresh(options);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn slider;\r\n\t};\r\n\t$.ready(function() {\r\n\t\t//\t\tsetTimeout(function() {\r\n\t\t$('.mui-slider').slider();\r\n\t\t$('.mui-scroll-wrapper.mui-slider-indicator.mui-segmented-control').scroll({\r\n\t\t\tscrollY: false,\r\n\t\t\tscrollX: true,\r\n\t\t\tindicators: false,\r\n\t\t\tsnap: '.mui-control-item'\r\n\t\t});\r\n\t\t//\t\t}, 500); //临时处理slider宽度计算不正确的问题(初步确认是scrollbar导致的)\r\n\r\n\t});\r\n})(mui, window);\r\n/**\r\n * pullRefresh 5+\r\n * @param {type} $\r\n * @returns {undefined}\r\n */\r\n(function($, document) {\r\n\tif (!($.os.plus && $.os.android)) { //仅在android的5+版本使用\r\n\t\treturn;\r\n\t}\r\n\tvar CLASS_PLUS_PULLREFRESH = 'mui-plus-pullrefresh';\r\n\tvar CLASS_VISIBILITY = 'mui-visibility';\r\n\tvar CLASS_HIDDEN = 'mui-hidden';\r\n\tvar CLASS_BLOCK = 'mui-block';\r\n\r\n\tvar CLASS_PULL_CAPTION = 'mui-pull-caption';\r\n\tvar CLASS_PULL_CAPTION_DOWN = 'mui-pull-caption-down';\r\n\tvar CLASS_PULL_CAPTION_REFRESH = 'mui-pull-caption-refresh';\r\n\tvar CLASS_PULL_CAPTION_NOMORE = 'mui-pull-caption-nomore';\r\n\r\n\tvar PlusPullRefresh = $.Class.extend({\r\n\t\tinit: function(element, options) {\r\n\t\t\tthis.element = element;\r\n\t\t\tthis.options = options;\r\n\t\t\tthis.wrapper = this.scroller = element;\r\n\t\t\tthis._init();\r\n\t\t\tthis._initPulldownRefreshEvent();\r\n\t\t},\r\n\t\t_init: function() {\r\n\t\t\tvar self = this;\r\n\t\t\t//\t\t\tdocument.addEventListener('plusscrollbottom', this);\r\n\t\t\twindow.addEventListener('dragup', self);\r\n\t\t\tdocument.addEventListener(\"plusscrollbottom\", self);\r\n\t\t\tself.scrollInterval = window.setInterval(function() {\r\n\t\t\t\tif (self.isScroll && !self.loading) {\r\n\t\t\t\t\tif (window.pageYOffset + window.innerHeight + 10 >= document.documentElement.scrollHeight) {\r\n\t\t\t\t\t\tself.isScroll = false; //放在这里是因为快速滚动的话，有可能检测时，还没到底，所以只要有滚动，没到底之前一直检测高度变化\r\n\t\t\t\t\t\tif (self.bottomPocket) {\r\n\t\t\t\t\t\t\tself.pullupLoading();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 100);\r\n\t\t},\r\n\t\t_initPulldownRefreshEvent: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tif (self.topPocket && self.options.webviewId) {\r\n\t\t\t\t$.plusReady(function() {\r\n\t\t\t\t\tvar webview = plus.webview.getWebviewById(self.options.webviewId);\r\n\t\t\t\t\tif (!webview) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tself.options.webview = webview;\r\n\t\t\t\t\tvar downOptions = self.options.down;\r\n\t\t\t\t\tvar height = downOptions.height;\r\n\t\t\t\t\twebview.addEventListener(\"dragBounce\", function(e) {\r\n\t\t\t\t\t\tif (!self.pulldown) {\r\n\t\t\t\t\t\t\tself._initPulldownRefresh();\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tself.pullPocket.classList.add(CLASS_BLOCK);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tswitch (e.status) {\r\n\t\t\t\t\t\t\tcase \"beforeChangeOffset\": //下拉可刷新状态\r\n\t\t\t\t\t\t\t\tself._setCaption(downOptions.contentdown);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"afterChangeOffset\": //松开可刷新状态\r\n\t\t\t\t\t\t\t\tself._setCaption(downOptions.contentover);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase \"dragEndAfterChangeOffset\": //正在刷新状态\r\n\t\t\t\t\t\t\t\t//执行下拉刷新所在webview的回调函数\r\n\t\t\t\t\t\t\t\twebview.evalJS(\"mui&&mui.options.pullRefresh.down.callback()\");\r\n\t\t\t\t\t\t\t\tself._setCaption(downOptions.contentrefresh);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}, false);\r\n\t\t\t\t\twebview.setBounce({\r\n\t\t\t\t\t\tposition: {\r\n\t\t\t\t\t\t\ttop: height * 2 + 'px'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tchangeoffset: {\r\n\t\t\t\t\t\t\ttop: height + 'px'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\thandleEvent: function(e) {\r\n\t\t\tvar self = this;\r\n\t\t\tif (self.stopped) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t//5+的plusscrollbottom当页面内容较少时，不触发\r\n\t\t\t//\t\t\tif (e.type === 'plusscrollbottom') {\r\n\t\t\t//\t\t\t\tif (this.bottomPocket) {\r\n\t\t\t//\t\t\t\t\tthis.pullupLoading();\r\n\t\t\t//\t\t\t\t}\r\n\t\t\t//\t\t\t}\r\n\t\t\tself.isScroll = false;\r\n\t\t\tif (e.type === 'dragup' || e.type === 'plusscrollbottom') {\r\n\t\t\t\tself.isScroll = true;\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tself.isScroll = false;\r\n\t\t\t\t}, 1000);\r\n\t\t\t}\r\n\t\t}\r\n\t}).extend($.extend({\r\n\t\tsetStopped: function(stopped) { //该方法是子页面调用的\r\n\t\t\tthis.stopped = !!stopped;\r\n\t\t\t//TODO 此处需要设置当前webview的bounce为none,目前5+有BUG\r\n\t\t\tvar webview = plus.webview.currentWebview();\r\n\t\t\tif (this.stopped) {\r\n\t\t\t\twebview.setStyle({\r\n\t\t\t\t\tbounce: 'none'\r\n\t\t\t\t});\r\n\t\t\t\twebview.setBounce({\r\n\t\t\t\t\tposition: {\r\n\t\t\t\t\t\ttop: 'none'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tvar height = this.options.down.height;\r\n\t\t\t\twebview.setStyle({\r\n\t\t\t\t\tbounce: 'vertical'\r\n\t\t\t\t});\r\n\t\t\t\twebview.setBounce({\r\n\t\t\t\t\tposition: {\r\n\t\t\t\t\t\ttop: height * 2 + 'px'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tchangeoffset: {\r\n\t\t\t\t\t\ttop: height + 'px'\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tpulldownLoading: function() { //该方法是子页面调用的\r\n\t\t\t$.plusReady(function() {\r\n\t\t\t\tplus.webview.currentWebview().setBounce({\r\n\t\t\t\t\toffset: {\r\n\t\t\t\t\t\ttop: this.options.down.height + \"px\"\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}.bind(this));\r\n\t\t},\r\n\t\t//\t\t_pulldownLoading: function() { //该方法是子页面调用的\r\n\t\t//\t\t\tvar self = this;\r\n\t\t//\t\t\t$.plusReady(function() {\r\n\t\t//\t\t\t\tplus.webview.getWebviewById(self.options.webviewId).evalJS(\"mui&&mui.options.pullRefresh.down&&mui.options.pullRefresh.down.callback()\");\r\n\t\t//\t\t\t});\r\n\t\t//\t\t},\r\n\t\tendPulldownToRefresh: function() { //该方法是子页面调用的\r\n\t\t\tvar webview = plus.webview.currentWebview();\r\n\t\t\twebview.parent().evalJS(\"mui&&mui(document.querySelector('.mui-content')).pullRefresh('\" + JSON.stringify({\r\n\t\t\t\twebviewId: webview.id\r\n\t\t\t}) + \"')._endPulldownToRefresh()\");\r\n\t\t},\r\n\t\t_endPulldownToRefresh: function() { //该方法是父页面调用的\r\n\t\t\tvar self = this;\r\n\t\t\tif (self.topPocket && self.options.webview) {\r\n\t\t\t\tself.options.webview.endPullToRefresh(); //下拉刷新所在webview回弹\r\n\t\t\t\tself.loading = false;\r\n\t\t\t\tself._setCaption(self.options.down.contentdown, true);\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tself.loading || self.topPocket.classList.remove(CLASS_BLOCK);\r\n\t\t\t\t}, 350);\r\n\t\t\t}\r\n\t\t},\r\n\t\tpullupLoading: function(callback) {\r\n\t\t\tvar self = this;\r\n\t\t\tif (self.isLoading) return;\r\n\t\t\tself.isLoading = true;\r\n\t\t\tif (self.pulldown !== false) {\r\n\t\t\t\tself._initPullupRefresh();\r\n\t\t\t} else {\r\n\t\t\t\tthis.pullPocket.classList.add(CLASS_BLOCK);\r\n\t\t\t}\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tself.pullLoading.classList.add(CLASS_VISIBILITY);\r\n\t\t\t\tself.pullLoading.classList.remove(CLASS_HIDDEN);\r\n\t\t\t\tself.pullCaption.innerHTML = ''; //修正5+里边第一次加载时，文字显示的bug(还会显示出来个“多”,猜测应该是渲染问题导致的)\r\n\t\t\t\tself.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_REFRESH;\r\n\t\t\t\tself.pullCaption.innerHTML = self.options.up.contentrefresh;\r\n\t\t\t\tcallback = callback || self.options.up.callback;\r\n\t\t\t\tcallback && callback.call(self);\r\n\t\t\t}, 300);\r\n\t\t},\r\n\t\tendPullupToRefresh: function(finished) {\r\n\t\t\tvar self = this;\r\n\t\t\tif (self.pullLoading) {\r\n\t\t\t\tself.pullLoading.classList.remove(CLASS_VISIBILITY);\r\n\t\t\t\tself.pullLoading.classList.add(CLASS_HIDDEN);\r\n\t\t\t\tself.isLoading = false;\r\n\t\t\t\tif (finished) {\r\n\t\t\t\t\tself.finished = true;\r\n\t\t\t\t\tself.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_NOMORE;\r\n\t\t\t\t\tself.pullCaption.innerHTML = self.options.up.contentnomore;\r\n\t\t\t\t\t//\t\t\t\t\tself.bottomPocket.classList.remove(CLASS_BLOCK);\r\n\t\t\t\t\t//\t\t\t\t\tself.bottomPocket.classList.add(CLASS_HIDDEN);\r\n\t\t\t\t\t//取消5+的plusscrollbottom事件\r\n\t\t\t\t\tdocument.removeEventListener('plusscrollbottom', self);\r\n\t\t\t\t\twindow.removeEventListener('dragup', self);\r\n\t\t\t\t} else { //初始化时隐藏，后续不再隐藏\r\n\t\t\t\t\tself.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\r\n\t\t\t\t\tself.pullCaption.innerHTML = self.options.up.contentdown;\r\n\t\t\t\t\t//\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t//\t\t\t\t\t\tself.loading || self.bottomPocket.classList.remove(CLASS_BLOCK);\r\n\t\t\t\t\t//\t\t\t\t\t}, 350);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tdisablePullupToRefresh: function() {\r\n\t\t\tthis._initPullupRefresh();\r\n\t\t\tthis.bottomPocket.className = 'mui-pull-bottom-pocket' + ' ' + CLASS_HIDDEN;\r\n\t\t\twindow.removeEventListener('dragup', this);\r\n\t\t},\r\n\t\tenablePullupToRefresh: function() {\r\n\t\t\tthis._initPullupRefresh();\r\n\t\t\tthis.bottomPocket.classList.remove(CLASS_HIDDEN);\r\n\t\t\tthis.pullCaption.className = CLASS_PULL_CAPTION + ' ' + CLASS_PULL_CAPTION_DOWN;\r\n\t\t\tthis.pullCaption.innerHTML = this.options.up.contentdown;\r\n\t\t\tdocument.addEventListener(\"plusscrollbottom\", this);\r\n\t\t\twindow.addEventListener('dragup', this);\r\n\t\t},\r\n\t\tscrollTo: function(x, y, time) {\r\n\t\t\t$.scrollTo(y, time);\r\n\t\t},\r\n\t\trefresh: function(isReset) {\r\n\t\t\tif (isReset && this.finished) {\r\n\t\t\t\tthis.enablePullupToRefresh();\r\n\t\t\t\tthis.finished = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}, $.PullRefresh));\r\n\r\n\t//override h5 pullRefresh\r\n\t$.fn.pullRefresh = function(options) {\r\n\t\tvar self;\r\n\t\tif (this.length === 0) {\r\n\t\t\tself = document.createElement('div');\r\n\t\t\tself.className = 'mui-content';\r\n\t\t\tdocument.body.appendChild(self);\r\n\t\t} else {\r\n\t\t\tself = this[0];\r\n\t\t}\r\n\t\t//一个父需要支持多个子下拉刷新\r\n\t\toptions = options || {}\r\n\t\tif (typeof options === 'string') {\r\n\t\t\toptions = $.parseJSON(options);\r\n\t\t};\r\n\t\t!options.webviewId && (options.webviewId = (plus.webview.currentWebview().id || plus.webview.currentWebview().getURL()));\r\n\t\tvar pullRefreshApi = null;\r\n\t\tvar attrWebviewId = options.webviewId && options.webviewId.replace(/\\//g, \"_\"); //替换所有\"/\"\r\n\t\tvar id = self.getAttribute('data-pullrefresh-plus-' + attrWebviewId);\r\n\t\tif (!id) { //避免重复初始化5+ pullrefresh\r\n\t\t\tid = ++$.uuid;\r\n\t\t\tself.setAttribute('data-pullrefresh-plus-' + attrWebviewId, id);\r\n\t\t\tdocument.body.classList.add(CLASS_PLUS_PULLREFRESH);\r\n\t\t\t$.data[id] = pullRefreshApi = new PlusPullRefresh(self, options);\r\n\t\t} else {\r\n\t\t\tpullRefreshApi = $.data[id];\r\n\t\t}\r\n\t\tif (options.down && options.down.auto) { //如果设置了auto，则自动下拉一次\r\n\t\t\tpullRefreshApi.pulldownLoading(); //parent webview\r\n\t\t} else if (options.up && options.up.auto) { //如果设置了auto，则自动上拉一次\r\n\t\t\tpullRefreshApi.pullupLoading();\r\n\t\t}\r\n\t\treturn pullRefreshApi;\r\n\t};\r\n})(mui, document);\r\n/**\r\n * off-canvas\r\n * @param {type} $\r\n * @param {type} window\r\n * @param {type} document\r\n * @param {type} action\r\n * @returns {undefined}\r\n */\r\n(function($, window, document, name) {\r\n\tvar CLASS_OFF_CANVAS_LEFT = 'mui-off-canvas-left';\r\n\tvar CLASS_OFF_CANVAS_RIGHT = 'mui-off-canvas-right';\r\n\tvar CLASS_ACTION_BACKDROP = 'mui-off-canvas-backdrop';\r\n\tvar CLASS_OFF_CANVAS_WRAP = 'mui-off-canvas-wrap';\r\n\r\n\tvar CLASS_SLIDE_IN = 'mui-slide-in';\r\n\tvar CLASS_ACTIVE = 'mui-active';\r\n\r\n\r\n\tvar CLASS_TRANSITIONING = 'mui-transitioning';\r\n\r\n\tvar SELECTOR_INNER_WRAP = '.mui-inner-wrap';\r\n\r\n\r\n\tvar OffCanvas = $.Class.extend({\r\n\t\tinit: function(element, options) {\r\n\t\t\tthis.wrapper = this.element = element;\r\n\t\t\tthis.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\r\n\t\t\tthis.classList = this.wrapper.classList;\r\n\t\t\tif (this.scroller) {\r\n\t\t\t\tthis.options = $.extend(true, {\r\n\t\t\t\t\tdragThresholdX: 10,\r\n\t\t\t\t\tscale: 0.8,\r\n\t\t\t\t\topacity: 0.1,\r\n\t\t\t\t\tpreventDefaultException: {\r\n\t\t\t\t\t\ttagName: /^(INPUT|TEXTAREA|BUTTON|SELECT|VIDEO)$/\r\n\t\t\t\t\t},\r\n\t\t\t\t}, options);\r\n\t\t\t\tdocument.body.classList.add('mui-fullscreen'); //fullscreen\r\n\t\t\t\tthis.refresh();\r\n\t\t\t\tthis.initEvent();\r\n\t\t\t}\r\n\t\t},\r\n\t\t_preventDefaultException: function(el, exceptions) {\r\n\t\t\tfor (var i in exceptions) {\r\n\t\t\t\tif (exceptions[i].test(el[i])) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\trefresh: function(offCanvas) {\r\n\t\t\t//\t\t\toffCanvas && !offCanvas.classList.contains(CLASS_ACTIVE) && this.classList.remove(CLASS_ACTIVE);\r\n\t\t\tthis.slideIn = this.classList.contains(CLASS_SLIDE_IN);\r\n\t\t\tthis.scalable = this.classList.contains('mui-scalable') && !this.slideIn;\r\n\t\t\tthis.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\r\n\t\t\t//\t\t\t!offCanvas && this.scroller.classList.remove(CLASS_TRANSITIONING);\r\n\t\t\t//\t\t\t!offCanvas && this.scroller.setAttribute('style', '');\r\n\t\t\tthis.offCanvasLefts = this.wrapper.querySelectorAll('.' + CLASS_OFF_CANVAS_LEFT);\r\n\t\t\tthis.offCanvasRights = this.wrapper.querySelectorAll('.' + CLASS_OFF_CANVAS_RIGHT);\r\n\t\t\tif (offCanvas) {\r\n\t\t\t\tif (offCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT)) {\r\n\t\t\t\t\tthis.offCanvasLeft = offCanvas;\r\n\t\t\t\t} else if (offCanvas.classList.contains(CLASS_OFF_CANVAS_RIGHT)) {\r\n\t\t\t\t\tthis.offCanvasRight = offCanvas;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tthis.offCanvasRight = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT);\r\n\t\t\t\tthis.offCanvasLeft = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT);\r\n\t\t\t}\r\n\t\t\tthis.offCanvasRightWidth = this.offCanvasLeftWidth = 0;\r\n\t\t\tthis.offCanvasLeftSlideIn = this.offCanvasRightSlideIn = false;\r\n\t\t\tif (this.offCanvasRight) {\r\n\t\t\t\tthis.offCanvasRightWidth = this.offCanvasRight.offsetWidth;\r\n\t\t\t\tthis.offCanvasRightSlideIn = this.slideIn && (this.offCanvasRight.parentNode === this.wrapper);\r\n\t\t\t\t//\t\t\t\tthis.offCanvasRight.classList.remove(CLASS_TRANSITIONING);\r\n\t\t\t\t//\t\t\t\tthis.offCanvasRight.classList.remove(CLASS_ACTIVE);\r\n\t\t\t\t//\t\t\t\tthis.offCanvasRight.setAttribute('style', '');\r\n\t\t\t}\r\n\t\t\tif (this.offCanvasLeft) {\r\n\t\t\t\tthis.offCanvasLeftWidth = this.offCanvasLeft.offsetWidth;\r\n\t\t\t\tthis.offCanvasLeftSlideIn = this.slideIn && (this.offCanvasLeft.parentNode === this.wrapper);\r\n\t\t\t\t//\t\t\t\tthis.offCanvasLeft.classList.remove(CLASS_TRANSITIONING);\r\n\t\t\t\t//\t\t\t\tthis.offCanvasLeft.classList.remove(CLASS_ACTIVE);\r\n\t\t\t\t//\t\t\t\tthis.offCanvasLeft.setAttribute('style', '');\r\n\t\t\t}\r\n\t\t\tthis.backdrop = this.scroller.querySelector('.' + CLASS_ACTION_BACKDROP);\r\n\r\n\t\t\tthis.options.dragThresholdX = this.options.dragThresholdX || 10;\r\n\r\n\t\t\tthis.visible = false;\r\n\t\t\tthis.startX = null;\r\n\t\t\tthis.lastX = null;\r\n\t\t\tthis.offsetX = null;\r\n\t\t\tthis.lastTranslateX = null;\r\n\t\t},\r\n\t\thandleEvent: function(e) {\r\n\t\t\tswitch (e.type) {\r\n\t\t\t\tcase $.EVENT_START:\r\n\t\t\t\t\te.target && !this._preventDefaultException(e.target, this.options.preventDefaultException) && e.preventDefault();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'webkitTransitionEnd': //有个bug需要处理，需要考虑假设没有触发webkitTransitionEnd的情况\r\n\t\t\t\t\tif (e.target === this.scroller) {\r\n\t\t\t\t\t\tthis._dispatchEvent();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'drag':\r\n\t\t\t\t\tvar detail = e.detail;\r\n\t\t\t\t\tif (!this.startX) {\r\n\t\t\t\t\t\tthis.startX = detail.center.x;\r\n\t\t\t\t\t\tthis.lastX = this.startX;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.lastX = detail.center.x;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!this.isDragging && Math.abs(this.lastX - this.startX) > this.options.dragThresholdX && (detail.direction === 'left' || (detail.direction === 'right'))) {\r\n\t\t\t\t\t\tif (this.slideIn) {\r\n\t\t\t\t\t\t\tthis.scroller = this.wrapper.querySelector(SELECTOR_INNER_WRAP);\r\n\t\t\t\t\t\t\tif (this.classList.contains(CLASS_ACTIVE)) {\r\n\t\t\t\t\t\t\t\tif (this.offCanvasRight && this.offCanvasRight.classList.contains(CLASS_ACTIVE)) {\r\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\r\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\r\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (detail.direction === 'left' && this.offCanvasRight) {\r\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\r\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\r\n\t\t\t\t\t\t\t\t} else if (detail.direction === 'right' && this.offCanvasLeft) {\r\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\r\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.scroller = null;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (this.classList.contains(CLASS_ACTIVE)) {\r\n\t\t\t\t\t\t\t\tif (detail.direction === 'left') {\r\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\r\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\r\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (detail.direction === 'right') {\r\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasLeft;\r\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.offCanvas = this.offCanvasRight;\r\n\t\t\t\t\t\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.offCanvas && this.scroller) {\r\n\t\t\t\t\t\t\tthis.startX = this.lastX;\r\n\t\t\t\t\t\t\tthis.isDragging = true;\r\n\r\n\t\t\t\t\t\t\t$.gestures.session.lockDirection = true; //锁定方向\r\n\t\t\t\t\t\t\t$.gestures.session.startDirection = detail.direction;\r\n\r\n\t\t\t\t\t\t\tthis.offCanvas.classList.remove(CLASS_TRANSITIONING);\r\n\t\t\t\t\t\t\tthis.scroller.classList.remove(CLASS_TRANSITIONING);\r\n\t\t\t\t\t\t\tthis.offsetX = this.getTranslateX();\r\n\t\t\t\t\t\t\tthis._initOffCanvasVisible();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.isDragging) {\r\n\t\t\t\t\t\tthis.updateTranslate(this.offsetX + (this.lastX - this.startX));\r\n\t\t\t\t\t\tdetail.gesture.preventDefault();\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'dragend':\r\n\t\t\t\t\tif (this.isDragging) {\r\n\t\t\t\t\t\tvar detail = e.detail;\r\n\t\t\t\t\t\tvar direction = detail.direction;\r\n\t\t\t\t\t\tthis.isDragging = false;\r\n\t\t\t\t\t\tthis.offCanvas.classList.add(CLASS_TRANSITIONING);\r\n\t\t\t\t\t\tthis.scroller.classList.add(CLASS_TRANSITIONING);\r\n\t\t\t\t\t\tvar ratio = 0;\r\n\t\t\t\t\t\tvar x = this.getTranslateX();\r\n\t\t\t\t\t\tif (!this.slideIn) {\r\n\t\t\t\t\t\t\tif (x >= 0) {\r\n\t\t\t\t\t\t\t\tratio = (this.offCanvasLeftWidth && (x / this.offCanvasLeftWidth)) || 0;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tratio = (this.offCanvasRightWidth && (x / this.offCanvasRightWidth)) || 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (ratio === 0) {\r\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\r\n\t\t\t\t\t\t\t\tthis._dispatchEvent(); //此处不触发webkitTransitionEnd,所以手动dispatch\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (direction === 'right' && ratio >= 0 && (ratio >= 0.5 || detail.swipe)) { //右滑打开\r\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\r\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio < 0 && (ratio > -0.5 || detail.swipe)) { //右滑关闭\r\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\r\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio > 0 && ratio < 0.5) { //右滑还原关闭\r\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\r\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio < 0.5) { //右滑还原打开\r\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\r\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio <= 0 && (ratio <= -0.5 || detail.swipe)) { //左滑打开\r\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\r\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio > 0 && (ratio <= 0.5 || detail.swipe)) { //左滑关闭\r\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\r\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio < 0 && ratio >= -0.5) { //左滑还原关闭\r\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\r\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio > 0.5) { //左滑还原打开\r\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\r\n\t\t\t\t\t\t\t} else { //默认关闭\r\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (ratio === 1 || ratio === -1) { //此处不触发webkitTransitionEnd,所以手动dispatch\r\n\t\t\t\t\t\t\t\tthis._dispatchEvent();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tif (x >= 0) {\r\n\t\t\t\t\t\t\t\tratio = (this.offCanvasRightWidth && (x / this.offCanvasRightWidth)) || 0;\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tratio = (this.offCanvasLeftWidth && (x / this.offCanvasLeftWidth)) || 0;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (direction === 'right' && ratio <= 0 && (ratio >= -0.5 || detail.swipe)) { //右滑打开\r\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\r\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio > 0 && (ratio >= 0.5 || detail.swipe)) { //右滑关闭\r\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\r\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio <= -0.5) { //右滑还原关闭\r\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\r\n\t\t\t\t\t\t\t} else if (direction === 'right' && ratio > 0 && ratio <= 0.5) { //右滑还原打开\r\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\r\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio >= 0 && (ratio <= 0.5 || detail.swipe)) { //左滑打开\r\n\t\t\t\t\t\t\t\tthis.openPercentage(-100);\r\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio < 0 && (ratio <= -0.5 || detail.swipe)) { //左滑关闭\r\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\r\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio >= 0.5) { //左滑还原关闭\r\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\r\n\t\t\t\t\t\t\t} else if (direction === 'left' && ratio >= -0.5 && ratio < 0) { //左滑还原打开\r\n\t\t\t\t\t\t\t\tthis.openPercentage(100);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.openPercentage(0);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (ratio === 1 || ratio === -1 || ratio === 0) {\r\n\t\t\t\t\t\t\t\tthis._dispatchEvent();\r\n\t\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_dispatchEvent: function() {\r\n\t\t\tif (this.classList.contains(CLASS_ACTIVE)) {\r\n\t\t\t\t$.trigger(this.wrapper, 'shown', this);\r\n\t\t\t} else {\r\n\t\t\t\t$.trigger(this.wrapper, 'hidden', this);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_initOffCanvasVisible: function() {\r\n\t\t\tif (!this.visible) {\r\n\t\t\t\tthis.visible = true;\r\n\t\t\t\tif (this.offCanvasLeft) {\r\n\t\t\t\t\tthis.offCanvasLeft.style.visibility = 'visible';\r\n\t\t\t\t}\r\n\t\t\t\tif (this.offCanvasRight) {\r\n\t\t\t\t\tthis.offCanvasRight.style.visibility = 'visible';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tinitEvent: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tif (self.backdrop) {\r\n\t\t\t\tself.backdrop.addEventListener('tap', function(e) {\r\n\t\t\t\t\tself.close();\r\n\t\t\t\t\te.detail.gesture.preventDefault();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this.classList.contains('mui-draggable')) {\r\n\t\t\t\tthis.wrapper.addEventListener($.EVENT_START, this); //临时处理\r\n\t\t\t\tthis.wrapper.addEventListener('drag', this);\r\n\t\t\t\tthis.wrapper.addEventListener('dragend', this);\r\n\t\t\t}\r\n\t\t\tthis.wrapper.addEventListener('webkitTransitionEnd', this);\r\n\t\t},\r\n\t\topenPercentage: function(percentage) {\r\n\t\t\tvar p = percentage / 100;\r\n\t\t\tif (!this.slideIn) {\r\n\t\t\t\tif (this.offCanvasLeft && percentage >= 0) {\r\n\t\t\t\t\tthis.updateTranslate(this.offCanvasLeftWidth * p);\r\n\t\t\t\t\tthis.offCanvasLeft.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\r\n\t\t\t\t} else if (this.offCanvasRight && percentage <= 0) {\r\n\t\t\t\t\tthis.updateTranslate(this.offCanvasRightWidth * p);\r\n\t\t\t\t\tthis.offCanvasRight.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\r\n\t\t\t\t}\r\n\t\t\t\tthis.classList[p !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\r\n\t\t\t} else {\r\n\t\t\t\tif (this.offCanvasLeft && percentage >= 0) {\r\n\t\t\t\t\tp = p === 0 ? -1 : 0;\r\n\t\t\t\t\tthis.updateTranslate(this.offCanvasLeftWidth * p);\r\n\t\t\t\t\tthis.offCanvasLeft.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\r\n\t\t\t\t} else if (this.offCanvasRight && percentage <= 0) {\r\n\t\t\t\t\tp = p === 0 ? 1 : 0;\r\n\t\t\t\t\tthis.updateTranslate(this.offCanvasRightWidth * p);\r\n\t\t\t\t\tthis.offCanvasRight.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\r\n\t\t\t\t}\r\n\t\t\t\tthis.classList[percentage !== 0 ? 'add' : 'remove'](CLASS_ACTIVE);\r\n\t\t\t}\r\n\t\t},\r\n\t\tupdateTranslate: function(x) {\r\n\t\t\tif (x !== this.lastTranslateX) {\r\n\t\t\t\tif (!this.slideIn) {\r\n\t\t\t\t\tif ((!this.offCanvasLeft && x > 0) || (!this.offCanvasRight && x < 0)) {\r\n\t\t\t\t\t\tthis.setTranslateX(0);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.leftShowing && x > this.offCanvasLeftWidth) {\r\n\t\t\t\t\t\tthis.setTranslateX(this.offCanvasLeftWidth);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (this.rightShowing && x < -this.offCanvasRightWidth) {\r\n\t\t\t\t\t\tthis.setTranslateX(-this.offCanvasRightWidth);\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setTranslateX(x);\r\n\t\t\t\t\tif (x >= 0) {\r\n\t\t\t\t\t\tthis.leftShowing = true;\r\n\t\t\t\t\t\tthis.rightShowing = false;\r\n\t\t\t\t\t\tif (x > 0) {\r\n\t\t\t\t\t\t\tif (this.offCanvasLeft) {\r\n\t\t\t\t\t\t\t\t$.each(this.offCanvasLefts, function(index, offCanvas) {\r\n\t\t\t\t\t\t\t\t\tif (offCanvas === this.offCanvasLeft) {\r\n\t\t\t\t\t\t\t\t\t\tthis.offCanvasLeft.style.zIndex = 0;\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\toffCanvas.style.zIndex = -1;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tif (this.offCanvasRight) {\r\n\t\t\t\t\t\t\t\tthis.offCanvasRight.style.zIndex = -1;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.rightShowing = true;\r\n\t\t\t\t\t\tthis.leftShowing = false;\r\n\t\t\t\t\t\tif (this.offCanvasRight) {\r\n\t\t\t\t\t\t\t$.each(this.offCanvasRights, function(index, offCanvas) {\r\n\t\t\t\t\t\t\t\tif (offCanvas === this.offCanvasRight) {\r\n\t\t\t\t\t\t\t\t\toffCanvas.style.zIndex = 0;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\toffCanvas.style.zIndex = -1;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}.bind(this));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.offCanvasLeft) {\r\n\t\t\t\t\t\t\tthis.offCanvasLeft.style.zIndex = -1;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.offCanvas.classList.contains(CLASS_OFF_CANVAS_RIGHT)) {\r\n\t\t\t\t\t\tif (x < 0) {\r\n\t\t\t\t\t\t\tthis.setTranslateX(0);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (x > this.offCanvasRightWidth) {\r\n\t\t\t\t\t\t\tthis.setTranslateX(this.offCanvasRightWidth);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (x > 0) {\r\n\t\t\t\t\t\t\tthis.setTranslateX(0);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (x < -this.offCanvasLeftWidth) {\r\n\t\t\t\t\t\t\tthis.setTranslateX(-this.offCanvasLeftWidth);\r\n\t\t\t\t\t\t\treturn;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.setTranslateX(x);\r\n\t\t\t\t}\r\n\t\t\t\tthis.lastTranslateX = x;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetTranslateX: $.animationFrame(function(x) {\r\n\t\t\tif (this.scroller) {\r\n\t\t\t\tif (this.scalable && this.offCanvas.parentNode === this.wrapper) {\r\n\t\t\t\t\tvar percent = Math.abs(x) / this.offCanvasWidth;\r\n\t\t\t\t\tvar zoomOutScale = 1 - (1 - this.options.scale) * percent;\r\n\t\t\t\t\tvar zoomInScale = this.options.scale + (1 - this.options.scale) * percent;\r\n\t\t\t\t\tvar zoomOutOpacity = 1 - (1 - this.options.opacity) * percent;\r\n\t\t\t\t\tvar zoomInOpacity = this.options.opacity + (1 - this.options.opacity) * percent;\r\n\t\t\t\t\tif (this.offCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT)) {\r\n\t\t\t\t\t\tthis.offCanvas.style.webkitTransformOrigin = '-100%';\r\n\t\t\t\t\t\tthis.scroller.style.webkitTransformOrigin = 'left';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.offCanvas.style.webkitTransformOrigin = '200%';\r\n\t\t\t\t\t\tthis.scroller.style.webkitTransformOrigin = 'right';\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.offCanvas.style.opacity = zoomInOpacity;\r\n\t\t\t\t\tthis.offCanvas.style.webkitTransform = 'translate3d(0,0,0) scale(' + zoomInScale + ')';\r\n\t\t\t\t\tthis.scroller.style.webkitTransform = 'translate3d(' + x + 'px,0,0) scale(' + zoomOutScale + ')';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.slideIn) {\r\n\t\t\t\t\t\tthis.offCanvas.style.webkitTransform = 'translate3d(' + x + 'px,0,0)';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.scroller.style.webkitTransform = 'translate3d(' + x + 'px,0,0)';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}),\r\n\t\tgetTranslateX: function() {\r\n\t\t\tif (this.offCanvas) {\r\n\t\t\t\tvar scroller = this.slideIn ? this.offCanvas : this.scroller;\r\n\t\t\t\tvar result = $.parseTranslateMatrix($.getStyles(scroller, 'webkitTransform'));\r\n\t\t\t\treturn (result && result.x) || 0;\r\n\t\t\t}\r\n\t\t\treturn 0;\r\n\t\t},\r\n\t\tisShown: function(direction) {\r\n\t\t\tvar shown = false;\r\n\t\t\tif (!this.slideIn) {\r\n\t\t\t\tvar x = this.getTranslateX();\r\n\t\t\t\tif (direction === 'right') {\r\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && x < 0;\r\n\t\t\t\t} else if (direction === 'left') {\r\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && x > 0;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && x !== 0;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tif (direction === 'left') {\r\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE);\r\n\t\t\t\t} else if (direction === 'right') {\r\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tshown = this.classList.contains(CLASS_ACTIVE) && (this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE) || this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn shown;\r\n\t\t},\r\n\t\tclose: function() {\r\n\t\t\tthis._initOffCanvasVisible();\r\n\t\t\tthis.offCanvas = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT + '.' + CLASS_ACTIVE) || this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_LEFT + '.' + CLASS_ACTIVE);\r\n\t\t\tthis.offCanvasWidth = this.offCanvas.offsetWidth;\r\n\t\t\tif (this.scroller) {\r\n\t\t\t\tthis.offCanvas.offsetHeight;\r\n\t\t\t\tthis.offCanvas.classList.add(CLASS_TRANSITIONING);\r\n\t\t\t\tthis.scroller.classList.add(CLASS_TRANSITIONING);\r\n\t\t\t\tthis.openPercentage(0);\r\n\t\t\t}\r\n\t\t},\r\n\t\tshow: function(direction) {\r\n\t\t\tthis._initOffCanvasVisible();\r\n\t\t\tif (this.isShown(direction)) {\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\tif (!direction) {\r\n\t\t\t\tdirection = this.wrapper.querySelector('.' + CLASS_OFF_CANVAS_RIGHT) ? 'right' : 'left';\r\n\t\t\t}\r\n\t\t\tif (direction === 'right') {\r\n\t\t\t\tthis.offCanvas = this.offCanvasRight;\r\n\t\t\t\tthis.offCanvasWidth = this.offCanvasRightWidth;\r\n\t\t\t} else {\r\n\t\t\t\tthis.offCanvas = this.offCanvasLeft;\r\n\t\t\t\tthis.offCanvasWidth = this.offCanvasLeftWidth;\r\n\t\t\t}\r\n\t\t\tif (this.scroller) {\r\n\t\t\t\tthis.offCanvas.offsetHeight;\r\n\t\t\t\tthis.offCanvas.classList.add(CLASS_TRANSITIONING);\r\n\t\t\t\tthis.scroller.classList.add(CLASS_TRANSITIONING);\r\n\t\t\t\tthis.openPercentage(direction === 'left' ? 100 : -100);\r\n\t\t\t}\r\n\t\t\treturn true;\r\n\t\t},\r\n\t\ttoggle: function(directionOrOffCanvas) {\r\n\t\t\tvar direction = directionOrOffCanvas;\r\n\t\t\tif (directionOrOffCanvas && directionOrOffCanvas.classList) {\r\n\t\t\t\tdirection = directionOrOffCanvas.classList.contains(CLASS_OFF_CANVAS_LEFT) ? 'left' : 'right';\r\n\t\t\t\tthis.refresh(directionOrOffCanvas);\r\n\t\t\t}\r\n\t\t\tif (!this.show(direction)) {\r\n\t\t\t\tthis.close();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t//hash to offcanvas\r\n\tvar findOffCanvasContainer = function(target) {\r\n\t\tparentNode = target.parentNode;\r\n\t\tif (parentNode) {\r\n\t\t\tif (parentNode.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\r\n\t\t\t\treturn parentNode;\r\n\t\t\t} else {\r\n\t\t\t\tparentNode = parentNode.parentNode;\r\n\t\t\t\tif (parentNode.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\r\n\t\t\t\t\treturn parentNode;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tvar handle = function(event, target) {\r\n\t\tif (target.tagName === 'A' && target.hash) {\r\n\t\t\tvar offcanvas = document.getElementById(target.hash.replace('#', ''));\r\n\t\t\tif (offcanvas) {\r\n\t\t\t\tvar container = findOffCanvasContainer(offcanvas);\r\n\t\t\t\tif (container) {\r\n\t\t\t\t\t$.targets._container = container;\r\n\t\t\t\t\treturn offcanvas;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t$.registerTarget({\r\n\t\tname: name,\r\n\t\tindex: 60,\r\n\t\thandle: handle,\r\n\t\ttarget: false,\r\n\t\tisReset: false,\r\n\t\tisContinue: true\r\n\t});\r\n\r\n\twindow.addEventListener('tap', function(e) {\r\n\t\tif (!$.targets.offcanvas) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t//TODO 此处类型的代码后续考虑统一优化(target机制)，现在的实现费力不讨好\r\n\t\tvar target = e.target;\r\n\t\tfor (; target && target !== document; target = target.parentNode) {\r\n\t\t\tif (target.tagName === 'A' && target.hash && target.hash === ('#' + $.targets.offcanvas.id)) {\r\n\t\t\t\te.detail && e.detail.gesture && e.detail.gesture.preventDefault(); //fixed hashchange\r\n\t\t\t\t$($.targets._container).offCanvas().toggle($.targets.offcanvas);\r\n\t\t\t\t$.targets.offcanvas = $.targets._container = null;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t$.fn.offCanvas = function(options) {\r\n\t\tvar offCanvasApis = [];\r\n\t\tthis.each(function() {\r\n\t\t\tvar offCanvasApi = null;\r\n\t\t\tvar self = this;\r\n\t\t\t//hack old version\r\n\t\t\tif (!self.classList.contains(CLASS_OFF_CANVAS_WRAP)) {\r\n\t\t\t\tself = findOffCanvasContainer(self);\r\n\t\t\t}\r\n\t\t\tvar id = self.getAttribute('data-offCanvas');\r\n\t\t\tif (!id) {\r\n\t\t\t\tid = ++$.uuid;\r\n\t\t\t\t$.data[id] = offCanvasApi = new OffCanvas(self, options);\r\n\t\t\t\tself.setAttribute('data-offCanvas', id);\r\n\t\t\t} else {\r\n\t\t\t\toffCanvasApi = $.data[id];\r\n\t\t\t}\r\n\t\t\tif (options === 'show' || options === 'close' || options === 'toggle') {\r\n\t\t\t\toffCanvasApi.toggle();\r\n\t\t\t}\r\n\t\t\toffCanvasApis.push(offCanvasApi);\r\n\t\t});\r\n\t\treturn offCanvasApis.length === 1 ? offCanvasApis[0] : offCanvasApis;\r\n\t};\r\n\t$.ready(function() {\r\n\t\t$('.mui-off-canvas-wrap').offCanvas();\r\n\t});\r\n})(mui, window, document, 'offcanvas');\r\n/**\r\n * actions\r\n * @param {type} $\r\n * @param {type} name\r\n * @returns {undefined}\r\n */\r\n(function($, name) {\r\n\tvar CLASS_ACTION = 'mui-action';\r\n\r\n\tvar handle = function(event, target) {\r\n\t\tvar className = target.className || '';\r\n\t\tif (typeof className !== 'string') { //svg className(SVGAnimatedString)\r\n\t\t\tclassName = '';\r\n\t\t}\r\n\t\tif (className && ~className.indexOf(CLASS_ACTION)) {\r\n\t\t\tif (target.classList.contains('mui-action-back')) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}\r\n\t\t\treturn target;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t$.registerTarget({\r\n\t\tname: name,\r\n\t\tindex: 50,\r\n\t\thandle: handle,\r\n\t\ttarget: false,\r\n\t\tisContinue: true\r\n\t});\r\n\r\n})(mui, 'action');\r\n/**\r\n * Modals\r\n * @param {type} $\r\n * @param {type} window\r\n * @param {type} document\r\n * @param {type} name\r\n * @returns {undefined}\r\n */\r\n(function($, window, document, name) {\r\n\tvar CLASS_MODAL = 'mui-modal';\r\n\r\n\tvar handle = function(event, target) {\r\n\t\tif (target.tagName === 'A' && target.hash) {\r\n\t\t\tvar modal = document.getElementById(target.hash.replace('#', ''));\r\n\t\t\tif (modal && modal.classList.contains(CLASS_MODAL)) {\r\n\t\t\t\treturn modal;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t$.registerTarget({\r\n\t\tname: name,\r\n\t\tindex: 50,\r\n\t\thandle: handle,\r\n\t\ttarget: false,\r\n\t\tisReset: false,\r\n\t\tisContinue: true\r\n\t});\r\n\r\n\twindow.addEventListener('tap', function(event) {\r\n\t\tif ($.targets.modal) {\r\n\t\t\tevent.detail.gesture.preventDefault(); //fixed hashchange\r\n\t\t\t$.targets.modal.classList.toggle('mui-active');\r\n\t\t}\r\n\t});\r\n})(mui, window, document, 'modal');\r\n/**\r\n * Popovers\r\n * @param {type} $\r\n * @param {type} window\r\n * @param {type} document\r\n * @param {type} name\r\n * @param {type} undefined\r\n * @returns {undefined}\r\n */\r\n(function($, window, document, name) {\r\n\r\n\tvar CLASS_POPOVER = 'mui-popover';\r\n\tvar CLASS_POPOVER_ARROW = 'mui-popover-arrow';\r\n\tvar CLASS_ACTION_POPOVER = 'mui-popover-action';\r\n\tvar CLASS_BACKDROP = 'mui-backdrop';\r\n\tvar CLASS_BAR_POPOVER = 'mui-bar-popover';\r\n\tvar CLASS_BAR_BACKDROP = 'mui-bar-backdrop';\r\n\tvar CLASS_ACTION_BACKDROP = 'mui-backdrop-action';\r\n\tvar CLASS_ACTIVE = 'mui-active';\r\n\tvar CLASS_BOTTOM = 'mui-bottom';\r\n\r\n\r\n\r\n\tvar handle = function(event, target) {\r\n\t\tif (target.tagName === 'A' && target.hash) {\r\n\t\t\t$.targets._popover = document.getElementById(target.hash.replace('#', ''));\r\n\t\t\tif ($.targets._popover && $.targets._popover.classList.contains(CLASS_POPOVER)) {\r\n\t\t\t\treturn target;\r\n\t\t\t} else {\r\n\t\t\t\t$.targets._popover = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t$.registerTarget({\r\n\t\tname: name,\r\n\t\tindex: 60,\r\n\t\thandle: handle,\r\n\t\ttarget: false,\r\n\t\tisReset: false,\r\n\t\tisContinue: true\r\n\t});\r\n\r\n\tvar fixedPopoverScroll = function(isPopoverScroll) {\r\n\t\t//\t\tif (isPopoverScroll) {\r\n\t\t//\t\t\tdocument.body.setAttribute('style', 'overflow:hidden;');\r\n\t\t//\t\t} else {\r\n\t\t//\t\t\tdocument.body.setAttribute('style', '');\r\n\t\t//\t\t}\r\n\t};\r\n\tvar onPopoverShown = function(e) {\r\n\t\tthis.removeEventListener('webkitTransitionEnd', onPopoverShown);\r\n\t\tthis.addEventListener($.EVENT_MOVE, $.preventDefault);\r\n\t\t$.trigger(this, 'shown', this);\r\n\t}\r\n\tvar onPopoverHidden = function(e) {\r\n\t\tsetStyle(this, 'none');\r\n\t\tthis.removeEventListener('webkitTransitionEnd', onPopoverHidden);\r\n\t\tthis.removeEventListener($.EVENT_MOVE, $.preventDefault);\r\n\t\tfixedPopoverScroll(false);\r\n\t\t$.trigger(this, 'hidden', this);\r\n\t};\r\n\r\n\tvar backdrop = (function() {\r\n\t\tvar element = document.createElement('div');\r\n\t\telement.classList.add(CLASS_BACKDROP);\r\n\t\telement.addEventListener($.EVENT_MOVE, $.preventDefault);\r\n\t\telement.addEventListener('tap', function(e) {\r\n\t\t\tvar popover = $.targets._popover;\r\n\t\t\tif (popover) {\r\n\t\t\t\tpopover.addEventListener('webkitTransitionEnd', onPopoverHidden);\r\n\t\t\t\tpopover.classList.remove(CLASS_ACTIVE);\r\n\t\t\t\tremoveBackdrop(popover);\r\n\t\t\t\tdocument.body.setAttribute('style', ''); //webkitTransitionEnd有时候不触发？\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn element;\r\n\t}());\r\n\tvar removeBackdropTimer;\r\n\tvar removeBackdrop = function(popover) {\r\n\t\tbackdrop.setAttribute('style', 'opacity:0');\r\n\t\t$.targets.popover = $.targets._popover = null; //reset\r\n\t\tremoveBackdropTimer = $.later(function() {\r\n\t\t\tif (!popover.classList.contains(CLASS_ACTIVE) && backdrop.parentNode && backdrop.parentNode === document.body) {\r\n\t\t\t\tdocument.body.removeChild(backdrop);\r\n\t\t\t}\r\n\t\t}, 350);\r\n\t};\r\n\twindow.addEventListener('tap', function(e) {\r\n\t\tif (!$.targets.popover) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar toggle = false;\r\n\t\tvar target = e.target;\r\n\t\tfor (; target && target !== document; target = target.parentNode) {\r\n\t\t\tif (target === $.targets.popover) {\r\n\t\t\t\ttoggle = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (toggle) {\r\n\t\t\te.detail.gesture.preventDefault(); //fixed hashchange\r\n\t\t\ttogglePopover($.targets._popover, $.targets.popover);\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tvar togglePopover = function(popover, anchor, state) {\r\n\t\tif ((state === 'show' && popover.classList.contains(CLASS_ACTIVE)) || (state === 'hide' && !popover.classList.contains(CLASS_ACTIVE))) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tremoveBackdropTimer && removeBackdropTimer.cancel(); //取消remove的timer\r\n\t\t//remove一遍，以免来回快速切换，导致webkitTransitionEnd不触发，无法remove\r\n\t\tpopover.removeEventListener('webkitTransitionEnd', onPopoverShown);\r\n\t\tpopover.removeEventListener('webkitTransitionEnd', onPopoverHidden);\r\n\t\tbackdrop.classList.remove(CLASS_BAR_BACKDROP);\r\n\t\tbackdrop.classList.remove(CLASS_ACTION_BACKDROP);\r\n\t\tvar _popover = document.querySelector('.mui-popover.mui-active');\r\n\t\tif (_popover) {\r\n\t\t\t//\t\t\t_popover.setAttribute('style', '');\r\n\t\t\t_popover.addEventListener('webkitTransitionEnd', onPopoverHidden);\r\n\t\t\t_popover.classList.remove(CLASS_ACTIVE);\r\n\t\t\t//\t\t\t_popover.removeEventListener('webkitTransitionEnd', onPopoverHidden);\r\n\t\t\t//\t\t\tfixedPopoverScroll(false);\r\n\t\t\t//同一个弹出则直接返回，解决同一个popover的toggle\r\n\t\t\tif (popover === _popover) {\r\n\t\t\t\tremoveBackdrop(_popover);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar isActionSheet = false;\r\n\t\tif (popover.classList.contains(CLASS_BAR_POPOVER) || popover.classList.contains(CLASS_ACTION_POPOVER)) { //navBar\r\n\t\t\tif (popover.classList.contains(CLASS_ACTION_POPOVER)) { //action sheet popover\r\n\t\t\t\tisActionSheet = true;\r\n\t\t\t\tbackdrop.classList.add(CLASS_ACTION_BACKDROP);\r\n\t\t\t} else { //bar popover\r\n\t\t\t\tbackdrop.classList.add(CLASS_BAR_BACKDROP);\r\n\t\t\t\t//\t\t\t\tif (anchor) {\r\n\t\t\t\t//\t\t\t\t\tif (anchor.parentNode) {\r\n\t\t\t\t//\t\t\t\t\t\tvar offsetWidth = anchor.offsetWidth;\r\n\t\t\t\t//\t\t\t\t\t\tvar offsetLeft = anchor.offsetLeft;\r\n\t\t\t\t//\t\t\t\t\t\tvar innerWidth = window.innerWidth;\r\n\t\t\t\t//\t\t\t\t\t\tpopover.style.left = (Math.min(Math.max(offsetLeft, defaultPadding), innerWidth - offsetWidth - defaultPadding)) + \"px\";\r\n\t\t\t\t//\t\t\t\t\t} else {\r\n\t\t\t\t//\t\t\t\t\t\t//TODO anchor is position:{left,top,bottom,right}\r\n\t\t\t\t//\t\t\t\t\t}\r\n\t\t\t\t//\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tsetStyle(popover, 'block'); //actionsheet transform\r\n\t\tpopover.offsetHeight;\r\n\t\tpopover.classList.add(CLASS_ACTIVE);\r\n\t\tbackdrop.setAttribute('style', '');\r\n\t\tdocument.body.appendChild(backdrop);\r\n\t\tfixedPopoverScroll(true);\r\n\t\tcalPosition(popover, anchor, isActionSheet); //position\r\n\t\tbackdrop.classList.add(CLASS_ACTIVE);\r\n\t\tpopover.addEventListener('webkitTransitionEnd', onPopoverShown);\r\n\t};\r\n\tvar setStyle = function(popover, display, top, left) {\r\n\t\tvar style = popover.style;\r\n\t\tif (typeof display !== 'undefined')\r\n\t\t\tstyle.display = display;\r\n\t\tif (typeof top !== 'undefined')\r\n\t\t\tstyle.top = top + 'px';\r\n\t\tif (typeof left !== 'undefined')\r\n\t\t\tstyle.left = left + 'px';\r\n\t};\r\n\tvar calPosition = function(popover, anchor, isActionSheet) {\r\n\t\tif (!popover || !anchor) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (isActionSheet) { //actionsheet\r\n\t\t\tsetStyle(popover, 'block')\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tvar wWidth = window.innerWidth;\r\n\t\tvar wHeight = window.innerHeight;\r\n\r\n\t\tvar pWidth = popover.offsetWidth;\r\n\t\tvar pHeight = popover.offsetHeight;\r\n\r\n\t\tvar aWidth = anchor.offsetWidth;\r\n\t\tvar aHeight = anchor.offsetHeight;\r\n\t\tvar offset = $.offset(anchor);\r\n\r\n\t\tvar arrow = popover.querySelector('.' + CLASS_POPOVER_ARROW);\r\n\t\tif (!arrow) {\r\n\t\t\tarrow = document.createElement('div');\r\n\t\t\tarrow.className = CLASS_POPOVER_ARROW;\r\n\t\t\tpopover.appendChild(arrow);\r\n\t\t}\r\n\t\tvar arrowSize = arrow && arrow.offsetWidth / 2 || 0;\r\n\r\n\r\n\r\n\t\tvar pTop = 0;\r\n\t\tvar pLeft = 0;\r\n\t\tvar diff = 0;\r\n\t\tvar arrowLeft = 0;\r\n\t\tvar defaultPadding = popover.classList.contains(CLASS_ACTION_POPOVER) ? 0 : 5;\r\n\r\n\t\tvar position = 'top';\r\n\t\tif ((pHeight + arrowSize) < (offset.top - window.pageYOffset)) { //top\r\n\t\t\tpTop = offset.top - pHeight - arrowSize;\r\n\t\t} else if ((pHeight + arrowSize) < (wHeight - (offset.top - window.pageYOffset) - aHeight)) { //bottom\r\n\t\t\tposition = 'bottom';\r\n\t\t\tpTop = offset.top + aHeight + arrowSize;\r\n\t\t} else { //middle\r\n\t\t\tposition = 'middle';\r\n\t\t\tpTop = Math.max((wHeight - pHeight) / 2 + window.pageYOffset, 0);\r\n\t\t\tpLeft = Math.max((wWidth - pWidth) / 2 + window.pageXOffset, 0);\r\n\t\t}\r\n\t\tif (position === 'top' || position === 'bottom') {\r\n\t\t\tpLeft = aWidth / 2 + offset.left - pWidth / 2;\r\n\t\t\tdiff = pLeft;\r\n\t\t\tif (pLeft < defaultPadding) pLeft = defaultPadding;\r\n\t\t\tif (pLeft + pWidth > wWidth) pLeft = wWidth - pWidth - defaultPadding;\r\n\r\n\t\t\tif (arrow) {\r\n\t\t\t\tif (position === 'top') {\r\n\t\t\t\t\tarrow.classList.add(CLASS_BOTTOM);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tarrow.classList.remove(CLASS_BOTTOM);\r\n\t\t\t\t}\r\n\t\t\t\tdiff = diff - pLeft;\r\n\t\t\t\tarrowLeft = (pWidth / 2 - arrowSize / 2 + diff);\r\n\t\t\t\tarrowLeft = Math.max(Math.min(arrowLeft, pWidth - arrowSize * 2 - 6), 6);\r\n\t\t\t\tarrow.setAttribute('style', 'left:' + arrowLeft + 'px');\r\n\t\t\t}\r\n\t\t} else if (position === 'middle') {\r\n\t\t\tarrow.setAttribute('style', 'display:none');\r\n\t\t}\r\n\t\tsetStyle(popover, 'block', pTop, pLeft);\r\n\t};\r\n\r\n\t$.createMask = function(callback) {\r\n\t\tvar element = document.createElement('div');\r\n\t\telement.classList.add(CLASS_BACKDROP);\r\n\t\telement.addEventListener($.EVENT_MOVE, $.preventDefault);\r\n\t\telement.addEventListener('tap', function() {\r\n\t\t\tmask.close();\r\n\t\t});\r\n\t\tvar mask = [element];\r\n\t\tmask._show = false;\r\n\t\tmask.show = function() {\r\n\t\t\tmask._show = true;\r\n\t\t\telement.setAttribute('style', 'opacity:1');\r\n\t\t\tdocument.body.appendChild(element);\r\n\t\t\treturn mask;\r\n\t\t};\r\n\t\tmask._remove = function() {\r\n\t\t\tif (mask._show) {\r\n\t\t\t\tmask._show = false;\r\n\t\t\t\telement.setAttribute('style', 'opacity:0');\r\n\t\t\t\t$.later(function() {\r\n\t\t\t\t\tvar body = document.body;\r\n\t\t\t\t\telement.parentNode === body && body.removeChild(element);\r\n\t\t\t\t}, 350);\r\n\t\t\t}\r\n\t\t\treturn mask;\r\n\t\t};\r\n\t\tmask.close = function() {\r\n\t\t\tif (callback) {\r\n\t\t\t\tif (callback() !== false) {\r\n\t\t\t\t\tmask._remove();\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tmask._remove();\r\n\t\t\t}\r\n\t\t};\r\n\t\treturn mask;\r\n\t};\r\n\t$.fn.popover = function() {\r\n\t\tvar args = arguments;\r\n\t\tthis.each(function() {\r\n\t\t\t$.targets._popover = this;\r\n\t\t\tif (args[0] === 'show' || args[0] === 'hide' || args[0] === 'toggle') {\r\n\t\t\t\ttogglePopover(this, args[1], args[0]);\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n})(mui, window, document, 'popover');\r\n/**\r\n * segmented-controllers\r\n * @param {type} $\r\n * @param {type} window\r\n * @param {type} document\r\n * @param {type} undefined\r\n * @returns {undefined}\r\n */\r\n(function($, window, document, name, undefined) {\r\n\r\n\tvar CLASS_CONTROL_ITEM = 'mui-control-item';\r\n\tvar CLASS_SEGMENTED_CONTROL = 'mui-segmented-control';\r\n\tvar CLASS_SEGMENTED_CONTROL_VERTICAL = 'mui-segmented-control-vertical';\r\n\tvar CLASS_CONTROL_CONTENT = 'mui-control-content';\r\n\tvar CLASS_TAB_BAR = 'mui-bar-tab';\r\n\tvar CLASS_TAB_ITEM = 'mui-tab-item';\r\n\tvar CLASS_SLIDER_ITEM = 'mui-slider-item';\r\n\r\n\tvar handle = function(event, target) {\r\n\t\tif (target.classList && (target.classList.contains(CLASS_CONTROL_ITEM) || target.classList.contains(CLASS_TAB_ITEM))) {\r\n\t\t\tif (target.parentNode && target.parentNode.classList && target.parentNode.classList.contains(CLASS_SEGMENTED_CONTROL_VERTICAL)) {\r\n\t\t\t\t//vertical 如果preventDefault会导致无法滚动\r\n\t\t\t} else {\r\n\t\t\t\tevent.preventDefault(); //stop hash change\r\n\t\t\t}\r\n\t\t\t//\t\t\tif (target.hash) {\r\n\t\t\treturn target;\r\n\t\t\t//\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t$.registerTarget({\r\n\t\tname: name,\r\n\t\tindex: 80,\r\n\t\thandle: handle,\r\n\t\ttarget: false\r\n\t});\r\n\r\n\twindow.addEventListener('tap', function(e) {\r\n\r\n\t\tvar targetTab = $.targets.tab;\r\n\t\tif (!targetTab) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar activeTab;\r\n\t\tvar activeBodies;\r\n\t\tvar targetBody;\r\n\t\tvar className = 'mui-active';\r\n\t\tvar classSelector = '.' + className;\r\n\t\tvar segmentedControl = targetTab.parentNode;\r\n\r\n\t\tfor (; segmentedControl && segmentedControl !== document; segmentedControl = segmentedControl.parentNode) {\r\n\t\t\tif (segmentedControl.classList.contains(CLASS_SEGMENTED_CONTROL)) {\r\n\t\t\t\tactiveTab = segmentedControl.querySelector(classSelector + '.' + CLASS_CONTROL_ITEM);\r\n\t\t\t\tbreak;\r\n\t\t\t} else if (segmentedControl.classList.contains(CLASS_TAB_BAR)) {\r\n\t\t\t\tactiveTab = segmentedControl.querySelector(classSelector + '.' + CLASS_TAB_ITEM);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (activeTab) {\r\n\t\t\tactiveTab.classList.remove(className);\r\n\t\t}\r\n\r\n\t\tvar isLastActive = targetTab === activeTab;\r\n\t\tif (targetTab) {\r\n\t\t\ttargetTab.classList.add(className);\r\n\t\t}\r\n\r\n\t\tif (!targetTab.hash) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttargetBody = document.getElementById(targetTab.hash.replace('#', ''));\r\n\r\n\t\tif (!targetBody) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (!targetBody.classList.contains(CLASS_CONTROL_CONTENT)) { //tab bar popover\r\n\t\t\ttargetTab.classList[isLastActive ? 'remove' : 'add'](className);\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (isLastActive) { //same\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar parentNode = targetBody.parentNode;\r\n\t\tactiveBodies = parentNode.querySelectorAll('.' + CLASS_CONTROL_CONTENT + classSelector);\r\n\t\tfor (var i = 0; i < activeBodies.length; i++) {\r\n\t\t\tvar activeBody = activeBodies[i];\r\n\t\t\tactiveBody.parentNode === parentNode && activeBody.classList.remove(className);\r\n\t\t}\r\n\r\n\t\ttargetBody.classList.add(className);\r\n\r\n\t\tvar contents = [];\r\n\t\tvar _contents = parentNode.querySelectorAll('.' + CLASS_CONTROL_CONTENT);\r\n\t\tfor (var i = 0; i < _contents.length; i++) { //查找直属子节点\r\n\t\t\t_contents[i].parentNode === parentNode && (contents.push(_contents[i]));\r\n\t\t}\r\n\t\t$.trigger(targetBody, $.eventName('shown', name), {\r\n\t\t\ttabNumber: Array.prototype.indexOf.call(contents, targetBody)\r\n\t\t});\r\n\t\te.detail && e.detail.gesture.preventDefault(); //fixed hashchange\r\n\t});\r\n\r\n})(mui, window, document, 'tab');\r\n/**\r\n * Toggles switch\r\n * @param {type} $\r\n * @param {type} window\r\n * @param {type} name\r\n * @returns {undefined}\r\n */\r\n(function($, window, name) {\r\n\r\n\tvar CLASS_SWITCH = 'mui-switch';\r\n\tvar CLASS_SWITCH_HANDLE = 'mui-switch-handle';\r\n\tvar CLASS_ACTIVE = 'mui-active';\r\n\tvar CLASS_DRAGGING = 'mui-dragging';\r\n\r\n\tvar CLASS_DISABLED = 'mui-disabled';\r\n\r\n\tvar SELECTOR_SWITCH_HANDLE = '.' + CLASS_SWITCH_HANDLE;\r\n\r\n\tvar handle = function(event, target) {\r\n\t\tif (target.classList && target.classList.contains(CLASS_SWITCH)) {\r\n\t\t\treturn target;\r\n\t\t}\r\n\t\treturn false;\r\n\t};\r\n\r\n\t$.registerTarget({\r\n\t\tname: name,\r\n\t\tindex: 100,\r\n\t\thandle: handle,\r\n\t\ttarget: false\r\n\t});\r\n\r\n\r\n\tvar Toggle = function(element) {\r\n\t\tthis.element = element;\r\n\t\tthis.classList = this.element.classList;\r\n\t\tthis.handle = this.element.querySelector(SELECTOR_SWITCH_HANDLE);\r\n\t\tthis.init();\r\n\t\tthis.initEvent();\r\n\t};\r\n\tToggle.prototype.init = function() {\r\n\t\tthis.toggleWidth = this.element.offsetWidth;\r\n\t\tthis.handleWidth = this.handle.offsetWidth;\r\n\t\tthis.handleX = this.toggleWidth - this.handleWidth - 3;\r\n\t};\r\n\tToggle.prototype.initEvent = function() {\r\n\t\tthis.element.addEventListener($.EVENT_START, this);\r\n\t\tthis.element.addEventListener('drag', this);\r\n\t\tthis.element.addEventListener('swiperight', this);\r\n\t\tthis.element.addEventListener($.EVENT_END, this);\r\n\t\tthis.element.addEventListener($.EVENT_CANCEL, this);\r\n\r\n\t};\r\n\tToggle.prototype.handleEvent = function(e) {\r\n\t\tif (this.classList.contains(CLASS_DISABLED)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tswitch (e.type) {\r\n\t\t\tcase $.EVENT_START:\r\n\t\t\t\tthis.start(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'drag':\r\n\t\t\t\tthis.drag(e);\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'swiperight':\r\n\t\t\t\tthis.swiperight();\r\n\t\t\t\tbreak;\r\n\t\t\tcase $.EVENT_END:\r\n\t\t\tcase $.EVENT_CANCEL:\r\n\t\t\t\tthis.end(e);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t};\r\n\tToggle.prototype.start = function(e) {\r\n\t\tthis.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '.2s';\r\n\t\tthis.classList.add(CLASS_DRAGGING);\r\n\t\tif (this.toggleWidth === 0 || this.handleWidth === 0) { //当switch处于隐藏状态时，width为0，需要重新初始化\r\n\t\t\tthis.init();\r\n\t\t}\r\n\t};\r\n\tToggle.prototype.drag = function(e) {\r\n\t\tvar detail = e.detail;\r\n\t\tif (!this.isDragging) {\r\n\t\t\tif (detail.direction === 'left' || detail.direction === 'right') {\r\n\t\t\t\tthis.isDragging = true;\r\n\t\t\t\tthis.lastChanged = undefined;\r\n\t\t\t\tthis.initialState = this.classList.contains(CLASS_ACTIVE);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.isDragging) {\r\n\t\t\tthis.setTranslateX(detail.deltaX);\r\n\t\t\te.stopPropagation();\r\n\t\t\tdetail.gesture.preventDefault();\r\n\t\t}\r\n\t};\r\n\tToggle.prototype.swiperight = function(e) {\r\n\t\tif (this.isDragging) {\r\n\t\t\te.stopPropagation();\r\n\t\t}\r\n\t};\r\n\tToggle.prototype.end = function(e) {\r\n\t\tthis.classList.remove(CLASS_DRAGGING);\r\n\t\tif (this.isDragging) {\r\n\t\t\tthis.isDragging = false;\r\n\t\t\te.stopPropagation();\r\n\t\t\t$.trigger(this.element, 'toggle', {\r\n\t\t\t\tisActive: this.classList.contains(CLASS_ACTIVE)\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.toggle();\r\n\t\t}\r\n\t};\r\n\tToggle.prototype.toggle = function(animate) {\r\n\t\tvar classList = this.classList;\r\n\t\tif (animate === false) {\r\n\t\t\tthis.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '0s';\r\n\t\t} else {\r\n\t\t\tthis.handle.style.webkitTransitionDuration = this.element.style.webkitTransitionDuration = '.2s';\r\n\t\t}\r\n\t\tif (classList.contains(CLASS_ACTIVE)) {\r\n\t\t\tclassList.remove(CLASS_ACTIVE);\r\n\t\t\tthis.handle.style.webkitTransform = 'translate(0,0)';\r\n\t\t} else {\r\n\t\t\tclassList.add(CLASS_ACTIVE);\r\n\t\t\tthis.handle.style.webkitTransform = 'translate(' + this.handleX + 'px,0)';\r\n\t\t}\r\n\t\t$.trigger(this.element, 'toggle', {\r\n\t\t\tisActive: this.classList.contains(CLASS_ACTIVE)\r\n\t\t});\r\n\t};\r\n\tToggle.prototype.setTranslateX = $.animationFrame(function(x) {\r\n\t\tif (!this.isDragging) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar isChanged = false;\r\n\t\tif ((this.initialState && -x > (this.handleX / 2)) || (!this.initialState && x > (this.handleX / 2))) {\r\n\t\t\tisChanged = true;\r\n\t\t}\r\n\t\tif (this.lastChanged !== isChanged) {\r\n\t\t\tif (isChanged) {\r\n\t\t\t\tthis.handle.style.webkitTransform = 'translate(' + (this.initialState ? 0 : this.handleX) + 'px,0)';\r\n\t\t\t\tthis.classList[this.initialState ? 'remove' : 'add'](CLASS_ACTIVE);\r\n\t\t\t} else {\r\n\t\t\t\tthis.handle.style.webkitTransform = 'translate(' + (this.initialState ? this.handleX : 0) + 'px,0)';\r\n\t\t\t\tthis.classList[this.initialState ? 'add' : 'remove'](CLASS_ACTIVE);\r\n\t\t\t}\r\n\t\t\tthis.lastChanged = isChanged;\r\n\t\t}\r\n\r\n\t});\r\n\r\n\t$.fn['switch'] = function(options) {\r\n\t\tvar switchApis = [];\r\n\t\tthis.each(function() {\r\n\t\t\tvar switchApi = null;\r\n\t\t\tvar id = this.getAttribute('data-switch');\r\n\t\t\tif (!id) {\r\n\t\t\t\tid = ++$.uuid;\r\n\t\t\t\t$.data[id] = new Toggle(this);\r\n\t\t\t\tthis.setAttribute('data-switch', id);\r\n\t\t\t} else {\r\n\t\t\t\tswitchApi = $.data[id];\r\n\t\t\t}\r\n\t\t\tswitchApis.push(switchApi);\r\n\t\t});\r\n\t\treturn switchApis.length > 1 ? switchApis : switchApis[0];\r\n\t};\r\n\t$.ready(function() {\r\n\t\t$('.' + CLASS_SWITCH)['switch']();\r\n\t});\r\n})(mui, window, 'toggle');\r\n/**\r\n * Tableviews\r\n * @param {type} $\r\n * @param {type} window\r\n * @param {type} document\r\n * @returns {undefined}\r\n */\r\n(function($, window, document) {\r\n\r\n\tvar CLASS_ACTIVE = 'mui-active';\r\n\tvar CLASS_SELECTED = 'mui-selected';\r\n\tvar CLASS_GRID_VIEW = 'mui-grid-view';\r\n\tvar CLASS_RADIO_VIEW = 'mui-table-view-radio';\r\n\tvar CLASS_TABLE_VIEW_CELL = 'mui-table-view-cell';\r\n\tvar CLASS_COLLAPSE_CONTENT = 'mui-collapse-content';\r\n\tvar CLASS_DISABLED = 'mui-disabled';\r\n\tvar CLASS_TOGGLE = 'mui-switch';\r\n\tvar CLASS_BTN = 'mui-btn';\r\n\r\n\tvar CLASS_SLIDER_HANDLE = 'mui-slider-handle';\r\n\tvar CLASS_SLIDER_LEFT = 'mui-slider-left';\r\n\tvar CLASS_SLIDER_RIGHT = 'mui-slider-right';\r\n\tvar CLASS_TRANSITIONING = 'mui-transitioning';\r\n\r\n\r\n\tvar SELECTOR_SLIDER_HANDLE = '.' + CLASS_SLIDER_HANDLE;\r\n\tvar SELECTOR_SLIDER_LEFT = '.' + CLASS_SLIDER_LEFT;\r\n\tvar SELECTOR_SLIDER_RIGHT = '.' + CLASS_SLIDER_RIGHT;\r\n\tvar SELECTOR_SELECTED = '.' + CLASS_SELECTED;\r\n\tvar SELECTOR_BUTTON = '.' + CLASS_BTN;\r\n\tvar overFactor = 0.8;\r\n\tvar cell, a;\r\n\tvar progress;\r\n\r\n\tvar isMoved = isOpened = openedActions = progress = false;\r\n\tvar sliderHandle = sliderActionLeft = sliderActionRight = buttonsLeft = buttonsRight = sliderDirection = sliderRequestAnimationFrame = false;\r\n\tvar timer = translateX = lastTranslateX = sliderActionLeftWidth = sliderActionRightWidth = 0;\r\n\r\n\r\n\r\n\tvar toggleActive = function(isActive) {\r\n\t\tif (isActive) {\r\n\t\t\tif (a) {\r\n\t\t\t\ta.classList.add(CLASS_ACTIVE);\r\n\t\t\t} else if (cell) {\r\n\t\t\t\tcell.classList.add(CLASS_ACTIVE);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\ttimer && timer.cancel();\r\n\t\t\tif (a) {\r\n\t\t\t\ta.classList.remove(CLASS_ACTIVE);\r\n\t\t\t} else if (cell) {\r\n\t\t\t\tcell.classList.remove(CLASS_ACTIVE);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tvar updateTranslate = function() {\r\n\t\tif (translateX !== lastTranslateX) {\r\n\t\t\tif (buttonsRight && buttonsRight.length > 0) {\r\n\t\t\t\tprogress = translateX / sliderActionRightWidth;\r\n\t\t\t\tif (translateX < -sliderActionRightWidth) {\r\n\t\t\t\t\ttranslateX = -sliderActionRightWidth - Math.pow(-translateX - sliderActionRightWidth, overFactor);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0, len = buttonsRight.length; i < len; i++) {\r\n\t\t\t\t\tvar buttonRight = buttonsRight[i];\r\n\t\t\t\t\tif (typeof buttonRight._buttonOffset === 'undefined') {\r\n\t\t\t\t\t\tbuttonRight._buttonOffset = buttonRight.offsetLeft;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbuttonOffset = buttonRight._buttonOffset;\r\n\t\t\t\t\tsetTranslate(buttonRight, (translateX - buttonOffset * (1 + Math.max(progress, -1))));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (buttonsLeft && buttonsLeft.length > 0) {\r\n\t\t\t\tprogress = translateX / sliderActionLeftWidth;\r\n\t\t\t\tif (translateX > sliderActionLeftWidth) {\r\n\t\t\t\t\ttranslateX = sliderActionLeftWidth + Math.pow(translateX - sliderActionLeftWidth, overFactor);\r\n\t\t\t\t}\r\n\t\t\t\tfor (var i = 0, len = buttonsLeft.length; i < len; i++) {\r\n\t\t\t\t\tvar buttonLeft = buttonsLeft[i];\r\n\t\t\t\t\tif (typeof buttonLeft._buttonOffset === 'undefined') {\r\n\t\t\t\t\t\tbuttonLeft._buttonOffset = sliderActionLeftWidth - buttonLeft.offsetLeft - buttonLeft.offsetWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbuttonOffset = buttonLeft._buttonOffset;\r\n\t\t\t\t\tif (buttonsLeft.length > 1) {\r\n\t\t\t\t\t\tbuttonLeft.style.zIndex = buttonsLeft.length - i;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetTranslate(buttonLeft, (translateX + buttonOffset * (1 - Math.min(progress, 1))));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tsetTranslate(sliderHandle, translateX);\r\n\t\t\tlastTranslateX = translateX;\r\n\t\t}\r\n\t\tsliderRequestAnimationFrame = requestAnimationFrame(function() {\r\n\t\t\tupdateTranslate();\r\n\t\t});\r\n\t};\r\n\tvar setTranslate = function(element, x) {\r\n\t\tif (element) {\r\n\t\t\telement.style.webkitTransform = 'translate(' + x + 'px,0)';\r\n\t\t}\r\n\t};\r\n\r\n\twindow.addEventListener($.EVENT_START, function(event) {\r\n\t\tif (cell) {\r\n\t\t\ttoggleActive(false);\r\n\t\t}\r\n\t\tcell = a = false;\r\n\t\tisMoved = isOpened = openedActions = false;\r\n\t\tvar target = event.target;\r\n\t\tvar isDisabled = false;\r\n\t\tfor (; target && target !== document; target = target.parentNode) {\r\n\t\t\tif (target.classList) {\r\n\t\t\t\tvar classList = target.classList;\r\n\t\t\t\tif ((target.tagName === 'INPUT' && target.type !== 'radio' && target.type !== 'checkbox') || target.tagName === 'BUTTON' || classList.contains(CLASS_TOGGLE) || classList.contains(CLASS_BTN) || classList.contains(CLASS_DISABLED)) {\r\n\t\t\t\t\tisDisabled = true;\r\n\t\t\t\t}\r\n\t\t\t\tif (classList.contains(CLASS_COLLAPSE_CONTENT)) { //collapse content\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\tif (classList.contains(CLASS_TABLE_VIEW_CELL)) {\r\n\t\t\t\t\tcell = target;\r\n\t\t\t\t\t//TODO swipe to delete close\r\n\t\t\t\t\tvar selected = cell.parentNode.querySelector(SELECTOR_SELECTED);\r\n\t\t\t\t\tif (!cell.parentNode.classList.contains(CLASS_RADIO_VIEW) && selected && selected !== cell) {\r\n\t\t\t\t\t\t$.swipeoutClose(selected);\r\n\t\t\t\t\t\tcell = isDisabled = false;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!cell.parentNode.classList.contains(CLASS_GRID_VIEW)) {\r\n\t\t\t\t\t\tvar link = cell.querySelector('a');\r\n\t\t\t\t\t\tif (link && link.parentNode === cell) { //li>a\r\n\t\t\t\t\t\t\ta = link;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar handle = cell.querySelector(SELECTOR_SLIDER_HANDLE);\r\n\t\t\t\t\tif (handle) {\r\n\t\t\t\t\t\ttoggleEvents(cell);\r\n\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!isDisabled) {\r\n\t\t\t\t\t\tif (handle) {\r\n\t\t\t\t\t\t\tif (timer) {\r\n\t\t\t\t\t\t\t\ttimer.cancel();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttimer = $.later(function() {\r\n\t\t\t\t\t\t\t\ttoggleActive(true);\r\n\t\t\t\t\t\t\t}, 100);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttoggleActive(true);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\twindow.addEventListener($.EVENT_MOVE, function(event) {\r\n\t\ttoggleActive(false);\r\n\t});\r\n\r\n\tvar handleEvent = {\r\n\t\thandleEvent: function(event) {\r\n\t\t\tswitch (event.type) {\r\n\t\t\t\tcase 'drag':\r\n\t\t\t\t\tthis.drag(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'dragend':\r\n\t\t\t\t\tthis.dragend(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'flick':\r\n\t\t\t\t\tthis.flick(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'swiperight':\r\n\t\t\t\t\tthis.swiperight(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'swipeleft':\r\n\t\t\t\t\tthis.swipeleft(event);\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\tdrag: function(event) {\r\n\t\t\tif (!cell) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (!isMoved) { //init\r\n\t\t\t\tsliderHandle = sliderActionLeft = sliderActionRight = buttonsLeft = buttonsRight = sliderDirection = sliderRequestAnimationFrame = false;\r\n\t\t\t\tsliderHandle = cell.querySelector(SELECTOR_SLIDER_HANDLE);\r\n\t\t\t\tif (sliderHandle) {\r\n\t\t\t\t\tsliderActionLeft = cell.querySelector(SELECTOR_SLIDER_LEFT);\r\n\t\t\t\t\tsliderActionRight = cell.querySelector(SELECTOR_SLIDER_RIGHT);\r\n\t\t\t\t\tif (sliderActionLeft) {\r\n\t\t\t\t\t\tsliderActionLeftWidth = sliderActionLeft.offsetWidth;\r\n\t\t\t\t\t\tbuttonsLeft = sliderActionLeft.querySelectorAll(SELECTOR_BUTTON);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (sliderActionRight) {\r\n\t\t\t\t\t\tsliderActionRightWidth = sliderActionRight.offsetWidth;\r\n\t\t\t\t\t\tbuttonsRight = sliderActionRight.querySelectorAll(SELECTOR_BUTTON);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcell.classList.remove(CLASS_TRANSITIONING);\r\n\t\t\t\t\tisOpened = cell.classList.contains(CLASS_SELECTED);\r\n\t\t\t\t\tif (isOpened) {\r\n\t\t\t\t\t\topenedActions = cell.querySelector(SELECTOR_SLIDER_LEFT + SELECTOR_SELECTED) ? 'left' : 'right';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar detail = event.detail;\r\n\t\t\tvar direction = detail.direction;\r\n\t\t\tvar angle = detail.angle;\r\n\t\t\tif (direction === 'left' && (angle > 150 || angle < -150)) {\r\n\t\t\t\tif (buttonsRight || (buttonsLeft && isOpened)) { //存在右侧按钮或存在左侧按钮且是已打开状态\r\n\t\t\t\t\tisMoved = true;\r\n\t\t\t\t}\r\n\t\t\t} else if (direction === 'right' && (angle > -30 && angle < 30)) {\r\n\t\t\t\tif (buttonsLeft || (buttonsRight && isOpened)) { //存在左侧按钮或存在右侧按钮且是已打开状态\r\n\t\t\t\t\tisMoved = true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (isMoved) {\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t\tevent.detail.gesture.preventDefault();\r\n\t\t\t\tvar translate = event.detail.deltaX;\r\n\t\t\t\tif (isOpened) {\r\n\t\t\t\t\tif (openedActions === 'right') {\r\n\t\t\t\t\t\ttranslate = translate - sliderActionRightWidth;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttranslate = translate + sliderActionLeftWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif ((translate > 0 && !buttonsLeft) || (translate < 0 && !buttonsRight)) {\r\n\t\t\t\t\tif (!isOpened) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttranslate = 0;\r\n\t\t\t\t}\r\n\t\t\t\tif (translate < 0) {\r\n\t\t\t\t\tsliderDirection = 'toLeft';\r\n\t\t\t\t} else if (translate > 0) {\r\n\t\t\t\t\tsliderDirection = 'toRight';\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (!sliderDirection) {\r\n\t\t\t\t\t\tsliderDirection = 'toLeft';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif (!sliderRequestAnimationFrame) {\r\n\t\t\t\t\tupdateTranslate();\r\n\t\t\t\t}\r\n\t\t\t\ttranslateX = translate;\r\n\t\t\t}\r\n\t\t},\r\n\t\tflick: function(event) {\r\n\t\t\tif (isMoved) {\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\t\t},\r\n\t\tswipeleft: function(event) {\r\n\t\t\tif (isMoved) {\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\t\t},\r\n\t\tswiperight: function(event) {\r\n\t\t\tif (isMoved) {\r\n\t\t\t\tevent.stopPropagation();\r\n\t\t\t}\r\n\t\t},\r\n\t\tdragend: function(event) {\r\n\t\t\tif (!isMoved) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tevent.stopPropagation();\r\n\t\t\tif (sliderRequestAnimationFrame) {\r\n\t\t\t\tcancelAnimationFrame(sliderRequestAnimationFrame);\r\n\t\t\t\tsliderRequestAnimationFrame = null;\r\n\t\t\t}\r\n\t\t\tvar detail = event.detail;\r\n\t\t\tisMoved = false;\r\n\t\t\tvar action = 'close';\r\n\t\t\tvar actionsWidth = sliderDirection === 'toLeft' ? sliderActionRightWidth : sliderActionLeftWidth;\r\n\t\t\tvar isToggle = detail.swipe || (Math.abs(translateX) > actionsWidth / 2);\r\n\t\t\tif (isToggle) {\r\n\t\t\t\tif (!isOpened) {\r\n\t\t\t\t\taction = 'open';\r\n\t\t\t\t} else if (detail.direction === 'left' && openedActions === 'right') {\r\n\t\t\t\t\taction = 'open';\r\n\t\t\t\t} else if (detail.direction === 'right' && openedActions === 'left') {\r\n\t\t\t\t\taction = 'open';\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tcell.classList.add(CLASS_TRANSITIONING);\r\n\t\t\tvar buttons;\r\n\t\t\tif (action === 'open') {\r\n\t\t\t\tvar newTranslate = sliderDirection === 'toLeft' ? -actionsWidth : actionsWidth;\r\n\t\t\t\tsetTranslate(sliderHandle, newTranslate);\r\n\t\t\t\tbuttons = sliderDirection === 'toLeft' ? buttonsRight : buttonsLeft;\r\n\t\t\t\tif (typeof buttons !== 'undefined') {\r\n\t\t\t\t\tvar button = null;\r\n\t\t\t\t\tfor (var i = 0; i < buttons.length; i++) {\r\n\t\t\t\t\t\tbutton = buttons[i];\r\n\t\t\t\t\t\tsetTranslate(button, newTranslate);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbutton.parentNode.classList.add(CLASS_SELECTED);\r\n\t\t\t\t\tcell.classList.add(CLASS_SELECTED);\r\n\t\t\t\t\tif (!isOpened) {\r\n\t\t\t\t\t\t$.trigger(cell, sliderDirection === 'toLeft' ? 'slideleft' : 'slideright');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tsetTranslate(sliderHandle, 0);\r\n\t\t\t\tsliderActionLeft && sliderActionLeft.classList.remove(CLASS_SELECTED);\r\n\t\t\t\tsliderActionRight && sliderActionRight.classList.remove(CLASS_SELECTED);\r\n\t\t\t\tcell.classList.remove(CLASS_SELECTED);\r\n\t\t\t}\r\n\t\t\tvar buttonOffset;\r\n\t\t\tif (buttonsLeft && buttonsLeft.length > 0 && buttonsLeft !== buttons) {\r\n\t\t\t\tfor (var i = 0, len = buttonsLeft.length; i < len; i++) {\r\n\t\t\t\t\tvar buttonLeft = buttonsLeft[i];\r\n\t\t\t\t\tbuttonOffset = buttonLeft._buttonOffset;\r\n\t\t\t\t\tif (typeof buttonOffset === 'undefined') {\r\n\t\t\t\t\t\tbuttonLeft._buttonOffset = sliderActionLeftWidth - buttonLeft.offsetLeft - buttonLeft.offsetWidth;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetTranslate(buttonLeft, buttonOffset);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (buttonsRight && buttonsRight.length > 0 && buttonsRight !== buttons) {\r\n\t\t\t\tfor (var i = 0, len = buttonsRight.length; i < len; i++) {\r\n\t\t\t\t\tvar buttonRight = buttonsRight[i];\r\n\t\t\t\t\tbuttonOffset = buttonRight._buttonOffset;\r\n\t\t\t\t\tif (typeof buttonOffset === 'undefined') {\r\n\t\t\t\t\t\tbuttonRight._buttonOffset = buttonRight.offsetLeft;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetTranslate(buttonRight, -buttonOffset);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\tfunction toggleEvents(element, isRemove) {\r\n\t\tvar method = !!isRemove ? 'removeEventListener' : 'addEventListener';\r\n\t\telement[method]('drag', handleEvent);\r\n\t\telement[method]('dragend', handleEvent);\r\n\t\telement[method]('swiperight', handleEvent);\r\n\t\telement[method]('swipeleft', handleEvent);\r\n\t\telement[method]('flick', handleEvent);\r\n\t};\r\n\t/**\r\n\t * 打开滑动菜单\r\n\t * @param {Object} el\r\n\t * @param {Object} direction\r\n\t */\r\n\t$.swipeoutOpen = function(el, direction) {\r\n\t\tif (!el) return;\r\n\t\tvar classList = el.classList;\r\n\t\tif (classList.contains(CLASS_SELECTED)) return;\r\n\t\tif (!direction) {\r\n\t\t\tif (el.querySelector(SELECTOR_SLIDER_RIGHT)) {\r\n\t\t\t\tdirection = 'right';\r\n\t\t\t} else {\r\n\t\t\t\tdirection = 'left';\r\n\t\t\t}\r\n\t\t}\r\n\t\tvar swipeoutAction = el.querySelector($.classSelector(\".slider-\" + direction));\r\n\t\tif (!swipeoutAction) return;\r\n\t\tswipeoutAction.classList.add(CLASS_SELECTED);\r\n\t\tclassList.add(CLASS_SELECTED);\r\n\t\tclassList.remove(CLASS_TRANSITIONING);\r\n\t\tvar buttons = swipeoutAction.querySelectorAll(SELECTOR_BUTTON);\r\n\t\tvar swipeoutWidth = swipeoutAction.offsetWidth;\r\n\t\tvar translate = (direction === 'right') ? -swipeoutWidth : swipeoutWidth;\r\n\t\tvar length = buttons.length;\r\n\t\tvar button;\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\tbutton = buttons[i];\r\n\t\t\tif (direction === 'right') {\r\n\t\t\t\tsetTranslate(button, -button.offsetLeft);\r\n\t\t\t} else {\r\n\t\t\t\tsetTranslate(button, (swipeoutWidth - button.offsetWidth - button.offsetLeft));\r\n\t\t\t}\r\n\t\t}\r\n\t\tclassList.add(CLASS_TRANSITIONING);\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\tsetTranslate(buttons[i], translate);\r\n\t\t}\r\n\t\tsetTranslate(el.querySelector(SELECTOR_SLIDER_HANDLE), translate);\r\n\t};\r\n\t/**\r\n\t * 关闭滑动菜单\r\n\t * @param {Object} el\r\n\t */\r\n\t$.swipeoutClose = function(el) {\r\n\t\tif (!el) return;\r\n\t\tvar classList = el.classList;\r\n\t\tif (!classList.contains(CLASS_SELECTED)) return;\r\n\t\tvar direction = el.querySelector(SELECTOR_SLIDER_RIGHT + SELECTOR_SELECTED) ? 'right' : 'left';\r\n\t\tvar swipeoutAction = el.querySelector($.classSelector(\".slider-\" + direction));\r\n\t\tif (!swipeoutAction) return;\r\n\t\tswipeoutAction.classList.remove(CLASS_SELECTED);\r\n\t\tclassList.remove(CLASS_SELECTED);\r\n\t\tclassList.add(CLASS_TRANSITIONING);\r\n\t\tvar buttons = swipeoutAction.querySelectorAll(SELECTOR_BUTTON);\r\n\t\tvar swipeoutWidth = swipeoutAction.offsetWidth;\r\n\t\tvar length = buttons.length;\r\n\t\tvar button;\r\n\t\tsetTranslate(el.querySelector(SELECTOR_SLIDER_HANDLE), 0);\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\tbutton = buttons[i];\r\n\t\t\tif (direction === 'right') {\r\n\t\t\t\tsetTranslate(button, (-button.offsetLeft));\r\n\t\t\t} else {\r\n\t\t\t\tsetTranslate(button, (swipeoutWidth - button.offsetWidth - button.offsetLeft));\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n\twindow.addEventListener($.EVENT_END, function(event) { //使用touchend来取消高亮，避免一次点击既不触发tap，doubletap，longtap的事件\r\n\t\tif (!cell) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttoggleActive(false);\r\n\t\tsliderHandle && toggleEvents(cell, true);\r\n\t});\r\n\twindow.addEventListener($.EVENT_CANCEL, function(event) { //使用touchcancel来取消高亮，避免一次点击既不触发tap，doubletap，longtap的事件\r\n\t\tif (!cell) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\ttoggleActive(false);\r\n\t\tsliderHandle && toggleEvents(cell, true);\r\n\t});\r\n\tvar radioOrCheckboxClick = function(event) {\r\n\t\tvar type = event.target && event.target.type || '';\r\n\t\tif (type === 'radio' || type === 'checkbox') {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar classList = cell.classList;\r\n\t\tif (classList.contains('mui-radio')) {\r\n\t\t\tvar input = cell.querySelector('input[type=radio]');\r\n\t\t\tif (input) {\r\n\t\t\t\t//\t\t\t\tinput.click();\r\n\t\t\t\tif (!input.disabled && !input.readOnly) {\r\n\t\t\t\t\tinput.checked = !input.checked;\r\n\t\t\t\t\t$.trigger(input, 'change');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} else if (classList.contains('mui-checkbox')) {\r\n\t\t\tvar input = cell.querySelector('input[type=checkbox]');\r\n\t\t\tif (input) {\r\n\t\t\t\t//\t\t\t\tinput.click();\r\n\t\t\t\tif (!input.disabled && !input.readOnly) {\r\n\t\t\t\t\tinput.checked = !input.checked;\r\n\t\t\t\t\t$.trigger(input, 'change');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t//fixed hashchange(android)\r\n\twindow.addEventListener($.EVENT_CLICK, function(e) {\r\n\t\tif (cell && cell.classList.contains('mui-collapse')) {\r\n\t\t\te.preventDefault();\r\n\t\t}\r\n\t});\r\n\twindow.addEventListener('doubletap', function(event) {\r\n\t\tif (cell) {\r\n\t\t\tradioOrCheckboxClick(event);\r\n\t\t}\r\n\t});\r\n\tvar preventDefaultException = /^(INPUT|TEXTAREA|BUTTON|SELECT)$/;\r\n\twindow.addEventListener('tap', function(event) {\r\n\t\tif (!cell) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar isExpand = false;\r\n\t\tvar classList = cell.classList;\r\n\t\tvar ul = cell.parentNode;\r\n\t\tif (ul && ul.classList.contains(CLASS_RADIO_VIEW)) {\r\n\t\t\tif (classList.contains(CLASS_SELECTED)) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tvar selected = ul.querySelector('li' + SELECTOR_SELECTED);\r\n\t\t\tif (selected) {\r\n\t\t\t\tselected.classList.remove(CLASS_SELECTED);\r\n\t\t\t}\r\n\t\t\tclassList.add(CLASS_SELECTED);\r\n\t\t\t$.trigger(cell, 'selected', {\r\n\t\t\t\tel: cell\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (classList.contains('mui-collapse') && !cell.parentNode.classList.contains('mui-unfold')) {\r\n\t\t\tif (!preventDefaultException.test(event.target.tagName)) {\r\n\t\t\t\tevent.detail.gesture.preventDefault();\r\n\t\t\t}\r\n\r\n\t\t\tif (!classList.contains(CLASS_ACTIVE)) { //展开时,需要收缩其他同类\r\n\t\t\t\tvar collapse = cell.parentNode.querySelector('.mui-collapse.mui-active');\r\n\t\t\t\tif (collapse) {\r\n\t\t\t\t\tcollapse.classList.remove(CLASS_ACTIVE);\r\n\t\t\t\t}\r\n\t\t\t\tisExpand = true;\r\n\t\t\t}\r\n\t\t\tclassList.toggle(CLASS_ACTIVE);\r\n\t\t\tif (isExpand) {\r\n\t\t\t\t//触发展开事件\r\n\t\t\t\t$.trigger(cell, 'expand');\r\n\r\n\t\t\t\t//scroll\r\n\t\t\t\t//暂不滚动\r\n\t\t\t\t// var offsetTop = $.offset(cell).top;\r\n\t\t\t\t// var scrollTop = document.body.scrollTop;\r\n\t\t\t\t// var height = window.innerHeight;\r\n\t\t\t\t// var offsetHeight = cell.offsetHeight;\r\n\t\t\t\t// var cellHeight = (offsetTop - scrollTop + offsetHeight);\r\n\t\t\t\t// if (offsetHeight > height) {\r\n\t\t\t\t// \t$.scrollTo(offsetTop, 300);\r\n\t\t\t\t// } else if (cellHeight > height) {\r\n\t\t\t\t// \t$.scrollTo(cellHeight - height + scrollTop, 300);\r\n\t\t\t\t// }\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tradioOrCheckboxClick(event);\r\n\t\t}\r\n\t});\r\n})(mui, window, document);\r\n(function($, window) {\r\n\t/**\r\n\t * 警告消息框\r\n\t */\r\n\t$.alert = function(message, title, btnValue, callback) {\r\n\t\tif ($.os.plus) {\r\n\t\t\tif (typeof message === 'undefined') {\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tif (typeof title === 'function') {\r\n\t\t\t\t\tcallback = title;\r\n\t\t\t\t\ttitle = null;\r\n\t\t\t\t\tbtnValue = '确定';\r\n\t\t\t\t} else if (typeof btnValue === 'function') {\r\n\t\t\t\t\tcallback = btnValue;\r\n\t\t\t\t\tbtnValue = null;\r\n\t\t\t\t}\r\n\t\t\t\t$.plusReady(function() {\r\n\t\t\t\t\tplus.nativeUI.alert(message, callback, title, btnValue);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\t//TODO H5版本\r\n\t\t\twindow.alert(message);\r\n\t\t}\r\n\t};\r\n\r\n})(mui, window);\r\n(function($, window) {\r\n\t/**\r\n\t * 确认消息框\r\n\t */\r\n\t$.confirm = function(message, title, btnArray, callback) {\r\n\t\tif ($.os.plus) {\r\n\t\t\tif (typeof message === 'undefined') {\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tif (typeof title === 'function') {\r\n\t\t\t\t\tcallback = title;\r\n\t\t\t\t\ttitle = null;\r\n\t\t\t\t\tbtnArray = null;\r\n\t\t\t\t} else if (typeof btnArray === 'function') {\r\n\t\t\t\t\tcallback = btnArray;\r\n\t\t\t\t\tbtnArray = null;\r\n\t\t\t\t}\r\n\t\t\t\t$.plusReady(function() {\r\n\t\t\t\t\tplus.nativeUI.confirm(message, callback, title, btnArray);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\t//H5版本，0为确认，1为取消\r\n\t\t\tif (window.confirm(message)) {\r\n\t\t\t\tcallback({\r\n\t\t\t\t\tindex: 0\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tcallback({\r\n\t\t\t\t\tindex: 1\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n})(mui, window);\r\n(function($, window) {\r\n\t/**\r\n\t * 输入对话框\r\n\t */\r\n\t$.prompt = function(text, defaultText, title, btnArray, callback) {\r\n\t\tif ($.os.plus) {\r\n\t\t\tif (typeof message === 'undefined') {\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\r\n\t\t\t\tif (typeof defaultText === 'function') {\r\n\t\t\t\t\tcallback = defaultText;\r\n\t\t\t\t\tdefaultText = null;\r\n\t\t\t\t\ttitle = null;\r\n\t\t\t\t\tbtnArray = null;\r\n\t\t\t\t} else if (typeof title === 'function') {\r\n\t\t\t\t\tcallback = title;\r\n\t\t\t\t\ttitle = null;\r\n\t\t\t\t\tbtnArray = null;\r\n\t\t\t\t} else if (typeof btnArray === 'function') {\r\n\t\t\t\t\tcallback = btnArray;\r\n\t\t\t\t\tbtnArray = null;\r\n\t\t\t\t}\r\n\t\t\t\t$.plusReady(function() {\r\n\t\t\t\t\tplus.nativeUI.prompt(text, callback, title, defaultText, btnArray);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\t\t\t//H5版本(确认index为0，取消index为1)\r\n\t\t\tvar result = window.prompt(text);\r\n\t\t\tif (result) {\r\n\t\t\t\tcallback({\r\n\t\t\t\t\tindex: 0,\r\n\t\t\t\t\tvalue: result\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tcallback({\r\n\t\t\t\t\tindex: 1,\r\n\t\t\t\t\tvalue: ''\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\r\n})(mui, window);\r\n(function($, window) {\r\n\tvar CLASS_ACTIVE = 'mui-active';\r\n\t/**\r\n\t * 自动消失提示框\r\n\t */\r\n\t$.toast = function(message) {\r\n\t\tif ($.os.plus) {\r\n\t\t\t//默认显示在底部；\r\n\t\t\t$.plusReady(function() {\r\n\t\t\t\tplus.nativeUI.toast(message, {\r\n\t\t\t\t\tverticalAlign: 'bottom'\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tvar toast = document.createElement('div');\r\n\t\t\ttoast.classList.add('mui-toast-container');\r\n\t\t\ttoast.innerHTML = '<div class=\"' + 'mui-toast-message' + '\">' + message + '</div>';\r\n\t\t\ttoast.addEventListener('webkitTransitionEnd', function() {\r\n\t\t\t\tif (!toast.classList.contains(CLASS_ACTIVE)) {\r\n\t\t\t\t\ttoast.parentNode.removeChild(toast);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tdocument.body.appendChild(toast);\r\n\t\t\ttoast.offsetHeight;\r\n\t\t\ttoast.classList.add(CLASS_ACTIVE);\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\ttoast.classList.remove(CLASS_ACTIVE);\r\n\t\t\t}, 2000);\r\n\t\t}\r\n\t};\r\n\r\n})(mui, window);\r\n/**\r\n * Popup(alert,confirm,prompt)\r\n * @param {Object} $\r\n * @param {Object} window\r\n * @param {Object} document\r\n */\r\n(function($, window, document) {\r\n\tvar CLASS_POPUP = 'mui-popup';\r\n\tvar CLASS_POPUP_BACKDROP = 'mui-popup-backdrop';\r\n\tvar CLASS_POPUP_IN = 'mui-popup-in';\r\n\tvar CLASS_POPUP_OUT = 'mui-popup-out';\r\n\tvar CLASS_POPUP_INNER = 'mui-popup-inner';\r\n\tvar CLASS_POPUP_TITLE = 'mui-popup-title';\r\n\tvar CLASS_POPUP_TEXT = 'mui-popup-text';\r\n\tvar CLASS_POPUP_INPUT = 'mui-popup-input';\r\n\tvar CLASS_POPUP_BUTTONS = 'mui-popup-buttons';\r\n\tvar CLASS_POPUP_BUTTON = 'mui-popup-button';\r\n\tvar CLASS_POPUP_BUTTON_BOLD = 'mui-popup-button-bold';\r\n\tvar CLASS_POPUP_BACKDROP = 'mui-popup-backdrop';\r\n\tvar CLASS_ACTIVE = 'mui-active';\r\n\r\n\tvar popupStack = [];\r\n\tvar backdrop = (function() {\r\n\t\tvar element = document.createElement('div');\r\n\t\telement.classList.add(CLASS_POPUP_BACKDROP);\r\n\t\telement.addEventListener($.EVENT_MOVE, $.preventDefault);\r\n\t\telement.addEventListener('webkitTransitionEnd', function() {\r\n\t\t\tif (!this.classList.contains(CLASS_ACTIVE)) {\r\n\t\t\t\telement.parentNode && element.parentNode.removeChild(element);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn element;\r\n\t}());\r\n\r\n\tvar createInput = function(placeholder) {\r\n\t\treturn '<div class=\"' + CLASS_POPUP_INPUT + '\"><input type=\"text\" autofocus placeholder=\"' + (placeholder || '') + '\"/></div>';\r\n\t};\r\n\tvar createInner = function(message, title, extra) {\r\n\t\treturn '<div class=\"' + CLASS_POPUP_INNER + '\"><div class=\"' + CLASS_POPUP_TITLE + '\">' + title + '</div><div class=\"' + CLASS_POPUP_TEXT + '\">' + message.replace(/\\r\\n/g, \"<br/>\").replace(/\\n/g, \"<br/>\") + '</div>' + (extra || '') + '</div>';\r\n\t};\r\n\tvar createButtons = function(btnArray) {\r\n\t\tvar length = btnArray.length;\r\n\t\tvar btns = [];\r\n\t\tfor (var i = 0; i < length; i++) {\r\n\t\t\tbtns.push('<span class=\"' + CLASS_POPUP_BUTTON + (i === length - 1 ? (' ' + CLASS_POPUP_BUTTON_BOLD) : '') + '\">' + btnArray[i] + '</span>');\r\n\t\t}\r\n\t\treturn '<div class=\"' + CLASS_POPUP_BUTTONS + '\">' + btns.join('') + '</div>';\r\n\t};\r\n\r\n\tvar createPopup = function(html, callback) {\r\n\t\tvar popupElement = document.createElement('div');\r\n\t\tpopupElement.className = CLASS_POPUP;\r\n\t\tpopupElement.innerHTML = html;\r\n\t\tvar removePopupElement = function() {\r\n\t\t\tpopupElement.parentNode && popupElement.parentNode.removeChild(popupElement);\r\n\t\t\tpopupElement = null;\r\n\t\t};\r\n\t\tpopupElement.addEventListener($.EVENT_MOVE, $.preventDefault);\r\n\t\tpopupElement.addEventListener('webkitTransitionEnd', function(e) {\r\n\t\t\tif (popupElement && e.target === popupElement && popupElement.classList.contains(CLASS_POPUP_OUT)) {\r\n\t\t\t\tremovePopupElement();\r\n\t\t\t}\r\n\t\t});\r\n\t\tpopupElement.style.display = 'block';\r\n\t\tdocument.body.appendChild(popupElement);\r\n\t\tpopupElement.offsetHeight;\r\n\t\tpopupElement.classList.add(CLASS_POPUP_IN);\r\n\r\n\t\tif (!backdrop.classList.contains(CLASS_ACTIVE)) {\r\n\t\t\tbackdrop.style.display = 'block';\r\n\t\t\tdocument.body.appendChild(backdrop);\r\n\t\t\tbackdrop.offsetHeight;\r\n\t\t\tbackdrop.classList.add(CLASS_ACTIVE);\r\n\t\t}\r\n\t\tvar btns = $.qsa('.' + CLASS_POPUP_BUTTON, popupElement);\r\n\t\tvar input = popupElement.querySelector('.' + CLASS_POPUP_INPUT + ' input');\r\n\t\tvar popup = {\r\n\t\t\telement: popupElement,\r\n\t\t\tclose: function(index, animate) {\r\n\t\t\t\tif (popupElement) {\r\n\t\t\t\t\tcallback && callback({\r\n\t\t\t\t\t\tindex: index || 0,\r\n\t\t\t\t\t\tvalue: input && input.value || ''\r\n\t\t\t\t\t});\r\n\t\t\t\t\tif (animate !== false) {\r\n\t\t\t\t\t\tpopupElement.classList.remove(CLASS_POPUP_IN);\r\n\t\t\t\t\t\tpopupElement.classList.add(CLASS_POPUP_OUT);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tremovePopupElement();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tpopupStack.pop();\r\n\t\t\t\t\t//如果还有其他popup，则不remove backdrop\r\n\t\t\t\t\tif (popupStack.length) {\r\n\t\t\t\t\t\tpopupStack[popupStack.length - 1]['show'](animate);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tbackdrop.classList.remove(CLASS_ACTIVE);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\tvar handleEvent = function(e) {\r\n\t\t\tpopup.close(btns.indexOf(e.target));\r\n\t\t};\r\n\t\t$(popupElement).on('tap', '.' + CLASS_POPUP_BUTTON, handleEvent);\r\n\t\tif (popupStack.length) {\r\n\t\t\tpopupStack[popupStack.length - 1]['hide']();\r\n\t\t}\r\n\t\tpopupStack.push({\r\n\t\t\tclose: popup.close,\r\n\t\t\tshow: function(animate) {\r\n\t\t\t\tpopupElement.style.display = 'block';\r\n\t\t\t\tpopupElement.offsetHeight;\r\n\t\t\t\tpopupElement.classList.add(CLASS_POPUP_IN);\r\n\t\t\t},\r\n\t\t\thide: function() {\r\n\t\t\t\tpopupElement.style.display = 'none';\r\n\t\t\t\tpopupElement.classList.remove(CLASS_POPUP_IN);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn popup;\r\n\t};\r\n\tvar createAlert = function(message, title, btnValue, callback, type) {\r\n\t\tif (typeof message === 'undefined') {\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tif (typeof title === 'function') {\r\n\t\t\t\tcallback = title;\r\n\t\t\t\ttype = btnValue;\r\n\t\t\t\ttitle = null;\r\n\t\t\t\tbtnValue = null;\r\n\t\t\t} else if (typeof btnValue === 'function') {\r\n\t\t\t\ttype = callback;\r\n\t\t\t\tcallback = btnValue;\r\n\t\t\t\tbtnValue = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!$.os.plus || type === 'div') {\r\n\t\t\treturn createPopup(createInner(message, title || '提示') + createButtons([btnValue || '确定']), callback);\r\n\t\t}\r\n\t\treturn plus.nativeUI.alert(message, callback, title || '提示', btnValue || '确定');\r\n\t};\r\n\tvar createConfirm = function(message, title, btnArray, callback, type) {\r\n\t\tif (typeof message === 'undefined') {\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tif (typeof title === 'function') {\r\n\t\t\t\tcallback = title;\r\n\t\t\t\ttype = btnArray;\r\n\t\t\t\ttitle = null;\r\n\t\t\t\tbtnArray = null;\r\n\t\t\t} else if (typeof btnArray === 'function') {\r\n\t\t\t\ttype = callback;\r\n\t\t\t\tcallback = btnArray;\r\n\t\t\t\tbtnArray = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!$.os.plus || type === 'div') {\r\n\t\t\treturn createPopup(createInner(message, title || '提示') + createButtons(btnArray || ['取消', '确认']), callback);\r\n\t\t}\r\n\t\treturn plus.nativeUI.confirm(message, callback, title, btnArray || ['取消', '确认']);\r\n\t};\r\n\tvar createPrompt = function(message, placeholder, title, btnArray, callback, type) {\r\n\t\tif (typeof message === 'undefined') {\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tif (typeof placeholder === 'function') {\r\n\t\t\t\tcallback = placeholder;\r\n\t\t\t\ttype = title;\r\n\t\t\t\tplaceholder = null;\r\n\t\t\t\ttitle = null;\r\n\t\t\t\tbtnArray = null;\r\n\t\t\t} else if (typeof title === 'function') {\r\n\t\t\t\tcallback = title;\r\n\t\t\t\ttype = btnArray;\r\n\t\t\t\ttitle = null;\r\n\t\t\t\tbtnArray = null;\r\n\t\t\t} else if (typeof btnArray === 'function') {\r\n\t\t\t\ttype = callback;\r\n\t\t\t\tcallback = btnArray;\r\n\t\t\t\tbtnArray = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!$.os.plus || type === 'div') {\r\n\t\t\treturn createPopup(createInner(message, title || '提示', createInput(placeholder)) + createButtons(btnArray || ['取消', '确认']), callback);\r\n\t\t}\r\n\t\treturn plus.nativeUI.prompt(message, callback, title || '提示', placeholder, btnArray || ['取消', '确认']);\r\n\t};\r\n\tvar closePopup = function() {\r\n\t\tif (popupStack.length) {\r\n\t\t\tpopupStack[popupStack.length - 1]['close']();\r\n\t\t\treturn true;\r\n\t\t} else {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\tvar closePopups = function() {\r\n\t\twhile (popupStack.length) {\r\n\t\t\tpopupStack[popupStack.length - 1]['close']();\r\n\t\t}\r\n\t};\r\n\r\n\t$.closePopup = closePopup;\r\n\t$.closePopups = closePopups;\r\n\t$.alert = createAlert;\r\n\t$.confirm = createConfirm;\r\n\t$.prompt = createPrompt;\r\n})(mui, window, document);\r\n(function($, document) {\r\n\tvar CLASS_PROGRESSBAR = 'mui-progressbar';\r\n\tvar CLASS_PROGRESSBAR_IN = 'mui-progressbar-in';\r\n\tvar CLASS_PROGRESSBAR_OUT = 'mui-progressbar-out';\r\n\tvar CLASS_PROGRESSBAR_INFINITE = 'mui-progressbar-infinite';\r\n\r\n\tvar SELECTOR_PROGRESSBAR = '.mui-progressbar';\r\n\r\n\tvar _findProgressbar = function(container) {\r\n\t\tcontainer = $(container || 'body');\r\n\t\tif (container.length === 0) return;\r\n\t\tcontainer = container[0];\r\n\t\tif (container.classList.contains(CLASS_PROGRESSBAR)) {\r\n\t\t\treturn container;\r\n\t\t}\r\n\t\tvar progressbars = container.querySelectorAll(SELECTOR_PROGRESSBAR);\r\n\t\tif (progressbars) {\r\n\t\t\tfor (var i = 0, len = progressbars.length; i < len; i++) {\r\n\t\t\t\tvar progressbar = progressbars[i];\r\n\t\t\t\tif (progressbar.parentNode === container) {\r\n\t\t\t\t\treturn progressbar;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\t/**\r\n\t * 创建并显示进度条\r\n\t * @param {Object} container  可选，默认body，支持selector,DOM Node,mui wrapper\r\n\t * @param {Object} progress 可选，undefined表示循环，数字表示具体进度\r\n\t * @param {Object} color 可选，指定颜色样式(目前暂未提供实际样式，可暂时不暴露此参数)\r\n\t */\r\n\tvar showProgressbar = function(container, progress, color) {\r\n\t\tif (typeof container === 'number') {\r\n\t\t\tcolor = progress;\r\n\t\t\tprogress = container;\r\n\t\t\tcontainer = 'body';\r\n\t\t}\r\n\t\tcontainer = $(container || 'body');\r\n\t\tif (container.length === 0) return;\r\n\t\tcontainer = container[0];\r\n\t\tvar progressbar;\r\n\t\tif (container.classList.contains(CLASS_PROGRESSBAR)) {\r\n\t\t\tprogressbar = container;\r\n\t\t} else {\r\n\t\t\tvar progressbars = container.querySelectorAll(SELECTOR_PROGRESSBAR + ':not(.' + CLASS_PROGRESSBAR_OUT + ')');\r\n\t\t\tif (progressbars) {\r\n\t\t\t\tfor (var i = 0, len = progressbars.length; i < len; i++) {\r\n\t\t\t\t\tvar _progressbar = progressbars[i];\r\n\t\t\t\t\tif (_progressbar.parentNode === container) {\r\n\t\t\t\t\t\tprogressbar = _progressbar;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (!progressbar) {\r\n\t\t\t\tprogressbar = document.createElement('span');\r\n\t\t\t\tprogressbar.className = CLASS_PROGRESSBAR + ' ' + CLASS_PROGRESSBAR_IN + (typeof progress !== 'undefined' ? '' : (' ' + CLASS_PROGRESSBAR_INFINITE)) + (color ? (' ' + CLASS_PROGRESSBAR + '-' + color) : '');\r\n\t\t\t\tif (typeof progress !== 'undefined') {\r\n\t\t\t\t\tprogressbar.innerHTML = '<span></span>';\r\n\t\t\t\t}\r\n\t\t\t\tcontainer.appendChild(progressbar);\r\n\t\t\t} else {\r\n\t\t\t\tprogressbar.classList.add(CLASS_PROGRESSBAR_IN);\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (progress) setProgressbar(container, progress);\r\n\t\treturn progressbar;\r\n\t};\r\n\t/**\r\n\t * 关闭进度条\r\n\t * @param {Object} container 可选，默认body，支持selector,DOM Node,mui wrapper\r\n\t */\r\n\tvar hideProgressbar = function(container) {\r\n\t\tvar progressbar = _findProgressbar(container);\r\n\t\tif (!progressbar) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tvar classList = progressbar.classList;\r\n\t\tif (!classList.contains(CLASS_PROGRESSBAR_IN) || classList.contains(CLASS_PROGRESSBAR_OUT)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tclassList.remove(CLASS_PROGRESSBAR_IN);\r\n\t\tclassList.add(CLASS_PROGRESSBAR_OUT);\r\n\t\tprogressbar.addEventListener('webkitAnimationEnd', function() {\r\n\t\t\tprogressbar.parentNode && progressbar.parentNode.removeChild(progressbar);\r\n\t\t\tprogressbar = null;\r\n\t\t});\r\n\t\treturn;\r\n\t};\r\n\t/**\r\n\t * 设置指定进度条进度\r\n\t * @param {Object} container  可选，默认body，支持selector,DOM Node,mui wrapper\r\n\t * @param {Object} progress 可选，默认0 取值范围[0-100]\r\n\t * @param {Object} speed 进度条动画时间\r\n\t */\r\n\tvar setProgressbar = function(container, progress, speed) {\r\n\t\tif (typeof container === 'number') {\r\n\t\t\tspeed = progress;\r\n\t\t\tprogress = container;\r\n\t\t\tcontainer = false;\r\n\t\t}\r\n\t\tvar progressbar = _findProgressbar(container);\r\n\t\tif (!progressbar || progressbar.classList.contains(CLASS_PROGRESSBAR_INFINITE)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tif (progress) progress = Math.min(Math.max(progress, 0), 100);\r\n\t\tprogressbar.offsetHeight;\r\n\t\tvar span = progressbar.querySelector('span');\r\n\t\tif (span) {\r\n\t\t\tvar style = span.style;\r\n\t\t\tstyle.webkitTransform = 'translate3d(' + (-100 + progress) + '%,0,0)';\r\n\t\t\tif (typeof speed !== 'undefined') {\r\n\t\t\t\tstyle.webkitTransitionDuration = speed + 'ms';\r\n\t\t\t} else {\r\n\t\t\t\tstyle.webkitTransitionDuration = '';\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn progressbar;\r\n\t};\r\n\t$.fn.progressbar = function(options) {\r\n\t\tvar progressbarApis = [];\r\n\t\toptions = options || {};\r\n\t\tthis.each(function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar progressbarApi = self.mui_plugin_progressbar;\r\n\t\t\tif (!progressbarApi) {\r\n\t\t\t\tself.mui_plugin_progressbar = progressbarApi = {\r\n\t\t\t\t\toptions: options,\r\n\t\t\t\t\tsetOptions: function(options) {\r\n\t\t\t\t\t\tthis.options = options;\r\n\t\t\t\t\t},\r\n\t\t\t\t\tshow: function() {\r\n\t\t\t\t\t\treturn showProgressbar(self, this.options.progress, this.options.color);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsetProgress: function(progress) {\r\n\t\t\t\t\t\treturn setProgressbar(self, progress);\r\n\t\t\t\t\t},\r\n\t\t\t\t\thide: function() {\r\n\t\t\t\t\t\treturn hideProgressbar(self);\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t} else if (options) {\r\n\t\t\t\tprogressbarApi.setOptions(options);\r\n\t\t\t}\r\n\t\t\tprogressbarApis.push(progressbarApi);\r\n\t\t});\r\n\t\treturn progressbarApis.length === 1 ? progressbarApis[0] : progressbarApis;\r\n\t};\r\n\t//\t$.setProgressbar = setProgressbar;\r\n\t//\t$.showProgressbar = showProgressbar;\r\n\t//\t$.hideProgressbar = hideProgressbar;\r\n})(mui, document);\r\n/**\r\n * Input(TODO resize)\r\n * @param {type} $\r\n * @param {type} window\r\n * @param {type} document\r\n * @returns {undefined}\r\n */\r\n(function($, window, document) {\r\n\tvar CLASS_ICON = 'mui-icon';\r\n\tvar CLASS_ICON_CLEAR = 'mui-icon-clear';\r\n\tvar CLASS_ICON_SPEECH = 'mui-icon-speech';\r\n\tvar CLASS_ICON_SEARCH = 'mui-icon-search';\r\n\tvar CLASS_ICON_PASSWORD = 'mui-icon-eye';\r\n\tvar CLASS_INPUT_ROW = 'mui-input-row';\r\n\tvar CLASS_PLACEHOLDER = 'mui-placeholder';\r\n\tvar CLASS_TOOLTIP = 'mui-tooltip';\r\n\tvar CLASS_HIDDEN = 'mui-hidden';\r\n\tvar CLASS_FOCUSIN = 'mui-focusin';\r\n\tvar SELECTOR_ICON_CLOSE = '.' + CLASS_ICON_CLEAR;\r\n\tvar SELECTOR_ICON_SPEECH = '.' + CLASS_ICON_SPEECH;\r\n\tvar SELECTOR_ICON_PASSWORD = '.' + CLASS_ICON_PASSWORD;\r\n\tvar SELECTOR_PLACEHOLDER = '.' + CLASS_PLACEHOLDER;\r\n\tvar SELECTOR_TOOLTIP = '.' + CLASS_TOOLTIP;\r\n\r\n\tvar findRow = function(target) {\r\n\t\tfor (; target && target !== document; target = target.parentNode) {\r\n\t\t\tif (target.classList && target.classList.contains(CLASS_INPUT_ROW)) {\r\n\t\t\t\treturn target;\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn null;\r\n\t};\r\n\tvar Input = function(element, options) {\r\n\t\tthis.element = element;\r\n\t\tthis.options = options || {\r\n\t\t\tactions: 'clear'\r\n\t\t};\r\n\t\tif (~this.options.actions.indexOf('slider')) { //slider\r\n\t\t\tthis.sliderActionClass = CLASS_TOOLTIP + ' ' + CLASS_HIDDEN;\r\n\t\t\tthis.sliderActionSelector = SELECTOR_TOOLTIP;\r\n\t\t} else { //clear,speech,search\r\n\t\t\tif (~this.options.actions.indexOf('clear')) {\r\n\t\t\t\tthis.clearActionClass = CLASS_ICON + ' ' + CLASS_ICON_CLEAR + ' ' + CLASS_HIDDEN;\r\n\t\t\t\tthis.clearActionSelector = SELECTOR_ICON_CLOSE;\r\n\t\t\t}\r\n\t\t\tif (~this.options.actions.indexOf('speech')) { //only for 5+\r\n\t\t\t\tthis.speechActionClass = CLASS_ICON + ' ' + CLASS_ICON_SPEECH;\r\n\t\t\t\tthis.speechActionSelector = SELECTOR_ICON_SPEECH;\r\n\t\t\t}\r\n\t\t\tif (~this.options.actions.indexOf('search')) {\r\n\t\t\t\tthis.searchActionClass = CLASS_PLACEHOLDER;\r\n\t\t\t\tthis.searchActionSelector = SELECTOR_PLACEHOLDER;\r\n\t\t\t}\r\n\t\t\tif (~this.options.actions.indexOf('password')) {\r\n\t\t\t\tthis.passwordActionClass = CLASS_ICON + ' ' + CLASS_ICON_PASSWORD;\r\n\t\t\t\tthis.passwordActionSelector = SELECTOR_ICON_PASSWORD;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.init();\r\n\t};\r\n\tInput.prototype.init = function() {\r\n\t\tthis.initAction();\r\n\t\tthis.initElementEvent();\r\n\t};\r\n\tInput.prototype.initAction = function() {\r\n\t\tvar self = this;\r\n\r\n\t\tvar row = self.element.parentNode;\r\n\t\tif (row) {\r\n\t\t\tif (self.sliderActionClass) {\r\n\t\t\t\tself.sliderAction = self.createAction(row, self.sliderActionClass, self.sliderActionSelector);\r\n\t\t\t} else {\r\n\t\t\t\tif (self.searchActionClass) {\r\n\t\t\t\t\tself.searchAction = self.createAction(row, self.searchActionClass, self.searchActionSelector);\r\n\t\t\t\t\tself.searchAction.addEventListener('tap', function(e) {\r\n\t\t\t\t\t\t$.focus(self.element);\r\n\t\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (self.speechActionClass) {\r\n\t\t\t\t\tself.speechAction = self.createAction(row, self.speechActionClass, self.speechActionSelector);\r\n\t\t\t\t\tself.speechAction.addEventListener('click', $.stopPropagation);\r\n\t\t\t\t\tself.speechAction.addEventListener('tap', function(event) {\r\n\t\t\t\t\t\tself.speechActionClick(event);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (self.clearActionClass) {\r\n\t\t\t\t\tself.clearAction = self.createAction(row, self.clearActionClass, self.clearActionSelector);\r\n\t\t\t\t\tself.clearAction.addEventListener('tap', function(event) {\r\n\t\t\t\t\t\tself.clearActionClick(event);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (self.passwordActionClass) {\r\n\t\t\t\t\tself.passwordAction = self.createAction(row, self.passwordActionClass, self.passwordActionSelector);\r\n\t\t\t\t\tself.passwordAction.addEventListener('tap', function(event) {\r\n\t\t\t\t\t\tself.passwordActionClick(event);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tInput.prototype.createAction = function(row, actionClass, actionSelector) {\r\n\t\tvar action = row.querySelector(actionSelector);\r\n\t\tif (!action) {\r\n\t\t\tvar action = document.createElement('span');\r\n\t\t\taction.className = actionClass;\r\n\t\t\tif (actionClass === this.searchActionClass) {\r\n\t\t\t\taction.innerHTML = '<span class=\"' + CLASS_ICON + ' ' + CLASS_ICON_SEARCH + '\"></span><span>' + this.element.getAttribute('placeholder') + '</span>';\r\n\t\t\t\tthis.element.setAttribute('placeholder', '');\r\n\t\t\t\tif (this.element.value.trim()) {\r\n\t\t\t\t\trow.classList.add('mui-active');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\trow.insertBefore(action, this.element.nextSibling);\r\n\t\t}\r\n\t\treturn action;\r\n\t};\r\n\tInput.prototype.initElementEvent = function() {\r\n\t\tvar element = this.element;\r\n\r\n\t\tif (this.sliderActionClass) {\r\n\t\t\tvar tooltip = this.sliderAction;\r\n\t\t\tvar timer = null;\r\n\t\t\tvar showTip = function() { //每次重新计算是因为控件可能被隐藏，初始化时计算是不正确的\r\n\t\t\t\ttooltip.classList.remove(CLASS_HIDDEN);\r\n\t\t\t\tvar offsetLeft = element.offsetLeft;\r\n\t\t\t\tvar width = element.offsetWidth - 28;\r\n\t\t\t\tvar tooltipWidth = tooltip.offsetWidth;\r\n\t\t\t\tvar distince = Math.abs(element.max - element.min);\r\n\t\t\t\tvar scaleWidth = (width / distince) * Math.abs(element.value - element.min);\r\n\t\t\t\ttooltip.style.left = (14 + offsetLeft + scaleWidth - tooltipWidth / 2) + 'px';\r\n\t\t\t\ttooltip.innerText = element.value;\r\n\t\t\t\tif (timer) {\r\n\t\t\t\t\tclearTimeout(timer);\r\n\t\t\t\t}\r\n\t\t\t\ttimer = setTimeout(function() {\r\n\t\t\t\t\ttooltip.classList.add(CLASS_HIDDEN);\r\n\t\t\t\t}, 1000);\r\n\t\t\t};\r\n\t\t\telement.addEventListener('input', showTip);\r\n\t\t\telement.addEventListener('tap', showTip);\r\n\t\t\telement.addEventListener($.EVENT_MOVE, function(e) {\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\tif (this.clearActionClass) {\r\n\t\t\t\tvar action = this.clearAction;\r\n\t\t\t\tif (!action) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t$.each(['keyup', 'change', 'input', 'focus', 'cut', 'paste'], function(index, type) {\r\n\t\t\t\t\t(function(type) {\r\n\t\t\t\t\t\telement.addEventListener(type, function() {\r\n\t\t\t\t\t\t\taction.classList[element.value.trim() ? 'remove' : 'add'](CLASS_HIDDEN);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t})(type);\r\n\t\t\t\t});\r\n\t\t\t\telement.addEventListener('blur', function() {\r\n\t\t\t\t\taction.classList.add(CLASS_HIDDEN);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif (this.searchActionClass) {\r\n\t\t\t\telement.addEventListener('focus', function() {\r\n\t\t\t\t\telement.parentNode.classList.add('mui-active');\r\n\t\t\t\t});\r\n\t\t\t\telement.addEventListener('blur', function() {\r\n\t\t\t\t\tif (!element.value.trim()) {\r\n\t\t\t\t\t\telement.parentNode.classList.remove('mui-active');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n\tInput.prototype.setPlaceholder = function(text) {\r\n\t\tif (this.searchActionClass) {\r\n\t\t\tvar placeholder = this.element.parentNode.querySelector(SELECTOR_PLACEHOLDER);\r\n\t\t\tplaceholder && (placeholder.getElementsByTagName('span')[1].innerText = text);\r\n\t\t} else {\r\n\t\t\tthis.element.setAttribute('placeholder', text);\r\n\t\t}\r\n\t};\r\n\tInput.prototype.passwordActionClick = function(event) {\r\n\t\tif (this.element.type === 'text') {\r\n\t\t\tthis.element.type = 'password';\r\n\t\t} else {\r\n\t\t\tthis.element.type = 'text';\r\n\t\t}\r\n\t\tthis.passwordAction.classList.toggle('mui-active');\r\n\t\tevent.preventDefault();\r\n\t};\r\n\tInput.prototype.clearActionClick = function(event) {\r\n\t\tvar self = this;\r\n\t\tself.element.value = '';\r\n\t\t$.focus(self.element);\r\n\t\tself.clearAction.classList.add(CLASS_HIDDEN);\r\n\t\tevent.preventDefault();\r\n\t};\r\n\tInput.prototype.speechActionClick = function(event) {\r\n\t\tif (window.plus) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar oldValue = self.element.value;\r\n\t\t\tself.element.value = '';\r\n\t\t\tdocument.body.classList.add(CLASS_FOCUSIN);\r\n\t\t\tplus.speech.startRecognize({\r\n\t\t\t\tengine: 'iFly'\r\n\t\t\t}, function(s) {\r\n\t\t\t\tself.element.value += s;\r\n\t\t\t\t$.focus(self.element);\r\n\t\t\t\tplus.speech.stopRecognize();\r\n\t\t\t\t$.trigger(self.element, 'recognized', {\r\n\t\t\t\t\tvalue: self.element.value\r\n\t\t\t\t});\r\n\t\t\t\tif (oldValue !== self.element.value) {\r\n\t\t\t\t\t$.trigger(self.element, 'change');\r\n\t\t\t\t\t$.trigger(self.element, 'input');\r\n\t\t\t\t}\r\n\t\t\t\t// document.body.classList.remove(CLASS_FOCUSIN);\r\n\t\t\t}, function(e) {\r\n\t\t\t\tdocument.body.classList.remove(CLASS_FOCUSIN);\r\n\t\t\t});\r\n\t\t} else {\r\n\t\t\talert('only for 5+');\r\n\t\t}\r\n\t\tevent.preventDefault();\r\n\t};\r\n\t$.fn.input = function(options) {\r\n\t\tvar inputApis = [];\r\n\t\tthis.each(function() {\r\n\t\t\tvar inputApi = null;\r\n\t\t\tvar actions = [];\r\n\t\t\tvar row = findRow(this.parentNode);\r\n\t\t\tif (this.type === 'range' && row.classList.contains('mui-input-range')) {\r\n\t\t\t\tactions.push('slider');\r\n\t\t\t} else {\r\n\t\t\t\tvar classList = this.classList;\r\n\t\t\t\tif (classList.contains('mui-input-clear')) {\r\n\t\t\t\t\tactions.push('clear');\r\n\t\t\t\t}\r\n\t\t\t\tif (!($.os.android && $.os.stream) && classList.contains('mui-input-speech')) {\r\n\t\t\t\t\tactions.push('speech');\r\n\t\t\t\t}\r\n\t\t\t\tif (classList.contains('mui-input-password')) {\r\n\t\t\t\t\tactions.push('password');\r\n\t\t\t\t}\r\n\t\t\t\tif (this.type === 'search' && row.classList.contains('mui-search')) {\r\n\t\t\t\t\tactions.push('search');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tvar id = this.getAttribute('data-input-' + actions[0]);\r\n\t\t\tif (!id) {\r\n\t\t\t\tid = ++$.uuid;\r\n\t\t\t\tinputApi = $.data[id] = new Input(this, {\r\n\t\t\t\t\tactions: actions.join(',')\r\n\t\t\t\t});\r\n\t\t\t\tfor (var i = 0, len = actions.length; i < len; i++) {\r\n\t\t\t\t\tthis.setAttribute('data-input-' + actions[i], id);\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tinputApi = $.data[id];\r\n\t\t\t}\r\n\t\t\tinputApis.push(inputApi);\r\n\t\t});\r\n\t\treturn inputApis.length === 1 ? inputApis[0] : inputApis;\r\n\t};\r\n\t$.ready(function() {\r\n\t\t$('.mui-input-row input').input();\r\n\t});\r\n})(mui, window, document);\r\n(function($, window) {\r\n\tvar rgbaRegex = /^rgba\\((\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3}),\\s*(\\d{1,3})\\)$/;\r\n\tvar getColor = function(colorStr) {\r\n\t\tvar matches = colorStr.match(rgbaRegex);\r\n\t\tif (matches && matches.length === 5) {\r\n\t\t\treturn [\r\n\t\t\t\tmatches[1],\r\n\t\t\t\tmatches[2],\r\n\t\t\t\tmatches[3],\r\n\t\t\t\tmatches[4]\r\n\t\t\t];\r\n\t\t}\r\n\t\treturn [];\r\n\t};\r\n\tvar Transparent = function(element, options) {\r\n\t\tthis.element = element;\r\n\t\tthis.options = $.extend({\r\n\t\t\ttop: 0,\r\n\t\t\toffset: 150,\r\n\t\t\tduration: 16\r\n\t\t}, options || {});\r\n\t\tthis._style = this.element.style;\r\n\t\tthis._bgColor = this._style.backgroundColor;\r\n\t\tvar color = getColor(mui.getStyles(this.element, 'backgroundColor'));\r\n\t\tif (color.length) {\r\n\t\t\tthis._R = color[0];\r\n\t\t\tthis._G = color[1];\r\n\t\t\tthis._B = color[2];\r\n\t\t\tthis._A = color[3];\r\n\t\t\tthis._bufferFn = $.buffer(this.handleScroll, this.options.duration, this);\r\n\t\t\tthis.initEvent();\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"元素背景颜色必须为RGBA\");\r\n\t\t}\r\n\t};\r\n\r\n\tTransparent.prototype.initEvent = function() {\r\n\t\twindow.addEventListener('scroll', this._bufferFn);\r\n\t\twindow.addEventListener($.EVENT_MOVE, this._bufferFn);\r\n\t};\r\n\tTransparent.prototype.handleScroll = function() {\r\n\t\tthis._style.backgroundColor = 'rgba(' + this._R + ',' + this._G + ',' + this._B + ',' + (window.scrollY - this.options.top) / this.options.offset + ')';\r\n\t};\r\n\tTransparent.prototype.destory = function() {\r\n\t\twindow.removeEventListener('scroll', this._bufferFn);\r\n\t\twindow.removeEventListener($.EVENT_MOVE, this._bufferFn);\r\n\t\tthis.element.style.backgroundColor = this._bgColor;\r\n\t\tthis.element.mui_plugin_transparent = null;\r\n\t};\r\n\t$.fn.transparent = function(options) {\r\n\t\toptions = options || {};\r\n\t\tvar transparentApis = [];\r\n\t\tthis.each(function() {\r\n\t\t\tvar transparentApi = this.mui_plugin_transparent;\r\n\t\t\tif (!transparentApi) {\r\n\t\t\t\tvar top = this.getAttribute('data-top');\r\n\t\t\t\tvar offset = this.getAttribute('data-offset');\r\n\t\t\t\tvar duration = this.getAttribute('data-duration');\r\n\t\t\t\tif (top !== null && typeof options.top === 'undefined') {\r\n\t\t\t\t\toptions.top = top;\r\n\t\t\t\t}\r\n\t\t\t\tif (offset !== null && typeof options.offset === 'undefined') {\r\n\t\t\t\t\toptions.offset = offset;\r\n\t\t\t\t}\r\n\t\t\t\tif (duration !== null && typeof options.duration === 'undefined') {\r\n\t\t\t\t\toptions.duration = duration;\r\n\t\t\t\t}\r\n\t\t\t\ttransparentApi = this.mui_plugin_transparent = new Transparent(this, options);\r\n\t\t\t}\r\n\t\t\ttransparentApis.push(transparentApi);\r\n\t\t});\r\n\t\treturn transparentApis.length === 1 ? transparentApis[0] : transparentApis;\r\n\t};\r\n\t$.ready(function() {\r\n\t\t$('.mui-bar-transparent').transparent();\r\n\t});\r\n})(mui, window);\r\n/**\r\n * 数字输入框\r\n * varstion 1.0.1\r\n * by Houfeng\r\n * Houfeng@DCloud.io\r\n */\r\n\r\n(function($) {\r\n\r\n\tvar touchSupport = ('ontouchstart' in document);\r\n\tvar tapEventName = touchSupport ? 'tap' : 'click';\r\n\tvar changeEventName = 'change';\r\n\tvar holderClassName = 'mui-numbox';\r\n\tvar plusClassSelector = '.mui-btn-numbox-plus,.mui-numbox-btn-plus';\r\n\tvar minusClassSelector = '.mui-btn-numbox-minus,.mui-numbox-btn-minus';\r\n\tvar inputClassSelector = '.mui-input-numbox,.mui-numbox-input';\r\n\r\n\tvar Numbox = $.Numbox = $.Class.extend({\r\n\t\t/**\r\n\t\t * 构造函数\r\n\t\t **/\r\n\t\tinit: function(holder, options) {\r\n\t\t\tvar self = this;\r\n\t\t\tif (!holder) {\r\n\t\t\t\tthrow \"构造 numbox 时缺少容器元素\";\r\n\t\t\t}\r\n\t\t\tself.holder = holder;\r\n\t\t\toptions = options || {};\r\n\t\t\toptions.step = parseInt(options.step || 1);\r\n\t\t\tself.options = options;\r\n\t\t\tself.input = $.qsa(inputClassSelector, self.holder)[0];\r\n\t\t\tself.plus = $.qsa(plusClassSelector, self.holder)[0];\r\n\t\t\tself.minus = $.qsa(minusClassSelector, self.holder)[0];\r\n\t\t\tself.checkValue();\r\n\t\t\tself.initEvent();\r\n\t\t},\r\n\t\t/**\r\n\t\t * 初始化事件绑定\r\n\t\t **/\r\n\t\tinitEvent: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tself.plus.addEventListener(tapEventName, function(event) {\r\n\t\t\t\tvar val = parseInt(self.input.value) + self.options.step;\r\n\t\t\t\tself.input.value = val.toString();\r\n\t\t\t\t$.trigger(self.input, changeEventName, null);\r\n\t\t\t});\r\n\t\t\tself.minus.addEventListener(tapEventName, function(event) {\r\n\t\t\t\tvar val = parseInt(self.input.value) - self.options.step;\r\n\t\t\t\tself.input.value = val.toString();\r\n\t\t\t\t$.trigger(self.input, changeEventName, null);\r\n\t\t\t});\r\n\t\t\tself.input.addEventListener(changeEventName, function(event) {\r\n\t\t\t\tself.checkValue();\r\n\t\t\t\tvar val = parseInt(self.input.value);\r\n\t\t\t\t//触发顶层容器\r\n\t\t\t\t$.trigger(self.holder, changeEventName, {\r\n\t\t\t\t\tvalue: val\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\t/**\r\n\t\t * 获取当前值\r\n\t\t **/\r\n\t\tgetValue: function() {\r\n\t\t\tvar self = this;\r\n\t\t\treturn parseInt(self.input.value);\r\n\t\t},\r\n\t\t/**\r\n\t\t * 验证当前值是法合法\r\n\t\t **/\r\n\t\tcheckValue: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar val = self.input.value;\r\n\t\t\tif (val == null || val == '' || isNaN(val)) {\r\n\t\t\t\tself.input.value = self.options.min || 0;\r\n\t\t\t\tself.minus.disabled = self.options.min != null;\r\n\t\t\t} else {\r\n\t\t\t\tvar val = parseInt(val);\r\n\t\t\t\tif (self.options.max != null && !isNaN(self.options.max) && val >= parseInt(self.options.max)) {\r\n\t\t\t\t\tval = self.options.max;\r\n\t\t\t\t\tself.plus.disabled = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.plus.disabled = false;\r\n\t\t\t\t}\r\n\t\t\t\tif (self.options.min != null && !isNaN(self.options.min) && val <= parseInt(self.options.min)) {\r\n\t\t\t\t\tval = self.options.min;\r\n\t\t\t\t\tself.minus.disabled = true;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself.minus.disabled = false;\r\n\t\t\t\t}\r\n\t\t\t\tself.input.value = val;\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * 更新选项\r\n\t\t **/\r\n\t\tsetOption: function(name, value) {\r\n\t\t\tvar self = this;\r\n\t\t\tself.options[name] = value;\r\n\t\t}\r\n\t});\r\n\r\n\t$.fn.numbox = function(options) {\r\n\t\tvar instanceArray = [];\r\n\t\t//遍历选择的元素\r\n\t\tthis.each(function(i, element) {\r\n\t\t\tif (element.numbox) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (options) {\r\n\t\t\t\telement.numbox = new Numbox(element, options);\r\n\t\t\t} else {\r\n\t\t\t\tvar optionsText = element.getAttribute('data-numbox-options');\r\n\t\t\t\tvar options = optionsText ? JSON.parse(optionsText) : {};\r\n\t\t\t\toptions.step = element.getAttribute('data-numbox-step') || options.step;\r\n\t\t\t\toptions.min = element.getAttribute('data-numbox-min') || options.min;\r\n\t\t\t\toptions.max = element.getAttribute('data-numbox-max') || options.max;\r\n\t\t\t\telement.numbox = new Numbox(element, options);\r\n\t\t\t}\r\n\t\t});\r\n\t\treturn this[0] ? this[0].numbox : null;\r\n\t}\r\n\r\n\t//自动处理 class='mui-locker' 的 dom\r\n\t$.ready(function() {\r\n\t\t$('.' + holderClassName).numbox();\r\n\t});\r\n\r\n}(mui));\r\n\r\n/**\r\n * 弹出选择列表插件\r\n * 此组件依赖 listpcker ，请在页面中先引入 mui.picker.css + mui.picker.js\r\n * varstion 1.0.1\r\n * by Houfeng\r\n * Houfeng@DCloud.io\r\n */\r\n\r\n(function($, document) {\r\n\r\n\t//创建 DOM\r\n\t$.dom = function(str) {\r\n\t\tif (typeof(str) !== 'string') {\r\n\t\t\tif ((str instanceof Array) || (str[0] && str.length)) {\r\n\t\t\t\treturn [].slice.call(str);\r\n\t\t\t} else {\r\n\t\t\t\treturn [str];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!$.__create_dom_div__) {\r\n\t\t\t$.__create_dom_div__ = document.createElement('div');\r\n\t\t}\r\n\t\t$.__create_dom_div__.innerHTML = str;\r\n\t\treturn [].slice.call($.__create_dom_div__.childNodes);\r\n\t};\r\n\r\n\tvar panelBuffer = '<div class=\"mui-poppicker\">\\\r\n\t\t<div class=\"mui-poppicker-header\">\\\r\n\t\t\t<button class=\"mui-btn mui-poppicker-btn-cancel\">取消</button>\\\r\n\t\t\t<button class=\"mui-btn mui-btn-blue mui-poppicker-btn-ok\">确定</button>\\\r\n\t\t\t<div class=\"mui-poppicker-clear\"></div>\\\r\n\t\t</div>\\\r\n\t\t<div class=\"mui-poppicker-body\">\\\r\n\t\t</div>\\\r\n\t</div>';\r\n\r\n\tvar pickerBuffer = '<div class=\"mui-picker\">\\\r\n\t\t<div class=\"mui-picker-inner\">\\\r\n\t\t\t<div class=\"mui-pciker-rule mui-pciker-rule-ft\"></div>\\\r\n\t\t\t<ul class=\"mui-pciker-list\">\\\r\n\t\t\t</ul>\\\r\n\t\t\t<div class=\"mui-pciker-rule mui-pciker-rule-bg\"></div>\\\r\n\t\t</div>\\\r\n\t</div>';\r\n\r\n\t//定义弹出选择器类\r\n\tvar PopPicker = $.PopPicker = $.Class.extend({\r\n\t\t//构造函数\r\n\t\tinit: function(options) {\r\n\t\t\tvar self = this;\r\n\t\t\tself.options = options || {};\r\n\t\t\tself.options.buttons = self.options.buttons || ['取消', '确定'];\r\n\t\t\tself.panel = $.dom(panelBuffer)[0];\r\n\t\t\tdocument.body.appendChild(self.panel);\r\n\t\t\tself.ok = self.panel.querySelector('.mui-poppicker-btn-ok');\r\n\t\t\tself.cancel = self.panel.querySelector('.mui-poppicker-btn-cancel');\r\n\t\t\tself.body = self.panel.querySelector('.mui-poppicker-body');\r\n\t\t\tself.mask = $.createMask();\r\n\t\t\tself.cancel.innerText = self.options.buttons[0];\r\n\t\t\tself.ok.innerText = self.options.buttons[1];\r\n\t\t\tself.cancel.addEventListener('tap', function(event) {\r\n\t\t\t\tself.hide();\r\n\t\t\t}, false);\r\n\t\t\tself.ok.addEventListener('tap', function(event) {\r\n\t\t\t\tif (self.callback) {\r\n\t\t\t\t\tvar rs = self.callback(self.getSelectedItems());\r\n\t\t\t\t\tif (rs !== false) {\r\n\t\t\t\t\t\tself.hide();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\t\tself.mask[0].addEventListener('tap', function() {\r\n\t\t\t\tself.hide();\r\n\t\t\t}, false);\r\n\t\t\tself._createPicker();\r\n\t\t\t//防止滚动穿透\r\n\t\t\tself.panel.addEventListener($.EVENT_START, function(event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}, false);\r\n\t\t\tself.panel.addEventListener($.EVENT_MOVE, function(event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}, false);\r\n\t\t},\r\n\t\t_createPicker: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar layer = self.options.layer || 1;\r\n\t\t\tvar width = (100 / layer) + '%';\r\n\t\t\tself.pickers = [];\r\n\t\t\tfor (var i = 1; i <= layer; i++) {\r\n\t\t\t\tvar pickerElement = $.dom(pickerBuffer)[0];\r\n\t\t\t\tpickerElement.style.width = width;\r\n\t\t\t\tself.body.appendChild(pickerElement);\r\n\t\t\t\tvar picker = $(pickerElement).picker();\r\n\t\t\t\tself.pickers.push(picker);\r\n\t\t\t\tpickerElement.addEventListener('change', function(event) {\r\n\t\t\t\t\tvar nextPickerElement = this.nextSibling;\r\n\t\t\t\t\tif (nextPickerElement && nextPickerElement.picker) {\r\n\t\t\t\t\t\tvar eventData = event.detail || {};\r\n\t\t\t\t\t\tvar preItem = eventData.item || {};\r\n\t\t\t\t\t\tnextPickerElement.picker.setItems(preItem.children);\r\n\t\t\t\t\t}\r\n\t\t\t\t}, false);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//填充数据\r\n\t\tsetData: function(data) {\r\n\t\t\tvar self = this;\r\n\t\t\tdata = data || [];\r\n\t\t\tself.pickers[0].setItems(data);\r\n\t\t},\r\n\t\t//获取选中的项（数组）\r\n\t\tgetSelectedItems: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar items = [];\r\n\t\t\tfor (var i in self.pickers) {\r\n\t\t\t\tvar picker = self.pickers[i];\r\n\t\t\t\titems.push(picker.getSelectedItem() || {});\r\n\t\t\t}\r\n\t\t\treturn items;\r\n\t\t},\r\n\t\t//显示\r\n\t\tshow: function(callback) {\r\n\t\t\tvar self = this;\r\n\t\t\tself.callback = callback;\r\n\t\t\tself.mask.show();\r\n\t\t\tdocument.body.classList.add($.className('poppicker-active-for-page'));\r\n\t\t\tself.panel.classList.add($.className('active'));\r\n\t\t\t//处理物理返回键\r\n\t\t\tself.__back = $.back;\r\n\t\t\t$.back = function() {\r\n\t\t\t\tself.hide();\r\n\t\t\t};\r\n\t\t},\r\n\t\t//隐藏\r\n\t\thide: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tif (self.disposed) return;\r\n\t\t\tself.panel.classList.remove($.className('active'));\r\n\t\t\tself.mask.close();\r\n\t\t\tdocument.body.classList.remove($.className('poppicker-active-for-page'));\r\n\t\t\t//处理物理返回键\r\n\t\t\t$.back=self.__back;\r\n\t\t},\r\n\t\tdispose: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tself.hide();\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tself.panel.parentNode.removeChild(self.panel);\r\n\t\t\t\tfor (var name in self) {\r\n\t\t\t\t\tself[name] = null;\r\n\t\t\t\t\tdelete self[name];\r\n\t\t\t\t};\r\n\t\t\t\tself.disposed = true;\r\n\t\t\t}, 300);\r\n\t\t}\r\n\t});\r\n\r\n})(mui, document);\r\n/**\r\n * 日期时间插件\r\n * varstion 1.0.5\r\n * by Houfeng\r\n * Houfeng@DCloud.io\r\n */\r\n\r\n(function($, document) {\r\n\r\n\t//创建 DOM\r\n\t$.dom = function(str) {\r\n\t\tif (typeof(str) !== 'string') {\r\n\t\t\tif ((str instanceof Array) || (str[0] && str.length)) {\r\n\t\t\t\treturn [].slice.call(str);\r\n\t\t\t} else {\r\n\t\t\t\treturn [str];\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (!$.__create_dom_div__) {\r\n\t\t\t$.__create_dom_div__ = document.createElement('div');\r\n\t\t}\r\n\t\t$.__create_dom_div__.innerHTML = str;\r\n\t\treturn [].slice.call($.__create_dom_div__.childNodes);\r\n\t};\r\n\r\n\tvar domBuffer = '<div class=\"mui-dtpicker\" data-type=\"datetime\">\\\r\n\t\t<div class=\"mui-dtpicker-header\">\\\r\n\t\t\t<button data-id=\"btn-cancel\" class=\"mui-btn\">取消</button>\\\r\n\t\t\t<button data-id=\"btn-ok\" class=\"mui-btn mui-btn-blue\">确定</button>\\\r\n\t\t</div>\\\r\n\t\t<div class=\"mui-dtpicker-title\"><h5 data-id=\"title-y\">年</h5><h5 data-id=\"title-m\">月</h5><h5 data-id=\"title-d\">日</h5><h5 data-id=\"title-h\">时</h5><h5 data-id=\"title-i\">分</h5></div>\\\r\n\t\t<div class=\"mui-dtpicker-body\">\\\r\n\t\t\t<div data-id=\"picker-y\" class=\"mui-picker\">\\\r\n\t\t\t\t<div class=\"mui-picker-inner\">\\\r\n\t\t\t\t\t<div class=\"mui-pciker-rule mui-pciker-rule-ft\"></div>\\\r\n\t\t\t\t\t<ul class=\"mui-pciker-list\">\\\r\n\t\t\t\t\t</ul>\\\r\n\t\t\t\t\t<div class=\"mui-pciker-rule mui-pciker-rule-bg\"></div>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t</div>\\\r\n\t\t\t<div data-id=\"picker-m\" class=\"mui-picker\">\\\r\n\t\t\t\t<div class=\"mui-picker-inner\">\\\r\n\t\t\t\t\t<div class=\"mui-pciker-rule mui-pciker-rule-ft\"></div>\\\r\n\t\t\t\t\t<ul class=\"mui-pciker-list\">\\\r\n\t\t\t\t\t</ul>\\\r\n\t\t\t\t\t<div class=\"mui-pciker-rule mui-pciker-rule-bg\"></div>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t</div>\\\r\n\t\t\t<div data-id=\"picker-d\" class=\"mui-picker\">\\\r\n\t\t\t\t<div class=\"mui-picker-inner\">\\\r\n\t\t\t\t\t<div class=\"mui-pciker-rule mui-pciker-rule-ft\"></div>\\\r\n\t\t\t\t\t<ul class=\"mui-pciker-list\">\\\r\n\t\t\t\t\t</ul>\\\r\n\t\t\t\t\t<div class=\"mui-pciker-rule mui-pciker-rule-bg\"></div>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t</div>\\\r\n\t\t\t<div data-id=\"picker-h\" class=\"mui-picker\">\\\r\n\t\t\t\t<div class=\"mui-picker-inner\">\\\r\n\t\t\t\t\t<div class=\"mui-pciker-rule mui-pciker-rule-ft\"></div>\\\r\n\t\t\t\t\t<ul class=\"mui-pciker-list\">\\\r\n\t\t\t\t\t</ul>\\\r\n\t\t\t\t\t<div class=\"mui-pciker-rule mui-pciker-rule-bg\"></div>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t</div>\\\r\n\t\t\t<div data-id=\"picker-i\" class=\"mui-picker\">\\\r\n\t\t\t\t<div class=\"mui-picker-inner\">\\\r\n\t\t\t\t\t<div class=\"mui-pciker-rule mui-pciker-rule-ft\"></div>\\\r\n\t\t\t\t\t<ul class=\"mui-pciker-list\">\\\r\n\t\t\t\t\t</ul>\\\r\n\t\t\t\t\t<div class=\"mui-pciker-rule mui-pciker-rule-bg\"></div>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t</div>\\\r\n\t\t</div>\\\r\n\t</div>';\r\n\r\n\t//plugin\r\n\tvar DtPicker = $.DtPicker = $.Class.extend({\r\n\t\tinit: function(options) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar _picker = $.dom(domBuffer)[0];\r\n\t\t\tdocument.body.appendChild(_picker);\r\n\t\t\t$('[data-id*=\"picker\"]', _picker).picker();\r\n\t\t\tvar ui = self.ui = {\r\n\t\t\t\tpicker: _picker,\r\n\t\t\t\tmask: $.createMask(),\r\n\t\t\t\tok: $('[data-id=\"btn-ok\"]', _picker)[0],\r\n\t\t\t\tcancel: $('[data-id=\"btn-cancel\"]', _picker)[0],\r\n\t\t\t\ty: $('[data-id=\"picker-y\"]', _picker)[0],\r\n\t\t\t\tm: $('[data-id=\"picker-m\"]', _picker)[0],\r\n\t\t\t\td: $('[data-id=\"picker-d\"]', _picker)[0],\r\n\t\t\t\th: $('[data-id=\"picker-h\"]', _picker)[0],\r\n\t\t\t\ti: $('[data-id=\"picker-i\"]', _picker)[0],\r\n\t\t\t\tlabels: $('[data-id*=\"title-\"]', _picker),\r\n\t\t\t};\r\n\t\t\tui.cancel.addEventListener('tap', function() {\r\n\t\t\t\tself.hide();\r\n\t\t\t}, false);\r\n\t\t\tui.ok.addEventListener('tap', function() {\r\n\t\t\t\tvar rs = self.callback(self.getSelected());\r\n\t\t\t\tif (rs !== false) {\r\n\t\t\t\t\tself.hide();\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\t\tui.y.addEventListener('change', function(e) { //目前的change事件容易导致级联触发\r\n\t\t\t\tif (self.options.beginMonth || self.options.endMonth) {\r\n\t\t\t\t\tself._createMonth();\r\n\t\t\t\t} else {\r\n\t\t\t\t\tself._createDay();\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\t\tui.m.addEventListener('change', function(e) {\r\n\t\t\t\tself._createDay();\r\n\t\t\t}, false);\r\n\t\t\tui.d.addEventListener('change', function(e) {\r\n\t\t\t\tif (self.options.beginMonth || self.options.endMonth) { //仅提供了beginDate时，触发day,hours,minutes的change\r\n\t\t\t\t\tself._createHours();\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\t\tui.h.addEventListener('change', function(e) {\r\n\t\t\t\tif (self.options.beginMonth || self.options.endMonth) {\r\n\t\t\t\t\tself._createMinutes();\r\n\t\t\t\t}\r\n\t\t\t}, false);\r\n\t\t\tui.mask[0].addEventListener('tap', function() {\r\n\t\t\t\tself.hide();\r\n\t\t\t}, false);\r\n\t\t\tself._create(options);\r\n\t\t\t//防止滚动穿透\r\n\t\t\tself.ui.picker.addEventListener($.EVENT_START, function(event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}, false);\r\n\t\t\tself.ui.picker.addEventListener($.EVENT_MOVE, function(event) {\r\n\t\t\t\tevent.preventDefault();\r\n\t\t\t}, false);\r\n\t\t},\r\n\t\tgetSelected: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar ui = self.ui;\r\n\t\t\tvar type = self.options.type;\r\n\t\t\tvar selected = {\r\n\t\t\t\ttype: type,\r\n\t\t\t\ty: ui.y.picker.getSelectedItem(),\r\n\t\t\t\tm: ui.m.picker.getSelectedItem(),\r\n\t\t\t\td: ui.d.picker.getSelectedItem(),\r\n\t\t\t\th: ui.h.picker.getSelectedItem(),\r\n\t\t\t\ti: ui.i.picker.getSelectedItem(),\r\n\t\t\t\ttoString: function() {\r\n\t\t\t\t\treturn this.value;\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\tswitch (type) {\r\n\t\t\t\tcase 'datetime':\r\n\t\t\t\t\tselected.value = selected.y.value + '-' + selected.m.value + '-' + selected.d.value + ' ' + selected.h.value + ':' + selected.i.value;\r\n\t\t\t\t\tselected.text = selected.y.text + '-' + selected.m.text + '-' + selected.d.text + ' ' + selected.h.text + ':' + selected.i.text;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'date':\r\n\t\t\t\t\tselected.value = selected.y.value + '-' + selected.m.value + '-' + selected.d.value;\r\n\t\t\t\t\tselected.text = selected.y.text + '-' + selected.m.text + '-' + selected.d.text;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'time':\r\n\t\t\t\t\tselected.value = selected.h.value + ':' + selected.i.value;\r\n\t\t\t\t\tselected.text = selected.h.text + ':' + selected.i.text;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'month':\r\n\t\t\t\t\tselected.value = selected.y.value + '-' + selected.m.value;\r\n\t\t\t\t\tselected.text = selected.y.text + '-' + selected.m.text;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'hour':\r\n\t\t\t\t\tselected.value = selected.y.value + '-' + selected.m.value + '-' + selected.d.value + ' ' + selected.h.value;\r\n\t\t\t\t\tselected.text = selected.y.text + '-' + selected.m.text + '-' + selected.d.text + ' ' + selected.h.text;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t\treturn selected;\r\n\t\t},\r\n\t\tsetSelectedValue: function(value) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar ui = self.ui;\r\n\t\t\tvar parsedValue = self._parseValue(value);\r\n\t\t\t//TODO 嵌套过多，因为picker的change时间是异步(考虑到性能)的，所以为了保证change之后再setSelected，目前使用回调处理\r\n\t\t\tui.y.picker.setSelectedValue(parsedValue.y, 0, function() {\r\n\t\t\t\tui.m.picker.setSelectedValue(parsedValue.m, 0, function() {\r\n\t\t\t\t\tui.d.picker.setSelectedValue(parsedValue.d, 0, function() {\r\n\t\t\t\t\t\tui.h.picker.setSelectedValue(parsedValue.h, 0, function() {\r\n\t\t\t\t\t\t\tui.i.picker.setSelectedValue(parsedValue.i, 0);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t},\r\n\t\tisLeapYear: function(year) {\r\n\t\t\treturn (year % 4 == 0 && year % 100 != 0) || (year % 400 == 0);\r\n\t\t},\r\n\t\t_inArray: function(array, item) {\r\n\t\t\tfor (var index in array) {\r\n\t\t\t\tvar _item = array[index];\r\n\t\t\t\tif (_item === item) return true;\r\n\t\t\t}\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tgetDayNum: function(year, month) {\r\n\t\t\tvar self = this;\r\n\t\t\tif (self._inArray([1, 3, 5, 7, 8, 10, 12], month)) {\r\n\t\t\t\treturn 31;\r\n\t\t\t} else if (self._inArray([4, 6, 9, 11], month)) {\r\n\t\t\t\treturn 30;\r\n\t\t\t} else if (self.isLeapYear(year)) {\r\n\t\t\t\treturn 29;\r\n\t\t\t} else {\r\n\t\t\t\treturn 28;\r\n\t\t\t}\r\n\t\t},\r\n\t\t_fill: function(num) {\r\n\t\t\tnum = num.toString();\r\n\t\t\tif (num.length < 2) {\r\n\t\t\t\tnum = 0 + num;\r\n\t\t\t}\r\n\t\t\treturn num;\r\n\t\t},\r\n\t\t_isBeginYear: function() {\r\n\t\t\treturn this.options.beginYear === parseInt(this.ui.y.picker.getSelectedValue());\r\n\t\t},\r\n\t\t_isBeginMonth: function() {\r\n\t\t\treturn this.options.beginMonth && this._isBeginYear() && this.options.beginMonth === parseInt(this.ui.m.picker.getSelectedValue());\r\n\t\t},\r\n\t\t_isBeginDay: function() {\r\n\t\t\treturn this._isBeginMonth() && this.options.beginDay === parseInt(this.ui.d.picker.getSelectedValue());\r\n\t\t},\r\n\t\t_isBeginHours: function() {\r\n\t\t\treturn this._isBeginDay() && this.options.beginHours === parseInt(this.ui.h.picker.getSelectedValue());\r\n\t\t},\r\n\t\t_isEndYear: function() {\r\n\t\t\treturn this.options.endYear === parseInt(this.ui.y.picker.getSelectedValue());\r\n\t\t},\r\n\t\t_isEndMonth: function() {\r\n\t\t\treturn this.options.endMonth && this._isEndYear() && this.options.endMonth === parseInt(this.ui.m.picker.getSelectedValue());\r\n\t\t},\r\n\t\t_isEndDay: function() {\r\n\t\t\treturn this._isEndMonth() && this.options.endDay === parseInt(this.ui.d.picker.getSelectedValue());\r\n\t\t},\r\n\t\t_isEndHours: function() {\r\n\t\t\treturn this._isEndDay() && this.options.endHours === parseInt(this.ui.h.picker.getSelectedValue());\r\n\t\t},\r\n\t\t_createYear: function(current) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar options = self.options;\r\n\t\t\tvar ui = self.ui;\r\n\t\t\t//生成年列表\r\n\t\t\tvar yArray = [];\r\n\t\t\tif (options.customData.y) {\r\n\t\t\t\tyArray = options.customData.y;\r\n\t\t\t} else {\r\n\t\t\t\tvar yBegin = options.beginYear;\r\n\t\t\t\tvar yEnd = options.endYear;\r\n\t\t\t\tfor (var y = yBegin; y <= yEnd; y++) {\r\n\t\t\t\t\tyArray.push({\r\n\t\t\t\t\t\ttext: y + '',\r\n\t\t\t\t\t\tvalue: y\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tui.y.picker.setItems(yArray);\r\n\t\t\t//ui.y.picker.setSelectedValue(current);\r\n\t\t},\r\n\t\t_createMonth: function(current) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar options = self.options;\r\n\t\t\tvar ui = self.ui;\r\n\r\n\t\t\t//生成月列表\r\n\t\t\tvar mArray = [];\r\n\t\t\tif (options.customData.m) {\r\n\t\t\t\tmArray = options.customData.m;\r\n\t\t\t} else {\r\n\t\t\t\tvar m = options.beginMonth && self._isBeginYear() ? options.beginMonth : 1;\r\n\t\t\t\tvar maxMonth = options.endMonth && self._isEndYear() ? options.endMonth : 12;\r\n\t\t\t\tfor (; m <= maxMonth; m++) {\r\n\t\t\t\t\tvar val = self._fill(m);\r\n\t\t\t\t\tmArray.push({\r\n\t\t\t\t\t\ttext: val,\r\n\t\t\t\t\t\tvalue: val\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tui.m.picker.setItems(mArray);\r\n\t\t\t//ui.m.picker.setSelectedValue(current);\r\n\t\t},\r\n\t\t_createDay: function(current) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar options = self.options;\r\n\t\t\tvar ui = self.ui;\r\n\r\n\t\t\t//生成日列表\r\n\t\t\tvar dArray = [];\r\n\t\t\tif (options.customData.d) {\r\n\t\t\t\tdArray = options.customData.d;\r\n\t\t\t} else {\r\n\t\t\t\tvar d = self._isBeginMonth() ? options.beginDay : 1;\r\n\t\t\t\tvar maxDay = self._isEndMonth() ? options.endDay : self.getDayNum(parseInt(this.ui.y.picker.getSelectedValue()), parseInt(this.ui.m.picker.getSelectedValue()));\r\n\t\t\t\tfor (; d <= maxDay; d++) {\r\n\t\t\t\t\tvar val = self._fill(d);\r\n\t\t\t\t\tdArray.push({\r\n\t\t\t\t\t\ttext: val,\r\n\t\t\t\t\t\tvalue: val\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tui.d.picker.setItems(dArray);\r\n\t\t\tcurrent = current || ui.d.picker.getSelectedValue();\r\n\t\t\t//ui.d.picker.setSelectedValue(current);\r\n\t\t},\r\n\t\t_createHours: function(current) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar options = self.options;\r\n\t\t\tvar ui = self.ui;\r\n\t\t\t//生成时列表\r\n\t\t\tvar hArray = [];\r\n\t\t\tif (options.customData.h) {\r\n\t\t\t\thArray = options.customData.h;\r\n\t\t\t} else {\r\n\t\t\t\tvar h = self._isBeginDay() ? options.beginHours : 0;\r\n\t\t\t\tvar maxHours = self._isEndDay() ? options.endHours : 23;\r\n\t\t\t\tfor (; h <= maxHours; h++) {\r\n\t\t\t\t\tvar val = self._fill(h);\r\n\t\t\t\t\thArray.push({\r\n\t\t\t\t\t\ttext: val,\r\n\t\t\t\t\t\tvalue: val\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tui.h.picker.setItems(hArray);\r\n\t\t\t//ui.h.picker.setSelectedValue(current);\r\n\t\t},\r\n\t\t_createMinutes: function(current) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar options = self.options;\r\n\t\t\tvar ui = self.ui;\r\n\r\n\t\t\t//生成分列表\r\n\t\t\tvar iArray = [];\r\n\t\t\tif (options.customData.i) {\r\n\t\t\t\tiArray = options.customData.i;\r\n\t\t\t} else {\r\n\t\t\t\tvar i = self._isBeginHours() ? options.beginMinutes : 0;\r\n\t\t\t\tvar maxMinutes = self._isEndHours() ? options.endMinutes : 59;\r\n\t\t\t\tfor (; i <= maxMinutes; i++) {\r\n\t\t\t\t\tvar val = self._fill(i);\r\n\t\t\t\t\tiArray.push({\r\n\t\t\t\t\t\ttext: val,\r\n\t\t\t\t\t\tvalue: val\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tui.i.picker.setItems(iArray);\r\n\t\t\t//ui.i.picker.setSelectedValue(current);\r\n\t\t},\r\n\t\t_setLabels: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar options = self.options;\r\n\t\t\tvar ui = self.ui;\r\n\t\t\tui.labels.each(function(i, label) {\r\n\t\t\t\tlabel.innerText = options.labels[i];\r\n\t\t\t});\r\n\t\t},\r\n\t\t_setButtons: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tvar options = self.options;\r\n\t\t\tvar ui = self.ui;\r\n\t\t\tui.cancel.innerText = options.buttons[0];\r\n\t\t\tui.ok.innerText = options.buttons[1];\r\n\t\t},\r\n\t\t_parseValue: function(value) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar rs = {};\r\n\t\t\tif (value) {\r\n\t\t\t\tvar parts = value.replace(\":\", \"-\").replace(\" \", \"-\").split(\"-\");\r\n\t\t\t\trs.y = parts[0];\r\n\t\t\t\trs.m = parts[1];\r\n\t\t\t\trs.d = parts[2];\r\n\t\t\t\trs.h = parts[3];\r\n\t\t\t\trs.i = parts[4];\r\n\t\t\t} else {\r\n\t\t\t\tvar now = new Date();\r\n\t\t\t\trs.y = now.getFullYear();\r\n\t\t\t\trs.m = now.getMonth() + 1;\r\n\t\t\t\trs.d = now.getDate();\r\n\t\t\t\trs.h = now.getHours();\r\n\t\t\t\trs.i = now.getMinutes();\r\n\t\t\t}\r\n\t\t\treturn rs;\r\n\t\t},\r\n\t\t_create: function(options) {\r\n\t\t\tvar self = this;\r\n\t\t\toptions = options || {};\r\n\t\t\toptions.labels = options.labels || ['年', '月', '日', '时', '分'];\r\n\t\t\toptions.buttons = options.buttons || ['取消', '确定'];\r\n\t\t\toptions.type = options.type || 'datetime';\r\n\t\t\toptions.customData = options.customData || {};\r\n\t\t\tself.options = options;\r\n\t\t\tvar now = new Date();\r\n\t\t\tvar beginDate = options.beginDate;\r\n\t\t\tif (beginDate instanceof Date && !isNaN(beginDate.valueOf())) { //设定了开始日期\r\n\t\t\t\toptions.beginYear = beginDate.getFullYear();\r\n\t\t\t\toptions.beginMonth = beginDate.getMonth() + 1;\r\n\t\t\t\toptions.beginDay = beginDate.getDate();\r\n\t\t\t\toptions.beginHours = beginDate.getHours();\r\n\t\t\t\toptions.beginMinutes = beginDate.getMinutes();\r\n\t\t\t}\r\n\t\t\tvar endDate = options.endDate;\r\n\t\t\tif (endDate instanceof Date && !isNaN(endDate.valueOf())) { //设定了结束日期\r\n\t\t\t\toptions.endYear = endDate.getFullYear();\r\n\t\t\t\toptions.endMonth = endDate.getMonth() + 1;\r\n\t\t\t\toptions.endDay = endDate.getDate();\r\n\t\t\t\toptions.endHours = endDate.getHours();\r\n\t\t\t\toptions.endMinutes = endDate.getMinutes();\r\n\t\t\t}\r\n\t\t\toptions.beginYear = options.beginYear || (now.getFullYear() - 5);\r\n\t\t\toptions.endYear = options.endYear || (now.getFullYear() + 5);\r\n\t\t\tvar ui = self.ui;\r\n\t\t\t//设定label\r\n\t\t\tself._setLabels();\r\n\t\t\tself._setButtons();\r\n\t\t\t//设定类型\r\n\t\t\tui.picker.setAttribute('data-type', options.type);\r\n\t\t\t//生成\r\n\t\t\tself._createYear();\r\n\t\t\tself._createMonth();\r\n\t\t\tself._createDay();\r\n\t\t\tself._createHours();\r\n\t\t\tself._createMinutes();\r\n\t\t\t//设定默认值\r\n\t\t\tself.setSelectedValue(options.value);\r\n\t\t},\r\n\t\t//显示\r\n\t\tshow: function(callback) {\r\n\t\t\tvar self = this;\r\n\t\t\tvar ui = self.ui;\r\n\t\t\tself.callback = callback || $.noop;\r\n\t\t\tui.mask.show();\r\n\t\t\tdocument.body.classList.add($.className('dtpicker-active-for-page'));\r\n\t\t\tui.picker.classList.add($.className('active'));\r\n\t\t\t//处理物理返回键\r\n\t\t\tself.__back = $.back;\r\n\t\t\t$.back = function() {\r\n\t\t\t\tself.hide();\r\n\t\t\t};\r\n\t\t},\r\n\t\thide: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tif (self.disposed) return;\r\n\t\t\tvar ui = self.ui;\r\n\t\t\tui.picker.classList.remove($.className('active'));\r\n\t\t\tui.mask.close();\r\n\t\t\tdocument.body.classList.remove($.className('dtpicker-active-for-page'));\r\n\t\t\t//处理物理返回键\r\n\t\t\t$.back = self.__back;\r\n\t\t},\r\n\t\tdispose: function() {\r\n\t\t\tvar self = this;\r\n\t\t\tself.hide();\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tself.ui.picker.parentNode.removeChild(self.ui.picker);\r\n\t\t\t\tfor (var name in self) {\r\n\t\t\t\t\tself[name] = null;\r\n\t\t\t\t\tdelete self[name];\r\n\t\t\t\t};\r\n\t\t\t\tself.disposed = true;\r\n\t\t\t}, 300);\r\n\t\t}\r\n\t});\r\n\r\n})(mui, document);\r\n"]}